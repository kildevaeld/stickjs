!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.stick=e():t.stick=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}Object.defineProperty(e,"__esModule",{value:!0}),n(1),n(41),n(43),n(46);var o=n(2);i(e,r(o,i))},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}var i=n(2),o=r(i),a=n(40),s=n(38),u=r(s),c=n(4),l=r(c);o.factory("$templateResolver",function(){return function(t){var e=document.getElementById(t);return null==e?l.Promise.reject(new Error("template with id: '"+t+"' not found")):l.Promise.resolve(e.innerHTML)}}),o.factory("$templateCreator",["$templateResolver","$container",function(t,e){return function(t,n){var r=u.compile(t,{viewClass:a.TemplateView}),i=r.view(n,{container:e});return i}}])},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){var n=l.getDependencies(e),r=c(n,1),i=r[0];if(!i||"function"!=typeof i)throw new f.StickError("service should be a function");return p.Repository.add(l.DependencyType.Service,t,i),this}function o(t,e){var n=l.getDependencies(e),r=c(n,1),i=r[0];if(!i)throw new f.StickError("factory");return p.Repository.add(l.DependencyType.Factory,t,i),this}function a(t,e){var n=l.getDependencies(e),r=c(n,2),i=r[0],o=r[1];if(i){var a=void 0;if("function"!=typeof i&&d.isObject(i)){var s=d.extend({},i);"function"==typeof i.initialize?(a=i.initialize,delete s.initialize):"function"==typeof i.constructor&&(a=i.constructor,delete s.constructor),o&&0!=o.length||l.getDependencies(a),d.assign(a.prototype,s)}else"function"==typeof i&&(a=i);if("function"!=typeof a)throw new f.StickError("controller defition should be a function or an object literal");return new v.ModuleFactory(t,a,new y.Container)}throw new f.StickError("controller definition should be a function, function constructor or a object literal")}function s(t,e){m.component(t,e)}function u(t,e){m.attribute(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.service=i,e.factory=o,e.module=a,e.component=s,e.attribute=u;var l=n(3),f=n(23),p=n(24),h=n(4),d=r(h),v=n(25),y=n(39),g=n(38),m=r(g)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=d.Metadata.getOwn(d.Metadata.paramTypes,t);if(!n){var r=t.toString().match(v);r&&(n=r[1].replace(/,/," ").split(" ").map(function(t){return t.replace(",","").trim()}).filter(function(t){return""!==t}),e&&d.Metadata.define(d.Metadata.paramTypes,n,t,void 0))}return n||[]}function o(t){var e=void 0;if(t.constructor===Array){var n=t.pop();e=t,t=n,t.inject=e}else{if("function"!=typeof t)return[t,null];if(e=h.result(t,"inject"),!e||0==e.length){var r=t;r.__metadata__&&r.__metadata__.undefined["design:paramtypes"]&&delete r.__metadata__.undefined["design:paramtypes"],e=i(t),r.inject=e}}return[t,e]}function a(t){return function(e){var n=y[y.DependencyType];d.Metadata.define(n,t,e,void 0)}}function s(t){var e=y[y.DependencyType],n=d.Metadata.getOwn(e,t,void 0);return n}function u(t,e){return s(t)===e}function c(t,e){var n=d.Metadata.instanceActivator;d.Metadata.define(n,e,t,void 0)}function l(t,e){var n=d.Metadata.dependencyResolver;d.Metadata.define(n,e,t,void 0)}Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionParameters=i,e.getDependencies=o,e.setDependencyType=a,e.getDependencyType=s,e.isDependencyType=u,e.setActivator=c,e.setDependencyResolver=l;var f,p=n(4),h=r(p),d=n(13),v=/function[^(]*\(([^)]*)\)/i;e.DependencyType=f,function(t){t[t.Service=0]="Service",t[t.Module=1]="Module",t[t.Controller=2]="Controller",t[t.Factory=3]="Factory"}(f||(e.DependencyType=f={}));var y;e.Metakey=y,function(t){t[t.DependencyType=0]="DependencyType"}(y||(e.Metakey=y={}));var g="mobyjs:service:config";e.DIServiceConfig=g},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(5)),r(n(7)),r(n(9)),r(n(6)),r(n(8)),r(n(10)),r(n(11)),r(n(12))},function(t,e,n){function r(t){return t.filter(function(e,n){for(n+=1;n<t.length;n+=1)if(l.equal(e,t[n]))return!1;return!0})}function i(t,e){for(var n=0,r=t.length;r>n;n++)if(e(t[n]))return!0;return!1}function o(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function a(t,e,n){var r,i;for(r=0;r<t.length;r++)if(i=t[r],e.call(n,i))return i;return null}function s(t,e,n){return Array.prototype.slice.call(t,e,n)}function u(t){return t.reduce(function(t,e){return t.concat(Array.isArray(e)?u(e):e)},[])}function c(t,e,n){var r="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}).map(function(t){return t.value})}var l=n(6);e.unique=r,e.any=i,e.indexOf=o,e.find=a,e.slice=s,e.flatten=u,e.sortBy=c},function(t,e,n){function r(){var t;if(window.hasOwnProperty("XMLHttpRequest"))return new XMLHttpRequest;try{return new ActiveXObject("msxml2.xmlhttp.6.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp.3.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp")}catch(e){t=e}return t}function i(t){return void 0===t&&(t=""),t+ ++y}function o(t,e,n){Array.isArray(n)||(n=[n]),n.forEach(function(n){"function"==typeof e[n]&&(t[n]=a(e[n],e))})}function a(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("function"!=typeof t)throw new Error("method not at function");if(null!=g)return g.call.apply(g,[t,e].concat(n));n=n||[];var i=function(){},o=function(){var r=this instanceof i?this:e;return s(t,r,n.concat(d.slice(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}function s(t,e,n){switch(void 0===n&&(n=[]),n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}}function u(t,e){return p(t,e,[],[])}function c(t,e,n){var r=v.camelcase("on-"+e.replace(":","-"));t[r]&&"function"==typeof t[r]&&s(t[r],t,n),"function"==typeof t.trigger&&(n=[e].concat(n),s(t.trigger,t,n))}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(h.isObject(r)&&r[t])return r[t]}return null}function f(t,e,n){var r;r=e&&h.has(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},h.extend(r,t,n);var i=function(){this.constructor=r};return i.prototype=t.prototype,r.prototype=new i,e&&h.extend(r.prototype,e),r.__super__=t.prototype,r}function p(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var i=toString.call(t);if(i!=toString.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var a=t.constructor,s=e.constructor;if(a!==s&&!("function"==typeof a&&a instanceof a&&"function"==typeof s&&s instanceof s))return!1;n.push(t),r.push(e);var u=0,c=!0;if("[object Array]"===i){if(u=t.length,c=u===e.length)for(;u--&&(c=p(t[u],e[u],n,r)););}else{for(var l in t)if(h.has(t,l)&&(u++,!(c=h.has(e,l)&&p(t[l],e[l],n,r))))break;if(c){for(l in e)if(h.has(e,l)&&!u--)break;c=!u}}return n.pop(),r.pop(),c}var h=n(7),d=n(5),v=n(8),y=0,g=Function.prototype.bind;e.ajax=r,e.uniqueId=i,e.proxy=o,e.bind=a,e.callFunc=s,e.equal=u,e.triggerMethodOn=c,e.getOption=l,e.inherits=f,e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}()},function(t,e,n){function r(t){return t===Object(t)}function i(t){return 0===Object.keys(t).length}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!r(t))return t;for(var i,o,a=0;a<e.length;a++)if(i=e[a],r(i))for(o in i)s(i,o)&&(t[o]=i[o]);return t}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),i=0,o=e.length;o>i;i++){var a=e[i];if(void 0!==a&&null!==a){a=Object(a);for(var s=Object.keys(Object(a)),u=0,c=s.length;c>u;u++){var l=s[u],f=Object.getOwnPropertyDescriptor(a,l);void 0!==f&&f.enumerable&&(r[l]=a[l])}}}return r}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var n,r={},i=0;i<e.length;i++)n=e[i],s(t,n)&&(r[n]=t[n]);return r}function c(t,e,n,r){var i=t[e];return"function"==typeof i?h.callFunc(i,n,r||[]):i}function l(t){var e=[];for(var n in t)s(t,n)&&e.push(t[n]);return e}function f(t,e,n){for(var r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],i=d.any(e,function(t){return n(t,r)}),i&&o.push(r);return o}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[e.length-1],i=e.length,o=h.equal;"function"==typeof r&&(o=r,i--);for(var a=0;i>a;a++){var s=e[a];if(t=f(t,s,o),0===t.length)break}return t}var h=n(6),d=n(5);e.isObject=r,e.isEmpty=i,e.extend=o,e.assign=a,e.has=s,e.pick=u,e.result=c,e.values=l,e.intersection=p},function(t,e){function n(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function r(t,e){var n=t.substring(0,Math.min(e,t.length));return n+(n.length==t.length?"":"...")}function i(t,e){void 0===e&&(e=!1);var n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";var r=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do t/=n,++i;while(Math.abs(t)>=n&&i<r.length-1);return t.toFixed(1)+" "+r[i]}e.camelcase=n,e.truncate=r,e.humanFileSize=i},function(t,e,n){(function(t){function r(t){return t&&"function"==typeof t.then}function i(t){return t?r(t)?t:"function"==typeof t?o.call(this,t):Array.isArray(t)?a.call(this,t):h.isObject(t)?s.call(this,t):e.Promise.resolve(t):t}function o(t){var n=this;return new e.Promise(function(e,r){t.call(n,function(t,n){return t?r(t):(arguments.length>2&&(n=d.slice(arguments,1)),void e(n))})})}function a(t){return e.Promise.all(t.map(i,this))}function s(t){function n(t,e){o[e]=void 0,s.push(t.then(function(t){o[e]=t}))}for(var o=new t.constructor,a=Object.keys(t),s=[],u=0;u<a.length;u++){var c=a[u],l=i.call(this,t[c]);l&&r(l)?n(l,c):o[c]=t[c]}return e.Promise.all(s).then(function(){return o})}function u(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o={};return o.promise=new e.Promise(function(t,e){o.resolve=t,o.reject=e,o.done=function(n,r){return n?e(n):void t(r)}}),"function"==typeof t?(v.callFunc(t,n,r.concat([o.done])),o.promise):o}function c(t,e,n){t.then(function(t){e.call(n,null,t)})["catch"](function(t){e.call(n,t)})}function l(t){var e=u();return null==t?v.nextTick(e.resolve):setTimeout(e.resolve,t),e.promise}function f(t,e,n,r){return void 0===r&&(r=!1),p(t,e,n,r).then(function(){return void 0})}function p(t,n,i,o){return void 0===o&&(o=!1),new e.Promise(function(e,a){function s(p,h){if(p&&!o)return a(p);if(p&&l.push(p),u===c)return l.length?a(d.flatten(l)):e(f);var v=n.call(i,t[u++]);r(v)?v.then(function(t){f.push(t),s(null,t)},s):s(v instanceof Error?v:null)}var u=0,c=t.length,l=[],f=[];s(null)})}var h=n(7),d=n(5),v=n(6);e.Promise=(t||window).Promise,e.isPromise=r,e.toPromise=i,e.thunkToPromise=o,e.arrayToPromise=a,e.objectToPromise=s,e.deferred=u,e.callback=c,e.delay=l,e.eachAsync=f,e.mapAsync=p}).call(e,function(){return this}())},function(t,e,n){function r(t,e){return y.call(t,e)}function i(t,e,n,r){void 0===r&&(r=!1),g.call(t,e,n,r)}function o(t,e,n){m.call(t,e,n)}function a(t,e,n,o,a){var s=t,u=function(t){var n=t.target||t.srcElement;if(!t.delegateTarget)for(;n&&n!=s;n=n.parentNode)r(n,e)&&(t.delegateTarget=n,o(t))},c=!!~w.indexOf(n);return i(t,n,u,c),O.push({eventName:n,handler:u,listener:o,selector:e}),u}function s(t,e,n,r){for(var i=O.slice(),a=0,s=i.length;s>a;a++){var u=i[a],c=u.eventName===n&&(r?u.listener===r:!0)&&(e?u.selector===e:!0);c&&(o(t,u.eventName,u.handler),O.splice(d.indexOf(i,u),1))}}function u(t,e){t.classList?t.classList.add(e):t.className=t.className.split(" ").concat(e.split(" ")).join(" ")}function c(t,e){if(t.classList)t.classList.remove(e);else for(var n,r=t.className.split(" "),i=e.split(" "),o=0,a=i.length;a>o;o++)n=r.indexOf(i[o]),~n&&(r=r.splice(n,1))}function l(t,e){if(t.classList)return t.classList.contains(e);var n=new RegExp("\b"+e);return n.test(t.className)}function f(t){if("selectionStart"in t)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange(),n=document.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-n}}function p(t,e,n,r){var a=$.transitionEnd||($.transitionEnd=b()),s=function(r){o(t,a,s),e.call(n,r)};i(t,a,s)}function h(t,e,n,r){var a=$.animationEnd||($.animationEnd=_()),s=function(r){o(t,a,s),e.call(n,r)};i(t,a,s)}var d=n(5),v="undefined"!=typeof Element&&Element.prototype||{},y=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||function(t){var e=(this.parentNode||document).querySelectorAll(t)||[];return!!~d.indexOf(e,this)},g=v.addEventListener||function(t,e){return this.attachEvent("on"+t,e)},m=v.removeEventListener||function(t,e){return this.detachEvent("on"+t,e)},b=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null},_=function(){var t=document.createElement("bootstrap"),e={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null};e.matches=r,e.addEventListener=i,e.removeEventListener=o;var w="focus blur change".split(" "),O=[];e.delegate=a,e.undelegate=s,e.addClass=u,e.removeClass=c,e.hasClass=l,e.selectionStart=f;var $={animationEnd:null,transitionEnd:null};e.transitionEnd=p,e.animationEnd=h,e.domReady=function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),o=!0;t=e.shift();)t()}),function(t){o?setTimeout(t,0):e.push(t)}}},function(t,e,n){function r(t){return"?"+Object.keys(t).reduce(function(e,n){return e.push(n+"="+encodeURIComponent(t[n])),e},[]).join("&")}var i=n(6),o=n(9),a=/^application\/json/,s=/^file:/;e.queryParam=r;var u=function(t,e){return t.status>=200&&t.status<300||304===t.status||0===t.status&&s.test(e)},c=function(){function t(t,e){this._method=t,this._url=e,this._xhr=i.ajax()}return t.prototype.send=function(t){return this._data=t,this},t.prototype.withCredentials=function(t){return this._xhr.withCredentials=t,this},t.prototype.end=function(t){var e=this;this._data=t||this._data;var n=o.deferred();this._xhr.addEventListener("readystatechange",function(){return e._xhr.readyState===XMLHttpRequest.DONE?u(e._xhr,e._url)?void n.resolve(e._xhr.responseText):n.reject(new Error("server responded with: "+e._xhr.status)):void 0}),t=this._data;var i=this._url;if(t&&t===Object(t)){var a=r(t);i+=a}return this._xhr.open(this._method,i,!0),this._xhr.send(t),n.promise},t.prototype.json=function(t){var e=this;return this.end(t).then(function(t){var n=e._xhr.getResponseHeader("content-type");if(a.test(n)&&""!==t){var r=JSON.parse(t);return r}throw new Error("json")})},t.prototype.progress=function(t){return this._xhr.addEventListener("progress",t),this},t.prototype.header=function(t,e){return this._xhr.setRequestHeader(t,e),this},t}();e.Request=c;var l;!function(t){function e(t){return new c("GET",t)}function n(t){return new c("POST",t)}function r(t){return new c("PUT",t)}function i(t){return new c("DELETE",t)}t.get=e,t.post=n,t.put=r,t.del=i}(l=e.request||(e.request={}))},function(t,e,n){function r(t){return o.create(t)}var i=n(6),o=function(){function t(t){this.enabled=!1,this.namespace=t}return t.enable=function(t,e){for(var n in this.loggers)e&&n===e?this.loggers[n].enabled=t:e||(this.loggers[n].enabled=t)},t.create=function(e){var n;return this.loggers[e]?n=this.loggers[e].debug:(n=new t(e),this.loggers[e]=n),i.bind(n.debug,n)},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(this.enabled){e[0]=this._coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var r=0;e[0]=e[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;r++;var o=t.formatters[i];if("function"==typeof o){var a=e[r];n=o.call(self,a),e.splice(r,1),r--}return n}),e=this._formatArgs(e),this._log.apply(this,e)}},t.prototype._log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.prototype._coerce=function(t){return t instanceof Error?t.stack||t.message:t},t.prototype._formatArgs=function(t){return t[0]="[templ:"+this.namespace+"] "+t[0],t},t.loggers={},t.formatters={j:function(t){return JSON.stringify(t)}},t}();e.Debug=o,e.debug=r},function(t,e,n){t.exports=n(14)},function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}function o(){}Object.defineProperty(e,"__esModule",{value:!0}),o.name||Object.defineProperty(Function.prototype,"name",{get:function(){var t=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:t}),t}});var a="0.0.4";e.Version=a;var s=n(15);i(e,r(s,i));var u=n(19);i(e,r(u,i));var c=n(22);i(e,r(c,i));var l=n(16);i(e,r(l,i))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=u.Metadata.getOwn(u.Metadata.paramTypes,t);if(!n){var r=t.toString().match(l);r&&(n=r[1].replace(/\W+/," ").split(" ").map(function(t){return t.replace(",","").trim()}).filter(function(t){return""!==t}),e&&u.Metadata.define(u.Metadata.paramTypes,n,t,void 0))}return n||[]}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.getFunctionParameters=o;var s=n(16),u=n(17),c=n(18),l=/function[^(]*\(([^)]*)\)/i,f=function(t){function e(n){r(this,e),t.call(this,n),this.name="BadKeyError",this.message="key not registered with container"}return i(e,t),e}(c.DIError);e.DIBadKeyError=f;var p=Object.freeze([]);e.emptyParameters=p;var h="moby:instance-activator",d="moby:registration",v="moby:dependency-resolver";u.Metadata.instanceActivator=h,u.Metadata.registration=d,u.Metadata.dependencyResolver=v;var y=function(){function t(e){r(this,t),this.entries=new Map,this.constructionInfo=e||new Map}return t.prototype.makeGlobal=function(){return t.instance=this,this},t.prototype.autoRegister=function(t,e,n){var r;if(null===t||void 0===t)throw new f;"function"==typeof t?(r=u.Metadata.get(d,t,n),void 0!==r?r.register(this,e||t,t):this.registerSingleton(e||t,t,n)):this.registerInstance(t,t)},t.prototype.unregister=function(t){this.entries["delete"](t)},t.prototype.hasHandler=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(null===t||void 0===t)throw new f;return this.entries.has(t)||e&&this.parent&&this.parent.hasHandler(t,e)},t.prototype.get=function(e,n){var r;if(null===e||void 0===e)throw new f;if(e===t)return this;if(e instanceof s.Resolver)return e.get(this);if(r=this.entries.get(e),void 0!==r)return r[0](this);if(this.parent&&this.parent.hasHandler(e))return this.parent.get(e,n);if("string"==typeof e)throw c.createError("DIResolveError","no component registered for key: "+e);return this.autoRegister(e,n),r=this.entries.get(e),r[0](this)},t.prototype.getAll=function(t){var e,n=this;if(null===t||void 0===t)throw new f;return e=this.entries.get(t),void 0!==e?e.map(function(t){return t(n)}):this.parent?this.parent.getAll(t):[]},t.prototype.createChild=function(){var e=new t(this.constructionInfo);return e.parent=this,e},t.prototype.resolveDependencies=function(t,e){var n,r,i=this._getOrCreateConstructionSet(t,e),o=i.keys,a=new Array(o.length);try{for(n=0,r=o.length;r>n;++n)a[n]=this.get(o[n])}catch(s){var u="Error";throw r>n&&(u+=" The argument at index "+n+" (key:"+o[n]+") could not be satisfied."),c.createError("DependencyError",u)}return a},t.prototype.invoke=function(t,e,n){var r=this._getOrCreateConstructionSet(t,n);try{var i,o;return o=r.dependencyResolver?r.dependencyResolver.resolveDependencies(t):this.resolveDependencies(t,n),void 0!==e&&Array.isArray(e)&&(o=o.concat(e)),r.activator.invoke(t,o,n,i)}catch(a){var u=r.activator instanceof s.ClassActivator?"instantiating":"invoking",l="Error "+u+" "+t.name+".";throw l+=" Check the inner error for details.",c.createError("DIInvokeError",l,[a])}},t.prototype.registerInstance=function(t,e){this.registerHandler(t,function(t){return e})},t.prototype.registerTransient=function(t,e,n){this.registerHandler(t,function(t){return t.invoke(e,null,n)})},t.prototype.registerSingleton=function(t,e,n){var r;this.registerHandler(t,function(t){return r||(r=t.invoke(e,null,n))})},t.prototype.registerHandler=function(t,e){this._getOrCreateEntry(t).push(e)},t.prototype._getOrCreateEntry=function(t){var e;if(null===t||void 0===t)throw new c.DIError("key cannot be null or undefined.  (Are you trying to inject something that doesn't exist with DI?)");return e=this.entries.get(t),void 0===e&&(e=[],this.entries.set(t,e)),e},t.prototype._getOrCreateConstructionSet=function(t,e){var n=this.constructionInfo.get(t);return void 0===n&&(n=this._createConstructionSet(t,e),this.constructionInfo.set(t,n)),n},t.prototype._createConstructionSet=function(t,e){var n={activator:u.Metadata.getOwn(u.Metadata.instanceActivator,t,e)||s.ClassActivator.instance,dependencyResolver:u.Metadata.getOwn(v,t,e)||this};return void 0!==t.inject?("function"==typeof t.inject?n.keys=t.inject():n.keys=t.inject,n):(n.keys=u.Metadata.getOwn(u.Metadata.paramTypes,t,e)||o(t)||p,n)},a(t,[{key:"root",get:function(){for(var t=this,e=t;e;)e=t.parent,e&&(t=e);return t}}]),t}();e.DIContainer=y},function(t,e){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e){r(this,t),this.key=e}return t.prototype.register=function(t,e,n){t.registerTransient(this.key||e,n)},t}();e.TransientRegistration=i;var o=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,t),"boolean"==typeof e?this.registerInChild=e:(this.key=e,this.registerInChild=n)}return t.prototype.register=function(t,e,n){var r=this.registerInChild?t:t.root;r.registerSingleton(this.key||e,n)},t}();e.SingletonRegistration=o;var a=function(){function t(){r(this,t)}return t.prototype.get=function(t){throw new Error("A custom Resolver must implement get(container) and return the resolved instance(s).")},t}();e.Resolver=a;var s=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){var e=this;return function(){return t.get(e.key)}},e.of=function(t){return new e(t)},e}(a);e.Lazy=s;var u=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){return t.getAll(this.key)},e.of=function(t){return new e(t)},e}(a);e.All=u;var c=function(t){function e(n){var i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,e),t.call(this),this.key=n,this.checkParent=i}return n(e,t),e.prototype.get=function(t){return t.hasHandler(this.key,this.checkParent)?t.get(this.key):null},e.of=function(t){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return new e(t,n)},e}(a);e.Optional=c;var l=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){return t.parent?t.parent.get(this.key):null},e.of=function(t){return new e(t)},e}(a);e.Parent=l;var f=function(){function t(){r(this,t)}return t.prototype.invoke=function(t,e){return Reflect.construct(t,e)},t}();e.ClassActivator=f,f.instance=new f;var p=function(){function t(){r(this,t)}return t.prototype.invoke=function(t,e){return t.apply(void 0,e)},t}();e.FactoryActivator=p,p.instance=new p},function(t,e){(function(t){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){var e;if(e="function"==typeof t.decorators?t.decorators():t.decorators,"function"!=typeof e._decorate)throw new Error("The return value of your decorator's method was not valid.");delete t.decorators,e._decorate(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=Function.prototype.bind,o=function(){return"undefined"!=typeof self?self:"undefined"!=typeof t?t:new Function("return this")()}(),a=Object.freeze({}),s="__metadata__";"undefined"==typeof o.System&&(o.System={isFake:!0}),"undefined"==typeof o.System.forEachModule&&(o.System.forEachModule=function(){}),"undefined"==typeof o.Reflect&&(o.Reflect={}),"undefined"==typeof o.Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(t,e,n){return((e[s]||a)[n]||a)[t]}),"undefined"==typeof o.Reflect.defineMetadata&&(Reflect.defineMetadata=function(t,e,n,r){var i=n.hasOwnProperty(s)?n[s]:n[s]={},o=i[r]||(i[r]={});o[t]=e}),"undefined"==typeof o.Reflect.metadata&&(Reflect.metadata=function(t,e){return function(n,r){Reflect.defineMetadata(t,e,n,r)}}),Reflect.construct=function(t,e){return new(i.apply(t,[null].concat(n(e))))};var u={global:o,noop:function(){},resource:"aurelia:resource",paramTypes:"design:paramtypes",properties:"design:properties",get:function(t,e,n){if(!e)return void 0;var r=u.getOwn(t,e,n);return void 0===r?u.get(t,Object.getPrototypeOf(e),n):r},getOwn:function(t,e,n){return e?(e.hasOwnProperty("decorators")&&r(e),Reflect.getOwnMetadata(t,e,n)):void 0},define:function(t,e,n,r){Reflect.defineMetadata(t,e,n,r)},getOrCreateOwn:function(t,e,n,r){var i=u.getOwn(t,n,r);return void 0===i&&(i=new e,Reflect.defineMetadata(t,i,n,r)),i}};e.Metadata=u}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e,n){var r=void 0;return r=n?new a(e,n):new o(e),r.name=t,r}Object.defineProperty(e,"__esModule",{value:!0}),e.createError=i;var o=function(t){function e(r){n(this,e),t.call(this,r),this.message=r}return r(e,t),e.prototype.toString=function(){return"["+this.name+": "+this.message+"]"},e}(Error);e.DIError=o;var a=function(t){function e(r,i){n(this,e),t.call(this,r),this.errors=i}return r(e,t),e.prototype.toString=function(){return"["+this.name+": "+this.message+"], errors:"+this.errors},e}(o);e.DIAggregateError=a},function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(17);i(e,r(o,i));var a=n(20);i(e,r(a,i))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),i={configure:{parameterizedDecorator:function(t,e){i[t]=function(){var e=new r.DecoratorApplicator;return e[t].apply(e,arguments)},r.DecoratorApplicator.prototype[t]=function(){var t=e.apply(null,arguments);return this.decorator(t)}},simpleDecorator:function(t,e){i[t]=function(){return(new r.DecoratorApplicator).decorator(e)},r.DecoratorApplicator.prototype[t]=function(){return this.decorator(e)}}}};e.Decorators=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){n(this,t),this._first=null,this._second=null,this._third=null,this._rest=null}return t.prototype.decorator=function(t){return null===this._first?(this._first=t,this):null===this._second?(this._second=t,this):null===this._third?(this._third=t,this):(null===this._rest&&(this._rest=[]),this._rest.push(t),this)},t.prototype._decorate=function(t){var e,n,r;if(null!==this._first&&this._first(t),null!==this._second&&this._second(t),null!==this._third&&this._third(t),r=this._rest,null!==r)for(e=0,n=r.length;n>e;++e)r[e](t)},t}();e.DecoratorApplicator=r},function(t,e,n){"use strict";function r(t){var e=function(t){t.inject=l.Metadata.getOwn(l.Metadata.paramTypes,t)||p.emptyParameters};return t?e(t):e}function i(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return function(t){t.inject=e}}function o(t,e){return function(n){l.Metadata.define(l.Metadata.registration,t,n,e)}}function a(t,e){return o(new f.TransientRegistration(t),e);
}function s(t,e,n){return void 0===e&&(e=!1),o(new f.SingletonRegistration(t,e),n)}function u(t,e){return function(n){l.Metadata.define(l.Metadata.instanceActivator,t,n,e)}}function c(){return u(f.FactoryActivator.instance)}Object.defineProperty(e,"__esModule",{value:!0}),e.autoinject=r,e.inject=i,e.registration=o,e["transient"]=a,e.singleton=s,e.instanceActivator=u,e.factory=c;var l=n(19),f=n(16),p=n(15);l.Decorators.configure.simpleDecorator("autoinject",r),l.Decorators.configure.parameterizedDecorator("inject",i),l.Decorators.configure.parameterizedDecorator("registration",o),l.Decorators.configure.parameterizedDecorator("transient",a),l.Decorators.configure.parameterizedDecorator("singleton",s),l.Decorators.configure.parameterizedDecorator("instanceActivator",u),l.Decorators.configure.parameterizedDecorator("factory",c)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}},o=function(t){function e(t){n(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.message=t}return r(e,t),e}(Error);e.StickError=o;var a=function(t){function e(){n(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),e}(o);e.StickDependencyError=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(3),o=n(4),a=n(13);e.Repository=r,function(t){function e(e,n,r){var s=void 0;if(s=o.find(t.items,function(t){return t.name==n}))throw new Error(e+" named "+n+" already imported as "+s.type);var u=a.Metadata.get(i.DIServiceConfig,r);t.items.push({name:n,handler:r,type:e,config:u})}function n(t,e){return!!r(t,e)}function r(e,n){return o.find(t.items,function(t){return t.name==n&&t.type==e})}function s(e){return o.find(t.items,function(t){return t.name==e})}t.items=[],t.add=e,t.has=n,t.get=r,t.any=s}(r||(e.Repository=r={}))},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=n(23),c=n(13),l=n(4),f=r(l),p=n(26),h=n(37),d=function(){function t(e,n,r){if(i(this,t),3!=arguments.length)throw new Error;this.name=e,this.module=n,this.container=r,this.container.registerSingleton(e,n),this.container.registerInstance("$container",this.container)}return a(t,[{key:"controller",value:function(t,e){var n=s.getDependencies(e),r=o(n,2),i=r[0],a=r[1];if(!i)throw new u.StickError("controller definition should be a function, function constructor or a object literal");var c=void 0;if("function"!=typeof i&&f.isObject(i)){var l=f.extend({},i);"function"==typeof i.initialize?(c=i.initialize,delete l.initialize):"function"==typeof i.constructor&&(c=i.constructor,delete l.constructor),a&&0!=a.length||s.getDependencies(c),f.assign(c.prototype,l)}else"function"==typeof i&&(c=i);if("function"!=typeof c)throw new u.StickError("controller defition should be a function or an object literal");s.setDependencyType(s.DependencyType.Controller)(c);var p=new h.ControllerFactory(t,c,this.container.createChild());return this.container.registerInstance(t,p),this}},{key:"service",value:function(t,e){var n=s.getDependencies(e),r=o(n,1),i=r[0];if(!i||"function"!=typeof i)throw new u.StickError("service should be a function");return s.setDependencyType(s.DependencyType.Service)(i),this.container.registerSingleton(t,i),this}},{key:"factory",value:function(t,e){var n=s.getDependencies(e),r=o(n,1),i=r[0];if(!i)throw new u.StickError("factory");return"function"==typeof i?(s.setDependencyType(s.DependencyType.Factory)(i),s.setActivator(i,c.FactoryActivator.instance),this.container.registerSingleton(t,i)):this.container.registerInstance(t,i),this}},{key:"create",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this.container.hasInstance(this.name))return f.Promise.resolve(this.container.get(this.name));this.container.registerSingleton("$context",p.getContext());var n=this.container.get("$context");e.el&&!function(){var n=t.container.get("$templateCreator"),r=e.el.innerHTML;t.factory("template",["$context",function(t){return n(r,t.__model)}])}(),n.$observe();var r=this.container.get(this.name);if(n.$unobserve(),e.el){var i=this.container.get("template").render();e.el.innerHTML="",e.el.appendChild(i)}return f.Promise.resolve(r)}},{key:"destroy",value:function(){this.container.destroy()}}]),t}();e.ModuleFactory=d},function(t,e,n){"use strict";function r(t){return"function"==typeof Object.observe?new o.ObjectObserveProxy:new a.DirtyObjectObserver}function i(){return"function"==typeof Object.observe?o.ObjectObserveProxy:a.DirtyObjectObserver}Object.defineProperty(e,"__esModule",{value:!0}),e.createContext=r,e.getContext=i;var o=n(27),a=n(36)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}},s=n(28),u=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),o(e,[{key:"$observe",value:function(){Object.observe(this,this.__onchange)}},{key:"$unobserve",value:function(){Object.unobserve(this,this.__onchange)}},{key:"$createChild",value:function(){var t=new e;return t.__parent=this,t}}]),e}(s.Context);e.ObjectObserveProxy=u},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(29),s=n(4),u=r(s),c=function(t){var e=Object.keys(t),n={},r={};return e.map(function(e){return{key:e,value:t[e]}}).filter(function(e){return u.has(t,e.key)?e.value&&u.isPromise(e.value)?(n[e.key]=e.value,delete t[e.key],!1):!0:!1}).forEach(function(t){r[t.key]=t.value}),{attr:r,deferred:n}};e.get_atributes=c;var l=function(){function t(){i(this,t),this.__queue=0,this.__model=new a.NestedModel}return o(t,[{key:"$call",value:function(t,e,n){var r=this;this.$observe();var i=u.callFunc(t,e,n);if(i)return this.__queue++,u.toPromise(i).then(function(){return 0===--r.__queue&&r.$unobserve(),i});var o=function(){var t=u.deferred();return u.nextTick(function(){0==r.__queue&&r.$unobserve(),t.resolve(null)}),{v:t.promise}}();return"object"==typeof o?o.v:void 0}},{key:"$subscribe",value:function(t,e){}},{key:"$unsubsribe",value:function(t,e){}},{key:"$publish",value:function(t){}},{key:"__onchange",value:function(t){for(var e=this,n={},r=0,i=t.length;i>r;r++){var o=t[r],a=o.name.split(".");"__parent"!==o.name&&"__queue"!==o.name&&"__model"!=a[0]&&("delete"===o.type?this.__model.set(o.name,{unset:!0}):n[o.name]=this[o.name])}var s=c(n),l=s.attr,f=s.deferred;if(Object.keys(l).length){var p=this.__normalizeAttr(l);this.$unobserve(),this.__model.set(p),u.extend(this,p),this.$observe()}Object.keys(f).length&&(this.__queue++,u.toPromise(f).then(function(t){0===--e.__queue&&e.$unobserve(),t=e.__normalizeAttr(t),u.extend(e,t),e.__model.set(t)})["catch"](function(t){e.__model.trigger("error",t),e.$unobserve()}))}},{key:"__normalizeAttr",value:function(t){for(var e in t){var n=t[e];Array.isArray(n)&&n.length>0&&u.isObject(n[0])&&(n=new a.Collection(n),t[e]=n)}return t}}]),t}();e.Context=l},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(30)),r(n(33)),r(n(34)),r(n(35))},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(31),o=n(33),a=n(7),s=n(5),u=n(6),c={add:!0,remove:!0,merge:!0},l={add:!0,remove:!1},f=function(t){function e(e,n){void 0===n&&(n={}),this.options=n,this.options.model&&(this.Model=this.options.model),e&&this.add(e),t.call(this)}return r(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.models.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Model",{get:function(){return this._model||(this._model=o.Model),this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"models",{get:function(){return this._models||(this._models=[])},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){var n=this;void 0===e&&(e={}),Array.isArray(t)?t=t.map(function(t){return t instanceof n.Model?t:n.create(t,{add:!1})}):t instanceof this.Model||(t=this.create(t,{add:!1})),this.set(t,a.extend({merge:!1},e,l))},e.prototype.set=function(t,e){void 0===e&&(e={}),e=a.extend({},c,e),e.parse&&(t=this.parse(t,e));var n,r,i,o,s,u,l,f=!Array.isArray(t),p=f?t?[t]:[]:t.slice(),h=e.at,d=this.comparator&&null==h&&e.sort!==!1,v="string"==typeof this.comparator?this.comparator:null,y=[],g=[],m={},b=e.add,_=e.merge,w=e.remove,O=!d&&b&&w?[]:null;for(n=0,r=p.length;r>n;n++){if(o=p[n],i=o.get(o.idAttribute)||o.uid,u=this.get(i))w&&(m[u.uid]=!0),_&&(s=o.toJSON(),u.set(s,e),d&&!l&&u.hasChanged(v)&&(l=!0)),p[n]=u;else if(b){if(p[n]=o,!o)continue;y.push(o),this._addReference(o,e)}o=u||o,O&&!m[o.id]&&O.push(o),m[o.uid]=!0}if(w){for(n=0,r=this.length;r>n;++n)m[(o=this.models[n]).uid]||g.push(o);g.length&&this.remove(g,e)}if(y.length||O&&O.length)if(d&&(l=!0),null!=h)for(n=0,r=y.length;r>n;n++)this.models.splice(h+n,0,y[n]);else{O&&(this.models.length=0);var $=O||y;for(n=0,r=$.length;r>n;n++)this.models.push($[n])}if(l&&this.sort({silent:!0}),!e.silent){for(n=0,r=y.length;r>n;n++)(o=y[n]).trigger("add",o,this,e);(l||O&&O.length)&&this.trigger("sort",this,e),(y.length||g.length)&&this.trigger("update",this,e)}return f?p[0]:p},e.prototype.remove=function(t,e){void 0===e&&(e={});var n=!Array.isArray(t);t=n?[t]:t.slice();var r,i,o,a;for(r=0,i=t.length;i>r;r++)a=t[r]=this.get(t[r]),a&&(o=this.indexOf(a),this.models.splice(o,1),e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},e.prototype.get=function(t){return this.find(t)},e.prototype.at=function(t){return this.models[t]},e.prototype.clone=function(t){return t=t||this.options,new this.constructor(this.models,t)},e.prototype.sort=function(t){if(void 0===t&&(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return"string"==typeof this.comparator||1===this.comparator.length?this._models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},e.prototype.sortBy=function(t,e){return s.sortBy(this._models,t,e)},e.prototype.push=function(t,e){return void 0===e&&(e={}),this.add(t,a.extend({at:this.length},e))},e.prototype.reset=function(t,e){var n=this;return void 0===e&&(e={}),this.forEach(function(t){n._removeReference(t,e)}),e.previousModels=this.models,this._reset(),t=this.add(t,e),e.silent||this.trigger("reset",this,e),t},e.prototype.create=function(t,e){void 0===e&&(e={add:!0});var n=new this.Model(t,e);return e.add&&this.add(n),n},e.prototype.parse=function(t,e){return void 0===e&&(e={}),t},e.prototype.find=function(t){var e;return e="function"==typeof t?s.find(this.models,t):s.find(this.models,function(e){return e.id==t||e.uid==t||t===e})},e.prototype.forEach=function(t,e){for(var n=0,r=this.models.length;r>n;n++)t.call(e||this,this.models[n],n);return this},e.prototype.indexOf=function(t){return this.models.indexOf(t)},e.prototype.toJSON=function(){return this.models.map(function(t){return t.toJSON()})},e.prototype._removeReference=function(t,e){this===t.collection&&delete t.collection,this.stopListening(t)},e.prototype._addReference=function(t,e){t.collection||(t.collection=this),this.listenTo(t,"all",this._onModelEvent)},e.prototype._reset=function(){this._models=[]},e.prototype._onModelEvent=function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),u.callFunc(this.trigger,this,s.slice(arguments)))},e.prototype.destroy=function(){var e=this;this.models.forEach(function(t){"function"==typeof t.destroy&&t.collection==e&&t.destroy()}),t.prototype.destroy.call(this)},e}(i.BaseObject);e.Collection=f},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(32),o=n(6),a=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.extend=function(t,e){return o.inherits(this,t,e)},e}(i.EventEmitter);e.BaseObject=a},function(t,e){function n(){return""+ ++i}function r(t,e,n){void 0===n&&(n=[]);var r=t.length,i=-1,o=n[0],a=n[1],s=n[2],u=n[3];switch(n.length){case 0:for(;++i<r;)t[i].call(e);return;case 1:for(;++i<r;)t[i].call(e,o);return;case 2:for(;++i<r;)t[i].call(e,o,a);return;case 3:for(;++i<r;)t[i].call(e,o,a,s);return;case 4:for(;++i<r;)t[i].call(e,o,a,s,u);return;default:for(;++i<r;)t[i].apply(e,n);return}}var i=0;e.callFunc=r;var o=function(){function t(){}return Object.defineProperty(t.prototype,"listeners",{get:function(){return this._listeners},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===r&&(r=!1);var i=(this._listeners||(this._listeners={}))[t]||(this._listeners[t]=[]);return i.push({name:t,once:r,handler:e.bind(n||this)}),this},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){if(this._listeners=this._listeners||{},null==t)this._listeners={};else if(this._listeners[t]){var n=this._listeners[t];if(null==e)this._listeners[t]=[];else for(var r=0;r<n.length;r++){n[r];n[r].handler==e&&this._listeners[t].splice(r,1)}}},t.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(this._listeners||(this._listeners={}))[e]||(this._listeners[e]=[]).concat(this._listeners.all||[]);t.debugCallback&&t.debugCallback(this.constructor.name,this.name,e,n);var a,s,u,c,l=(o.length,[]);for(c=0;c<o.length;c++)a=o[c],s=n,"all"==a.name&&(s=[e].concat(n),r([a.handler],a.ctx,s)),l.push(a.handler),a.once===!0&&(u=this._listeners[a.name].indexOf(a),this._listeners[a.name].splice(u,1));return this._executeListener(l,void 0,n),r(l,void 0,n),this},t.prototype._executeListener=function(t,e,n){var i=r;this.constructor.executeListenerFunction&&(i=this.constructor.executeListenerFunction),i(t,e,n)},t.prototype.listenTo=function(t,e,r,i,o){void 0===o&&(o=!1);var a,s,u;return a=this._listeningTo||(this._listeningTo={}),s=t.listenId||(t.listenId=n()),a[s]=t,u=o?"once":"on",t[u](e,r,this),this},t.prototype.listenToOnce=function(t,e,n,r){return this.listenTo(t,e,n,r,!0)},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo||{},i=!e&&!n;t&&(r[t.listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(i||!Object.keys(t.listeners).length)&&delete this._listeningTo[o];return this},t.prototype.destroy=function(){this.stopListening(),this.off()},t.executeListenerFunction=function(){},t}();e.EventEmitter=o},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(31),o=n(6),a=n(7),s=function(t){function e(e,n){void 0===e&&(e={}),n=n||{},this._attributes=e,this.uid=o.uniqueId("uid"),this._changed={},this.collection=n.collection,t.call(this)}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.idAttribute in this._attributes?this._attributes[this.idAttribute]:void 0},enumerable:!0,configurable:!0}),e.prototype.set=function(t,e,n){void 0===n&&(n={});var r,i,s,u,c,l,f,p={};if(null==t)return this;"object"==typeof t?(p=t,n=e):p[t]=e,n||(n={}),i=n.unset,u=n.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.extend(Object.create(null),this._attributes),this._changed={}),f=this._attributes,l=this._previousAttributes;for(r in p)e=p[r],o.equal(f[r],e)||s.push(r),o.equal(l[r],e)?delete this._changed[r]:this._changed[r]=e,i?delete f[r]:f[r]=e;if(!u){s.length&&(this._pending=!!n);for(var h=0,d=s.length;d>h;h++)this.trigger("change:"+s[h],this,f[s[h]],n)}if(c)return this;if(!u)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},e.prototype.get=function(t){return this._attributes[t]},e.prototype.unset=function(t,e){this.set(t,void 0,a.extend({},e,{unset:!0}))},e.prototype.has=function(t){return null!=this.get(t)},e.prototype.hasChanged=function(t){return null==t?!!Object.keys(this.changed).length:a.has(this.changed,t)},e.prototype.clear=function(t){var e={};for(var n in this._attributes)e[n]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},Object.defineProperty(e.prototype,"changed",{get:function(){return a.extend({},this._changed)},enumerable:!0,configurable:!0}),e.prototype.changedAttributes=function(t){if(!t)return this.hasChanged()?a.extend(Object.create(null),this.changed):!1;var e,n={},r=this._changing?this._previousAttributes:this._attributes;for(var i in t)o.equal(r[i],e=t[i])||((n||(n={}))[i]=e);return n},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},e.prototype.previousAttributes=function(){return a.extend(Object.create(null),this._previousAttributes)},e.prototype.toJSON=function(){return JSON.parse(JSON.stringify(this._attributes))},e.prototype.clone=function(){return new this.constructor(this._attributes)},e}(i.BaseObject);e.Model=s},function(t,e,n){function r(t,e){void 0===e&&(e=".");var n={};for(var i in t){var o=t[i];if(!o||o.constructor!==Object&&o.constructor!==Array||c.isEmpty(o))n[i]=o;else{var a=r(o);for(var s in a){var u=a[s];n[i+e+s]=u}}}return n}function i(t,e,n,r){void 0===r&&(r=".");for(var i=e?e.split(r):[],o=t,a=0,s=i.length;s>a;a++){if(n&&!c.has(o,i[a]))return!1;if(o=o instanceof l.Model?o.get(i[a]):o[i[a]],null==o&&s-1>a&&(o={}),"undefined"==typeof o)return n?!0:o}return n?!0:o}function o(t,e,n,r){r=r||{};for(var i=r.separator||".",o=e?e.split(i):[],a=t,s=0,u=o.length;u>s&&void 0!==a;s++){var l=o[s];if(s===u-1)r.unset?delete a[l]:a[l]=n;else{if("undefined"==typeof a[l]||!c.isObject(a[l])){if(r.unset)return void delete a[l];var f=o[s+1];a[l]=/^\d+$/.test(f)?[]:{}}a=a[l]}}}function a(t,e){o(t,e,null,{unset:!0})}var s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=n(6),c=n(7),l=n(33),f=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.get=function(t){return i(this._attributes,t)},e.prototype.set=function(t,n,s){var l,f,p,h,d,v,y,g;if(null==t)return this;"object"==typeof t?(f=t,s=n||{}):(f={})[t]=n,s||(s={}),p=s.unset,d=s.silent,h=[],v=this._changing,this._changing=!0,v||(this._previousAttributes=c.extend({},this._attributes),this._changed={}),g=this._attributes,y=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]),f=r(f);for(l in f)n=f[l],u.equal(i(g,l),n)||(h.push(l),this._changed[l]=n),u.equal(i(y,l),n)?a(this.changed,l):o(this.changed,l,n),p?a(g,l):o(g,l,n);if(!d){h.length&&(this._pending=!0);for(var m=e.keyPathSeparator,b={},_=0,w=h.length;w>_;_++){var O=h[_];b.hasOwnProperty(O)&&b[O]||(b[O]=!0,this.trigger("change:"+O,this,i(g,O),s));for(var $=O.split(m),j=$.length-1;j>0;j--){var k=$.slice(0,j).join(m),x=k+m+"*";b.hasOwnProperty(x)&&b[x]||(b[x]=!0,this.trigger("change:"+x,this,i(g,k),s)),b.hasOwnProperty(k)&&b[k]||(b[k]=!0,this.trigger("change:"+k,this,i(g,k),s))}}}if(v)return this;if(!d)for(;this._pending;)this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},e.prototype.clear=function(t){var e={},n=r(this._attributes);for(var i in n)e[i]=void 0;return this.set(e,c.extend({},t,{unset:!0}))},e.prototype.hasChanged=function(t){return null==t?!Object.keys(this.changed).length:void 0!==i(this.changed,t)},e.prototype.changedAttributes=function(t){if(!t)return this.hasChanged()?r(this.changed):!1;var e=this._changing?this._previousAttributes:this._attributes;t=r(t),e=r(e);var n,i=!1;for(var o in t)u.equal(e[o],n=t[o])||((i||(i={}))[o]=n);return i},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?i(this._previousAttributes,t):null},e.prototype.previousAttributes=function(){return c.extend({},this._previousAttributes)},e.keyPathSeparator=".",e}(l.Model);e.NestedModel=f},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}},s=n(28),u=n(4),c=["model","parent","__queue","_onchange","__timer","_listeners"],l=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),o(e,[{key:"$observe",value:function(){var t=this;this.$unobserve(),u.nextTick(function(){t._check(t.__model)}),this.__timer=setInterval(function(){t._check(t.__model)},300)}},{key:"$unobserve",value:function(){this.__timer&&(clearTimeout(this.__timer),this.__timer=null)}},{key:"_check",value:function(t){var e=this.__model.toJSON(),n=[],r=void 0,i=void 0,o=!0,a=!1,s=void 0;try{for(var l,f=Object.keys(this)[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var p=l.value;r=this[p],~c.indexOf(p)||(i={name:p,object:this,type:null==r?"delete":""},r&&!e[p]?i.type="add":r&&!u.equal(r,e[p])&&(i.type="update"),i.oldValue=e[p],n.push(i),delete e[p])}}catch(h){a=!0,s=h}finally{try{!o&&f["return"]&&f["return"]()}finally{if(a)throw s}}for(var p in e)n.push({name:p,object:this,type:"delete",oldValue:e[p]});n.length&&this.__onchange(n)}},{key:"$createChild",value:function(){var t=new e;return t.__parent=this,t}}]),e}(s.Context);e.DirtyObjectObserver=l},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),s=r(a),u=n(23),c=n(38),l=r(c),f=function(){function t(e,n,r){i(this,t),this.container=r,this.controller=n,this.name=e,this.container.registerSingleton(e,n)}return o(t,[{key:"create",value:function(t){var e=this;if(this.container.hasInstance(this.name))return s.Promise.resolve(this.container.get(this.name));var n=this.container.get("$context");return this.container.registerInstance("$context",n.$createChild(),!0),n=this.container.get("$context"),this.resolveTemplate(n,t).then(function(r){e.container.registerInstance("template",r,!0),n.$observe();var i=e.container.get(e.name);return n.$unobserve(),t.el&&(t.el.innerHTML="",t.el.appendChild(r.render())),i})}},{key:"resolveTemplate",value:function(t,e){var n=this.container.get("$templateCreator"),r=void 0;if(e.el){var i=e.el.innerHTML;r=s.Promise.resolve(i)}else{if(!e.template)return s.Promise.reject(new u.StickError("no element or template"));if(e.template instanceof l.vnode.Template){var o=e.template.view(t.__model,{container:this.container});return s.Promise.resolve(o)}r=this.container.get("$templateResolver")(e.template)}return r.then(function(e){return n(e,t.__model)})}},{key:"destroy",value:function(){this.container.clear()}}]),t}();e.ControllerFactory=f},function(t,e,n){var r,i;!function(o,a){r=a,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e,n){function r(t,e,n){for(var r,i="string"==typeof e?e.split("."):e,o=t,a=0,s=i.length-1;s>a;a++)r=i[a],o[r]||(o[r]={}),o=o[r];return o[i[i.length-1]]=n,n}var i;!function(t){function e(e,n){"function"!=typeof n&&(n=o.extendClass(t.attributes.BaseAttribute,n)),t.attributes[e]=n}function n(e,n){"function"!=typeof n&&(n=o.extendClass(t.components.BaseComponent,n)),t.components[e]=n}function r(t,e){u[t]=e}function i(t){o.Debug.enable(t)}function a(e,n){var r=t.vnode,i=t.compiler.compile(e),a=i(r.fragment,r.element,r.text,r.comment,r.dynamic,t.binding);return r.template(a,o.extend({document:document,viewClass:t.View,attributes:new t.Repository(t.attributes),components:new t.Repository(t.components),modifiers:u},n||{}))}t.version="0.2.0",t.attribute=e,t.component=n,t.modifier=r,t.debugging=i,t.compile=a}(i||(i={}));var i;!function(t){var e;!function(t){t.parser=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,e,n,r,i,o){this.message=t,this.expected=e,this.found=n,this.offset=r,this.line=i,this.column=o,this.name="SyntaxError"}function n(t){function n(){return t.substring(O,w)}function r(t){throw a(null,[{type:"other",description:t}],O)}function i(e){function n(e,n,r){var i,o;for(i=n;r>i;i++)o=t.charAt(i),"\n"===o?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return $!==e&&($>e&&($=0,j={line:1,column:1,seenCR:!1}),n(j,$,e),$=e),j}function o(t){k>w||(w>k&&(k=w,x=[]),x.push(t))}function a(n,r,o){function a(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var r,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return r=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+n(e)+'"':"end of input","Expected "+r+" but "+i+" found."}var u=i(o),c=o<t.length?t.charAt(o):null;return null!==r&&a(r),new e(null!==n?n:s(r,c),r,c,o,u.line,u.column)}function s(t){var e,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=t.charCodeAt(e)-32;return n}function u(e){function n(t){return"[object Array]"===Object.prototype.toString.apply(t)?[]:t}for(var r,i,a=_[e],s=0,c=[],l=a.length,f=[],p=[];;){for(;l>s;)switch(a[s]){case 0:p.push(n(b[a[s+1]])),s+=2;break;case 1:p.push(w),s++;break;case 2:p.pop(),s++;break;case 3:w=p.pop(),s++;break;case 4:p.length-=a[s+1],s+=2;break;case 5:p.splice(-2,1),s++;break;case 6:p[p.length-2].push(p.pop()),s++;break;case 7:p.push(p.splice(p.length-a[s+1],a[s+1])),s+=2;break;case 8:p.pop(),p.push(t.substring(p[p.length-1],w)),s++;break;case 9:f.push(l),c.push(s+3+a[s+1]+a[s+2]),p[p.length-1]?(l=s+3+a[s+1],s+=3):(l=s+3+a[s+1]+a[s+2],s+=3+a[s+1]);break;case 10:f.push(l),c.push(s+3+a[s+1]+a[s+2]),p[p.length-1]===y?(l=s+3+a[s+1],s+=3):(l=s+3+a[s+1]+a[s+2],s+=3+a[s+1]);break;case 11:f.push(l),c.push(s+3+a[s+1]+a[s+2]),p[p.length-1]!==y?(l=s+3+a[s+1],s+=3):(l=s+3+a[s+1]+a[s+2],s+=3+a[s+1]);break;case 12:p[p.length-1]!==y?(f.push(l),c.push(s),l=s+2+a[s+1],s+=2):s+=2+a[s+1];break;case 13:f.push(l),c.push(s+3+a[s+1]+a[s+2]),t.length>w?(l=s+3+a[s+1],s+=3):(l=s+3+a[s+1]+a[s+2],s+=3+a[s+1]);break;case 14:f.push(l),c.push(s+4+a[s+2]+a[s+3]),t.substr(w,b[a[s+1]].length)===b[a[s+1]]?(l=s+4+a[s+2],s+=4):(l=s+4+a[s+2]+a[s+3],s+=4+a[s+2]);break;case 15:f.push(l),c.push(s+4+a[s+2]+a[s+3]),t.substr(w,b[a[s+1]].length).toLowerCase()===b[a[s+1]]?(l=s+4+a[s+2],s+=4):(l=s+4+a[s+2]+a[s+3],s+=4+a[s+2]);break;case 16:f.push(l),c.push(s+4+a[s+2]+a[s+3]),b[a[s+1]].test(t.charAt(w))?(l=s+4+a[s+2],s+=4):(l=s+4+a[s+2]+a[s+3],s+=4+a[s+2]);break;case 17:p.push(t.substr(w,a[s+1])),w+=a[s+1],s+=2;break;case 18:p.push(b[a[s+1]]),w+=b[a[s+1]].length,s+=2;break;case 19:p.push(y),0===P&&o(b[a[s+1]]),s+=2;break;case 20:O=p[p.length-1-a[s+1]],s+=2;break;case 21:O=w,s++;break;case 22:for(r=a.slice(s+4,s+4+a[s+3]),i=0;i<a[s+3];i++)r[i]=p[p.length-1-r[i]];p.splice(p.length-a[s+2],a[s+2],b[a[s+1]].apply(null,r)),s+=4+a[s+3];break;case 23:p.push(u(a[s+1])),s+=2;break;case 24:P++,s++;break;case 25:P--,s++;break;default:throw new Error("Invalid opcode: "+a[s]+".")}if(!(f.length>0))break;l=f.pop(),s=c.pop()}return p[0]}function c(t){
return t.replace(/(^\s+)|(\s+$)/,"").replace(/[\r\n]/g,"\\n")}function l(t){return t.replace(/[ \r\n\t]+/g," ")}function f(t){return t=t.filter(function(t){return!/^[\n\t\r]+$/.test(t.value)}),1===t.length&&"string"===t[0].type?t[0]:t}function p(t){function e(t){for(var e,n=t.length;n--&&(e=t[n],"textNode"==e.type&&!/\S/.test(e.value)&&!e.decoded);)t.splice(n,1);return t}return e(e(t.reverse()).reverse())}function h(t){return t.replace(/[\n\r]+/g,"\\n").replace(/'/g,"\\'")}var d,v=arguments.length>1?arguments[1]:{},y={},g={Start:0},m=0,b=[function(t){return t},y,"<!DOCTYPE",{type:"literal",value:"<!DOCTYPE",description:'"<!DOCTYPE"'},[],/^[^>]/,{type:"class",value:"[^>]",description:"[^>]"},">",{type:"literal",value:">",description:'">"'},function(t){return["doctype",t.join("")]},function(t){return p(t)},"<!--",{type:"literal",value:"<!--",description:'"<!--"'},void 0,"-->",{type:"literal",value:"-->",description:'"-->"'},function(t){return t},function(t){return["comment",h(c(t.join("")))]},"<script",{type:"literal",value:"<script",description:'"<script"'},"</script>",{type:"literal",value:"</script>",description:'"</script>"'},function(t,e){return["element","script",t,[["text",h(e.join(""))]]]},function(){return n()},"<",{type:"literal",value:"<",description:'"<"'},"area",{type:"literal",value:"area",description:'"area"'},"base",{type:"literal",value:"base",description:'"base"'},"br",{type:"literal",value:"br",description:'"br"'},"col",{type:"literal",value:"col",description:'"col"'},"command",{type:"literal",value:"command",description:'"command"'},"embed",{type:"literal",value:"embed",description:'"embed"'},"hr",{type:"literal",value:"hr",description:'"hr"'},"img",{type:"literal",value:"img",description:'"img"'},"input",{type:"literal",value:"input",description:'"input"'},"keygen",{type:"literal",value:"keygen",description:'"keygen"'},"link",{type:"literal",value:"link",description:'"link"'},"meta",{type:"literal",value:"meta",description:'"meta"'},"param",{type:"literal",value:"param",description:'"param"'},"source",{type:"literal",value:"source",description:'"source"'},"track",{type:"literal",value:"track",description:'"track"'},"wbr",{type:"literal",value:"wbr",description:'"wbr"'},null,"/>",{type:"literal",value:"/>",description:'"/>"'},function(t,e,n){return n&&t!=n.name&&r("</"+t+">"),["element",t,e,[]]},"</",{type:"literal",value:"</",description:'"</"'},function(t){return{name:t}},function(t,e,n){return t.name!=n.name&&r("</"+t.name+">"),["element",t.name,t.attributes,e]},function(t){return["text",h(l(t.join("")))]},"{{",{type:"literal",value:"{{",description:'"{{"'},function(t){return t},function(t){return["element",t.name,t.attributes,[]]},function(t,e){return{name:t,attributes:e}},function(t){return t},/^[a-zA-Z0-9:_.\-]/,{type:"class",value:"[a-zA-Z0-9:_.\\-]",description:"[a-zA-Z0-9:_.\\-]"},function(t){return t.join("")},"=",{type:"literal",value:"=",description:'"="'},function(t,e){return["attribute",t,e]},function(t,e){return["property",t,e]},function(t){return["attribute",t,[]]},'"',{type:"literal",value:'"',description:'"\\""'},/^[^"]/,{type:"class",value:'[^"]',description:'[^"]'},function(){return["string",n()]},function(t){return f(t)},"'",{type:"literal",value:"'",description:'"\'"'},/^[^']/,{type:"class",value:"[^']",description:"[^']"},"}}",{type:"literal",value:"}}",description:'"}}"'},function(t){return["script",t]},function(t){return["block",t[1]]},"?",{type:"literal",value:"?",description:'"?"'},":",{type:"literal",value:":",description:'":"'},function(t,e,n){return["condition",t,e,n]},"(",{type:"literal",value:"(",description:'"("'},")",{type:"literal",value:")",description:'")"'},function(t){return t},"()",{type:"literal",value:"()",description:'"()"'},function(){return[]},",",{type:"literal",value:",",description:'","'},function(t,e){return[t].concat(e.map(function(t){return t[1]}))},function(t,e){return["assign",t,e]},"&&",{type:"literal",value:"&&",description:'"&&"'},"||",{type:"literal",value:"||",description:'"||"'},"===",{type:"literal",value:"===",description:'"==="'},"==",{type:"literal",value:"==",description:'"=="'},"!==",{type:"literal",value:"!==",description:'"!=="'},"!=",{type:"literal",value:"!=",description:'"!="'},">==",{type:"literal",value:">==",description:'">=="'},">=",{type:"literal",value:">=",description:'">="'},"<==",{type:"literal",value:"<==",description:'"<=="'},"<=",{type:"literal",value:"<=",description:'"<="'},"+",{type:"literal",value:"+",description:'"+"'},"-",{type:"literal",value:"-",description:'"-"'},"%",{type:"literal",value:"%",description:'"%"'},"*",{type:"literal",value:"*",description:'"*"'},"/",{type:"literal",value:"/",description:'"/"'},function(t,e,n){return["operator",e,t,n]},function(t){return t},function(t,e){for(var n=0,r=e.length;r>n;n++)t=["modifier",e[n].name,[t].concat(e[n].parameters)];return t},"|",{type:"literal",value:"|",description:'"|"'},function(t,e){return{name:t,parameters:e||[]}},function(t){return t},"!",{type:"literal",value:"!",description:'"!"'},function(t,e){return["not",e]},function(t,e){return["negative",e]},/^[0-9]/,{type:"class",value:"[0-9]",description:"[0-9]"},function(t){return["literal",parseFloat(n())]},".",{type:"literal",value:".",description:'"."'},function(t){return["group",t]},function(t){return t},"true",{type:"literal",value:"true",description:'"true"'},"false",{type:"literal",value:"false",description:'"false"'},function(t){return["literal","true"===t]},"undefined",{type:"literal",value:"undefined",description:'"undefined"'},function(){return["literal",void 0]},"NaN",{type:"literal",value:"NaN",description:'"NaN"'},function(){return["literal",NaN]},"Infinity",{type:"literal",value:"Infinity",description:'"Infinity"'},function(){return["literal",1/0]},"null",{type:"literal",value:"null",description:'"null"'},"NULL",{type:"literal",value:"NULL",description:'"NULL"'},function(){return["literal",null]},function(t,e){return["call",t,e]},"^",{type:"literal",value:"^",description:'"^"'},"~>",{type:"literal",value:"~>",description:'"~>"'},"<~>",{type:"literal",value:"<~>",description:'"<~>"'},"~",{type:"literal",value:"~",description:'"~"'},"<~",{type:"literal",value:"<~",description:'"<~"'},function(t,e,n){return["reference",[e].concat(n),t]},function(t){return t},"[",{type:"literal",value:"[",description:'"["'},"]",{type:"literal",value:"]",description:'"]"'},function(t){return t},/^[a-zA-Z_$0-9]/,{type:"class",value:"[a-zA-Z_$0-9]",description:"[a-zA-Z_$0-9]"},function(t){return n()},"{",{type:"literal",value:"{",description:'"{"'},"}",{type:"literal",value:"}",description:'"}"'},function(t){return["hash",t]},function(t){for(var e={},n=0,r=t.length;r>n;n++)e[t[n].key]=t[n].value;return e},function(t,e){return[t].concat(e.length?e[0][1]:[])},function(t,e){return{key:t,value:e}},function(t){return t[1]},function(t){return t},{type:"other",description:"string"},function(t){return["string",t.join("")]},"\\",{type:"literal",value:"\\",description:'"\\\\"'},function(){return n()},'\\"',{type:"literal",value:'\\"',description:'"\\\\\\""'},"\\'",{type:"literal",value:"\\'",description:'"\\\\\'"'},{type:"any",description:"any character"},/^[a-zA-Z]/,{type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},function(t){return t.join("")},/^[ \n\r\t]/,{type:"class",value:"[ \\n\\r\\t]",description:"[ \\n\\r\\t]"}],_=[s("7!"),s("!7#+' 4!6 !! %"),s('!."""2"3#+q$7Z+g% $0%""1!3&+,$,)&0%""1!3&""" !+B%7Z+8%.\'""2\'3(+(%4%6)%!"%$%# !$$# !$## !$"# !"# !'),s('! $7\'*; "7%*5 "7)*/ "7$*) "7**# "75,A&7\'*; "7%*5 "7)*/ "7$*) "7**# "75"+\' 4!6*!! %'),s('!7Z+Ç$.+""2+3,+·% $!!8..""2.3/9*$$"" -"# !+2$7X+(%4"60"! %$"# !"# !+T$,Q&!!8..""2.3/9*$$"" -"# !+2$7X+(%4"60"! %$"# !"# !""" !+B%..""2.3/+2%7Z+(%4%61%!"%$%# !$$# !$## !$"# !"# !*# "7"'),s('!7Z+$.2""2233+v%7/+l%.\'""2\'3(+\\% $7&+&$,#&7&""" !+C%.4""2435+3%7Z+)%4\'66\'"$"%$\'# !$&# !$%# !$$# !$## !$"# !"# !'),s('!!8.4""24359*$$"" -"# !+1$7X+\'%4"67" %$"# !"# !'),s('!.8""2839+Ī$.:""2:3;*Ñ ".<""2<3=*Å ".>""2>3?*¹ ".@""2@3A*­ ".B""2B3C*¡ ".D""2D3E* ".F""2F3G* ".H""2H3I*} ".J""2J3K*q ".L""2L3M*e ".N""2N3O*Y ".P""2P3Q*M ".R""2R3S*A ".T""2T3U*5 ".V""2V3W*) ".X""2X3Y+f%7/+\\%.\'""2\'3(*) ".[""2[3\\*# " Z+:%7(*# " Z+*%4%6]%##" %$%# !$$# !$## !$"# !"# !'),s('!7Z+Č$.^""2^3_+ü%.:""2:3;*Ñ ".<""2<3=*Å ".>""2>3?*¹ ".@""2@3A*­ ".B""2B3C*¡ ".D""2D3E* ".F""2F3G* ".H""2H3I*} ".J""2J3K*q ".L""2L3M*e ".N""2N3O*Y ".P""2P3Q*M ".R""2R3S*A ".T""2T3U*5 ".V""2V3W*) ".X""2X3Y+8%.\'""2\'3(+(%4$6`$!!%$$# !$## !$"# !"# !'),s('!7,+>$7#+4%70+*%4#6a##"! %$## !$"# !"# !*# "7-'),s('! $7++&$,#&7+""" !+\' 4!6b!! %'),s('!!8.8""2839*) ".c""2c3d9*$$"" -"# !+1$7X+\'%4"67" %$"# !"# !'),s('!7Z+\\$.8""2839+L%7.+B%.\'""2\'3(+2%7Z+(%4%6e%!"%$%# !$$# !$## !$"# !"# !'),s('!7Z+\\$.8""2839+L%7.+B%.[""2[3\\+2%7Z+(%4%6f%!"%$%# !$$# !$## !$"# !"# !'),s('!71+3$7/+)%4"6g""! %$"# !"# !'),s('!7Z+D$ $72,#&72"+2%7Z+(%4#6h#!!%$## !$"# !"# !'),s('!.^""2^3_+B$71+8%.\'""2\'3(+(%4#6`#!!%$## !$"# !"# !'),s('!7Z+M$ $0i""1!3j+,$,)&0i""1!3j""" !+(%4"6k"! %$"# !"# !'),s('!71+W$7Z+M%.l""2l3m+=%7Z+3%73+)%4%6n%"$ %$%# !$$# !$## !$"# !"# !*t "!71+W$7Z+M%.l""2l3m+=%7Z+3%74+)%4%6o%"$ %$%# !$$# !$## !$"# !"# !*/ "!71+\' 4!6p!! %'),s('!.q""2q3r+ņ$ $74* "! $!!8.c""2c3d9*$$"" -"# !+3$0s""1!3t+#%\'"%$"# !"# !+U$,R&!!8.c""2c3d9*$$"" -"# !+3$0s""1!3t+#%\'"%$"# !"# !""" !+& 4!6u! %,¡&74* "! $!!8.c""2c3d9*$$"" -"# !+3$0s""1!3t+#%\'"%$"# !"# !+U$,R&!!8.c""2c3d9*$$"" -"# !+3$0s""1!3t+#%\'"%$"# !"# !""" !+& 4!6u! %"+8%.q""2q3r+(%4#6v#!!%$## !$"# !"# !*ŗ "!.w""2w3x+ņ$ $74* "! $!!8.c""2c3d9*$$"" -"# !+3$0y""1!3z+#%\'"%$"# !"# !+U$,R&!!8.c""2c3d9*$$"" -"# !+3$0y""1!3z+#%\'"%$"# !"# !""" !+& 4!6u! %,¡&74* "! $!!8.c""2c3d9*$$"" -"# !+3$0y""1!3z+#%\'"%$"# !"# !+U$,R&!!8.c""2c3d9*$$"" -"# !+3$0y""1!3z+#%\'"%$"# !"# !""" !+& 4!6u! %"+8%.w""2w3x+(%4#6v#!!%$## !$"# !"# !'),s('!.c""2c3d+V$7Z+L%76+B%7Z+8%.{""2{3|+(%4%6}%!"%$%# !$$# !$## !$"# !"# !'),s("!74+' 4!6~!! %"),s('!79+^$.""23+N%76+D%.""23+4%76+*%4%6%#$" %$%# !$$# !$## !$"# !"# !*# "79'),s('!.""23+B$78+8%.""23+(%4#6#!!%$## !$"# !"# !*4 "!.""23+& 4!6! %'),s('!76+q$ $!.""23+-$76+#%\'"%$"# !"# !,>&!.""23+-$76+#%\'"%$"# !"# !"+)%4"6""! %$"# !"# !'),s('!7>+C$.l""2l3m+3%79+)%4#6#"" %$## !$"# !"# !*# "7:'),s('!7;+Ą$.""23*Ý ".""23*Ñ ".""23*Å ".""23*¹ ".""23*­ ".""23*¡ ".""23* ".""23* ".\'""2\'3(*} ". ""2 3¡*q ".¢""2¢3£*e ".8""2839*Y ".¤""2¤3¥*M ".¦""2¦3§*A ".¨""2¨3©*5 ".ª""2ª3«*) ".¬""2¬3­+4%7:+*%4#6®##"! %$## !$"# !"# !*# "7;'),s('!7Z+<$7<+2%7Z+(%4#6¯#!!%$## !$"# !"# !'),s('!7?+;$ $7=,#&7="+)%4"6°""! %$"# !"# !*) "7J*# "7>'),s('!.±""2±3²+W$7Z+M%7O+C%77*# " Z+3%7Z+)%4%6³%""!%$%# !$$# !$## !$"# !"# !'),s('!7Z+<$7@+2%7Z+(%4#6´#!!%$## !$"# !"# !'),s('!.µ""2µ3¶+3$7?+)%4"6·""! %$"# !"# !*b "!.µ""2µ3¶*) ".¦""2¦3§+3$7?+)%4"6¸""! %$"# !"# !*/ "7D*) "7J*# "7>'),s('7C*5 "7P*/ "7A*) "7U*# "7K'),s('!!.¦""2¦3§*# " Z+i$! $0¹""1!3º+,$,)&0¹""1!3º""" !+3$7B*# " Z+#%\'"%$"# !"# !*# "7B+#%\'"%$"# !"# !+\' 4!6»!! %'),s('!.¼""2¼3½+H$ $0¹""1!3º+,$,)&0¹""1!3º""" !+#%\'"%$"# !"# !'),s('!.""23+B$76+8%.""23+(%4#6¾#!!%$## !$"# !"# !'),s('!7E*5 "7F*/ "7I*) "7G*# "7H+\' 4!6¿!! %'),s('!.À""2À3Á*) ".Â""2Â3Ã+\' 4!6Ä!! %'),s('!.Å""2Å3Æ+& 4!6Ç! %'),s('!.È""2È3É+& 4!6Ê! %'),s('!.Ë""2Ë3Ì+& 4!6Í! %'),s('!.Î""2Î3Ï*) ".Ð""2Ð3Ñ+& 4!6Ò! %'),s('!7>+3$77+)%4"6Ó""! %$"# !"# !'),s('!.Ô""2Ô3Õ*M ".Ö""2Ö3×*A ".Ø""2Ø3Ù*5 ".Ú""2Ú3Û*) ".Ü""2Ü3Ý*# " Z+Z$7Z+P%7O+F% $7L,#&7L"+4%7Z+*%4%6Þ%#$"!%$%# !$$# !$## !$"# !"# !'),s('7M*# "7N'),s('!.¼""2¼3½+2$7O+(%4"6ß"! %$"# !"# !'),s('!.à""2à3á+B$76+8%.â""2â3ã+(%4#6ä#!!%$## !$"# !"# !'),s('! $0å""1!3æ+,$,)&0å""1!3æ""" !+\' 4!6ç!! %'),s('!.è""2è3é+\\$7Z+R%7Q*# " Z+B%7Z+8%.ê""2ê3ë+(%4%6ì%!"%$%# !$$# !$## !$"# !"# !'),s("!7R+' 4!6í!! %"),s('!7S+q$ $!.""23+-$7R+#%\'"%$"# !"# !,>&!.""23+-$7R+#%\'"%$"# !"# !"+)%4"6î""! %$"# !"# !'),s('!7Z+]$7T+S%7Z+I%.""23+9%76*# " Z+)%4%6ï%"# %$%# !$$# !$## !$"# !"# !'),s("!7U+' 4!6ð!! %*/ \"!7O+' 4!6ñ!! %"),s('8!.q""2q3r+J$ $7V,#&7V"+8%.q""2q3r+(%4#6ó#!!%$## !$"# !"# !*[ "!.w""2w3x+J$ $7W,#&7W"+8%.w""2w3x+(%4#6ó#!!%$## !$"# !"# !9*" 3ò'),s('!!8.q""2q3r*) ".ô""2ô3õ9*$$"" -"# !+1$7X+\'%4"6ö" %$"# !"# !*) ".÷""2÷3ø'),s('!!8.w""2w3x*) ".ô""2ô3õ9*$$"" -"# !+1$7X+\'%4"6ö" %$"# !"# !*) ".ù""2ù3ú'),s('-""1!3û'),s('! $0ü""1!3ý+,$,)&0ü""1!3ý""" !+\' 4!6þ!! %'),s(' $0ÿ""1!3Ā,)&0ÿ""1!3Ā"')],w=0,O=0,$=0,j={line:1,column:1,seenCR:!1},k=0,x=[],P=0;if("startRule"in v){if(!(v.startRule in g))throw new Error("Can't start parsing from rule \""+v.startRule+'".');m=g[v.startRule]}if(d=u(m),d!==y&&w===t.length)return d;throw d!==y&&w<t.length&&o({type:"end",description:"end of input"}),a(null,x,k)}return t(e,Error),{SyntaxError:e,parse:n}}()}(e=t.compiler||(t.compiler={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(){function e(t,e){this.document=t,this.node=e}return e.prototype.createMarker=function(){return new n(this.document,t.getNodePath(this.node))},e.prototype.appendChild=function(t){this.node.appendChild(t)},e.prototype.render=function(){return this.node},e.prototype.remove=function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},e.prototype.removeChildren=function(){for(;this.node.childNodes.length;)this.node.removeChild(this.node.childNodes[0])},e.prototype.clone=function(){return new e(this.document,this.node.cloneNode(!0))},e}();t.NodeSection=e;var n=function(){function n(t,e){this.document=t,this.path=e}return n.prototype.createSection=function(t){return new e(this.document,this.findNode(t))},n.prototype.findNode=function(e){return t.getNodeByPath(e,this.path)},n}();t.NodeSectionMarker=n}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(){function e(t,e,n){if(this.document=t,this.start=e||t.createTextNode(""),this.end=n||t.createTextNode(""),!this.start.parentNode){var r=t.createDocumentFragment();r.appendChild(this.start),r.appendChild(this.end)}}return e.prototype.appendChild=function(t){this.end.parentNode.insertBefore(t,this.end)},e.prototype.render=function(){return this.start.parentNode},e.prototype.remove=function(){var t=this.removeChildNodes();return t.insertBefore(this.start,t.childNodes[0]),t.appendChild(this.end),this},e.prototype.removeChildNodes=function(){for(var t=this.document.createDocumentFragment(),e=this.start,n=e.nextSibling,r=this.end;n!==r;)t.appendChild(n),n=e.nextSibling;return t},e.prototype.createMarker=function(){return new n(this.document,t.getNodePath(this.start),t.getNodePath(this.end))},e.prototype.clone=function(){var t;if(11===this.start.parentNode.nodeType)t=this.start.parentNode.cloneNode(!0);else{t=this.document.createDocumentFragment();for(var n=this._getChildNodes(),r=n.length,i=0;r>i;i++)t.appendChild(n[i].cloneNode(!0))}var o=t.childNodes[0],a=t.childNodes[t.childNodes.length-1];return new e(this.document,o,a)},e.prototype._getChildNodes=function(){for(var t=this.start,e=this.end.nextSibling,n=[];t!==e;)n.push(t),t=t.nextSibling;return n},e}();t.FragmentSection=e;var n=function(){function e(t,e,n){this.document=t,this.startPath=e,this.endPath=n}return e.prototype.createSection=function(e){return new t.FragmentSection(this.document,t.getNodeByPath(e,this.startPath),t.getNodeByPath(e,this.endPath))},e}();t.FragmentSectionMarker=n}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(e,n){var r;if(n.nodeType==t.NodeType.Fragment){var i=new t.FragmentSection(e);i.appendChild(n),r=i}else r=new t.NodeSection(e,n);return r}t.section=e}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(){function t(t,e,n,r){this.section=t,this.template=e,this.context=n,this.bindings=[]}return t.prototype.update=function(){for(var t=0,e=this.bindings;t<e.length;t++){var n=e[t];n.update()}},t.prototype.addListener=function(t,e,n,r){return void 0===r&&(r=!1),t.addEventListener(e,n,r),n},t.prototype.removeListener=function(t,e,n,r){void 0===r&&(r=!1),t.removeEventListener(e,n,r)},t.prototype.render=function(){return this.section.render()},t.prototype.remove=function(){for(var t=0,e=this.bindings;t<e.length;t++){var n=e[t];n.destroy()}return this.section.remove()},t}();t.View=e}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(t,e){return new n(t,e)}var n=function(){function e(e,n){this._renderers=[],this.vnode=e;var r=e.render(n,this._renderers);this.section=t.section(n.document,r),this.options=n}return e.prototype.view=function(e,n){for(var r=this.section.clone(),i=this.options.viewClass||t.View,o=new i(r,this,e,n),a=0,s=this._renderers;a<s.length;a++){var u=s[a];u.generate(r.node||r.start.parentNode,o)}return o},e}();t.Template=n,t.template=e}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(t,e){for(var n=t,r=0,i=e.length;i>r;r++)n=n.childNodes[e[r]];return n}function n(t){for(var e=[],n=t.parentNode,r=t;n;)for(e.unshift(Array.prototype.indexOf.call(n.childNodes,r)),r=n,n=n.parentNode;n&&n.nodeType>12;)n=n.parentNode;return e}!function(t){t[t.Element=1]="Element",t[t.Fragment=11]="Fragment",t[t.Comment=8]="Comment",t[t.Dynamic=-200]="Dynamic",t[t.Text=-201]="Text"}(t.NodeType||(t.NodeType={}));t.NodeType;t.getNodeByPath=e,t.getNodePath=n}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(t){var e=new n;return e.transpile(t)}t.transpile=e;var n=function(){function e(){for(var t in this)"_"===t.charAt(0)&&(this[t]=this[t].bind(this));this.transpile=this.transpile.bind(this)}return e.prototype.transpile=function(e){return this._root(t.parser.parse(e))},e.prototype._root=function(t){var e="(function(fragment, element, text, comment, dynamic, createBindingClass) {",n="fragment(["+this._children(t)+"])";return e+="'use strict';return "+n,e+="})"},e.prototype._expression=function(t){return this["_"+t[0]](t)},e.prototype._element=function(t){var e={},n=[];return t[2].forEach(function(r,i){var o=r[1],a=r[2],s=o.split(".");s.length>1?(e[s[0]]||(t=e[s[0]]=["element",s[0],[],[["element",t[1],n,t[3]]]]),e[s[0]][2].push([r[0],s[1],a])):n.push(r)}),this._element2(t)},e.prototype._doctype=function(t){return"text('<!DOCTYPE "+t[1]+">')"},e.prototype._children=function(t){for(t=t.concat();t.length;){var e=t[t.length-1];if("text"!==e[0])break;if(e[1]=e[1].replace(/[\s\r\n\t]+$/,""),!/^[\s\r\n\t]*$/.test(e[1]))break;t.pop()}return t.map(this._expression).join(", ")},e.prototype._element2=function(t){var e="element('"+t[1]+"'",n=[];e+=", {";e+=t[2].map(function(t){var e=t[1],r=t[2];return!r.length||1===r.length&&"string"===r[0][0]?"'"+e+"':"+(r.length?this._expression(r[0]):"true"):void n.push(t)}.bind(this)).filter(function(t){return!!t}).join(","),e+="}";var r=this._children(t[3]);if(r.length&&(e+=", "+r),e+=")",n.length){var i="",o="";n.forEach(function(t){var e=t[0];if(i+="this","block"===e)i+=".ref.nodeValue = "+this._expression(t[1]);else if("attribute"===e){var n=t[2].map(function(t){return"("+this._expression(t)+")"}.bind(this)).join("+");i+=".setAttribute('"+t[1]+"', "+n+");"}else"property"===e&&(i+=".setProperty('"+t[1]+"', "+this._expression(t[2])+");")}.bind(this)),i.length&&(i="function(context) {"+i+"}"),o.length&&(o="function() { var self = this; "+o+"}"),(i.length||o.length)&&(e="dynamic("+e+",",e+="createBindingClass("+(o.length?o:"void 0")+", "+(i?i:"void 0")+")",e+=")")}return e},e.prototype.__addReference=function(t){var e="_"+ ++this._refCounter;return this._refs[e]=t,e},e.prototype._block=function(t){var e="dynamic(text(), createBindingClass(void 0, function(context) {";return e+="this.ref.nodeValue = "+this._expression(t[1])+";",e+"}))"},e.prototype._text=function(t){return"text('"+t[1]+"')"},e.prototype._comment=function(t){return"comment('"+t[1]+"')"},e.prototype._hash=function(t){var e=t[1],n=[];for(var r in e)n.push("'"+r+"':"+this._expression(e[r]));return"{"+n.join(",")+"}"},e.prototype._script=function(t){return this._expression(t[1])},e.prototype._referenceKeyPath=function(t){var e=[],n=!1;return t.forEach(function(t){"string"!=typeof t?(n=!0,e.push(this._expression(t))):e.push(t)}.bind(this)),e=n?"["+e.map(function(e,n){return"string"==typeof t[n]?"'"+e+"'":e}).join(",")+"]":"'"+e.join(".")+"'"},e.prototype._reference=function(t){var e=this._referenceKeyPath(t[1]);if(t[2]){var n=!!~t[2].indexOf("<~"),r=!!~t[2].indexOf("~>");return"this.view.ref("+e+", "+n+", "+r+")"}return"this.view.get("+e+")"},e.prototype._string=function(t){return"'"+t[1]+"'"},e.prototype._operator=function(t){return this._expression(t[2])+t[1]+this._expression(t[3])},e.prototype._condition=function(t){return this._expression(t[1])+"?"+this._expression(t[2])+":"+this._expression(t[3])},e.prototype._literal=function(t){return t[1]},e.prototype._not=function(t){return"!"+this._expression(t[1])},e.prototype._negative=function(t){return"-"+this._expression(t[1])},e.prototype._call=function(t){var e="this.view.call("+this._referenceKeyPath(t[1][1])+", [";return e+=t[2].map(this._expression).join(","),e+"])"},e.prototype._modifier=function(t){return"this.options.modifiers."+t[1]+"("+t[2].map(this._expression).join(",")+")"},e.prototype._assign=function(t){return'this.view.assign("'+t[1][1]+'", function () { return '+this._expression(t[2])+";})"},e.prototype._group=function(t){return"("+this._expression(t[1])+")"},e.prototype.__findExpressions=function(t,e){var n=[];return this.__traverse(e,function(e){e[0]===t&&n.push(e)}),n},e.prototype.__traverse=function(t,e){e(t),t.forEach(function(t){t&&"object"==typeof t&&this.__traverse(t,e)}.bind(this))},e}()}(e=t.compiler||(t.compiler={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(e,n){var r=t.transpile(e);return new Function("return "+r)()}t.compile=e}(e=t.compiler||(t.compiler={}))}(i||(i={}));var o;!function(t){function e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i,o=0;o<e.length;o++)if(r=e[o],r===Object(r))for(i in r)t[i]=r[i];return t}function n(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Array.prototype.slice.apply(t,e)}function r(t,n,r){var i;i=n&&Object.prototype.hasOwnProperty.call(n,"constructor")?n.constructor:function(){return t.apply(this,arguments)},e(i,t,r);var o=function(){this.constructor=i};return o.prototype=t.prototype,i.prototype=new o,n&&e(i.prototype,n),i.__super__=t.prototype,i}function i(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if("function"!=typeof e)throw new Error("method not at function");if(null!=a)return a.call.apply(a,[e,n].concat(r));r=r||[];var o=function(){},s=function(){var i=this instanceof o?this:n;return e.apply(i,r.concat(t.slice(arguments)))};return o.prototype=this.prototype,s.prototype=new o,s}function o(t){return s.create(t)}t.extend=e,t.slice=n,t.extendClass=r;var a=Function.prototype.bind;t.bind=i;var s=function(){function t(t){this.enabled=!1,this.namespace=t}return t.enable=function(t,e){for(var n in this.loggers)e&&n===e?this.loggers[n].enabled=t:e||(this.loggers[n].enabled=t)},t.create=function(e){var n;return this.loggers[e]?n=this.loggers[e].debug:(n=new t(e),this.loggers[e]=n),i(n.debug,n)},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(this.enabled){e[0]=this._coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var r=0;e[0]=e[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;r++;var o=t.formatters[i];if("function"==typeof o){var a=e[r];n=o.call(self,a),e.splice(r,1),r--}return n}),e=this._formatArgs(e),this._log.apply(this,e)}},t.prototype._log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.prototype._coerce=function(t){return t instanceof Error?t.stack||t.message:t},t.prototype._formatArgs=function(t){return t[0]="[templ:"+this.namespace+"] "+t[0],t},t.loggers={},t.formatters={j:function(t){return JSON.stringify(t)}},t}();t.Debug=s,t.debug=o}(o||(o={}));var i;!function(t){function e(t,e){return o.extendClass(n,{initialize:t||function(){},_update:e||function(){}})}var n=function(){function t(t,e){this._attrBindings={},this.ref=t,this.view=e,this.options=e.template.options,this._attributeClasses=this.options.attributes}return t.prototype.setAttribute=function(t,e){this.setAsRegisteredAttribute(t,e)||void 0!=e&&this.ref.setAttribute(t,e)},t.prototype.setProperty=function(t,e){this.setAsRegisteredAttribute(t,e)||(this.ref.nodeType?this.ref[t]=e:this.ref.setAttribute(t,e))},t.prototype.setAsRegisteredAttribute=function(t,e){if(this._attrBindings[t])this._attrBindings[t].value=e;else{var n=this._attributeClasses.get(t);if(!n)return!1;this._attrBindings[t]=new n(this.ref,t,e,this.view)}return!0},t.prototype.update=function(t){this._update();for(var e in this._attrBindings)this._attrBindings[e].update()},t.prototype.destroy=function(){for(var t in this._attrBindings)this._attrBindings[t].destroy()},t}();t.Binding=n,t.binding=e}(i||(i={}));var i,a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},s=o.debug("view");!function(t){var e=function(){function t(t,e,n,r){this.gettable=n,this.settable=r,this.view=t,this.path=e}return t.prototype.value=function(t){return 0===arguments.length?this.gettable?this.view.get(this.path):void 0:void(this.settable&&this.view.set(this.path,t))},t.prototype.toString=function(){return this.view.get(this.path)||""},t}();t.Reference=e;var n=function(){function t(t,e,n){this.view=t,this.path=e,this.value=n,this.assign=o.bind(this.assign,this),this.toString=o.bind(this.toString,this)}return t.prototype.assign=function(t){this.view.set(this.path,this.value.call(this))},t.prototype.toString=function(){var t=this.value.call(this);return t?String(t):""},t}();t.Assignment=n;var i=function(t){function i(e,n,r,i){void 0===i&&(i={}),t.call(this,e,n,r,i),this.context=r,this._callers={},this._getters={},i.parent&&(this.parent=i.parent),i.delegator&&(this._delegator=i.delegator)}return a(i,t),Object.defineProperty(i.prototype,"root",{get:function(){if(null==this.parent)return this;for(var t=this,e=t;e;)e=e.parent,e&&(t=e);return t},enumerable:!0,configurable:!0}),i.prototype.getDelegator=function(){if(this._delegator)return this._delegator;for(var t=this.parent;void 0!=t;){if(t._delegator)return t._delegator;t=t.parent}return null},i.prototype.addListener=function(e,n,r,i){void 0===i&&(i=!1);var o=this.getDelegator();return o?o.addListener(e,n,r,i):"function"==typeof r?t.prototype.addListener.call(this,e,n,r,i):void 0},i.prototype.removeListener=function(e,n,r,i){void 0===i&&(i=!1);var o=null;o?o.removeListener(e,n,r,i):"function"==typeof r&&t.prototype.removeListener.call(this,e,n,r,i)},i.prototype.get=function(t){if(!this.context)return void 0;var e,n="string"!=typeof t?t.join("."):t;try{var r;(r=this._getters[n])||(r=this._getters[n]=new Function("return this."+n)),e=r.call(this.context)}catch(i){e=void 0}return e=void 0!=e?e:this.parent?this.parent.get(t):void 0,s('get value "%s": %s',t,e),e},i.prototype.set=function(t,e){if(s("set value %s on context %j",e,this.context),!this.context)return void 0;"string"==typeof t&&(t=t.split("."));r(this.context,t,e);this.update()},i.prototype.render=function(){this.update();var e=t.prototype.render.call(this);return e},i.prototype.ref=function(t,n,r){return s("reference %s, gettable: %o, settabble: %o",t,n,r),new e(this,t,n,r)},i.prototype.assign=function(t,e){return s("assignment %s %s",t,e),new n(this,t,e)},i.prototype.call=function(t,e){var n,r;if(s('call keypath "%s", args: "%o"',t,e),"string"!=typeof t&&(t=t.join(".")),!(n=this._callers[t])){var i=["this"].concat(t.split("."));i.pop(),n=this._callers[t]=new Function("params","return this."+t+".apply("+i.join(".")+", params);")}try{r=n.call(this.context,e)}catch(o){console.error("could not call",o)}return void 0!=r?r:this.parent?this.parent.call(t,e):void 0},i}(t.vnode.View);t.View=i}(i||(i={}));var i;!function(t){var e=function(){function t(t){this.values=t||{}}return t.prototype.set=function(t,e){this.values[t]=e},t.prototype.get=function(t){return this.values[t]},t.prototype.has=function(t){return!!this.get(t)},t.prototype["delete"]=function(t){delete this.values[t]},t}();t.Repository=e}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(){function e(e){this.nodeType=t.NodeType.Comment,this.nodeValue=e}return e.prototype.render=function(t){return t.document.createComment(this.nodeValue)},e}();t.Comment=e,t.comment=function(t){return new e(t)}}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){var n=function(){function e(e,n){this.nodeType=t.NodeType.Dynamic,this.vnode=e,this.bindingClass=n,this.vnode.parentNode=this}return e.prototype.render=function(t,e){return t.components.has(this.vnode.tagName)?this._renderComponent(t,e):this._renderElement(t,e)},e.prototype._renderElement=function(t,e){var n=this.vnode.render(t,e);return e.push(new i(n,this.bindingClass,t)),n},e.prototype._renderComponent=function(t,e){var n=[],i=this.vnode.render(t,n);return e.push(new r(n[0],this.bindingClass,t)),i},e}();t.Dynamic=n,t.dynamic=function(t,e){return new n(t,e)};var r=function(){function t(t,e,n){this.renderer=t,this.bindingClass=e,this.options=n}return t.prototype.generate=function(t,e){this.renderer.generate(t,e);var n=e.bindings[e.bindings.length-1];e.bindings.splice(e.bindings.indexOf(n),0,new this.bindingClass(n,e))},t}(),i=function(){function t(t,e,n){this.ref=t,this.bindingClass=e,this.options=n}return t.prototype.generate=function(t,n){this._refPath||(this._refPath=e.getNodePath(this.ref)),n.bindings.push(new this.bindingClass(e.getNodeByPath(t,this._refPath),n))},t}()}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(t,e,n,r){for(var i in n){var o=e.attributes.get(i),a=new o(t,i,n[i],r);a.update&&r.bindings.push(a)}}var n=function(){function e(e,n,r){this.nodeType=t.NodeType.Element,this.tagName=String(e).toLocaleLowerCase(),this.childNodes=r,this.attributes=n||{};for(var i=0;i<r.length;i++)r[i].parentNode=this}return e.prototype.render=function(t,e){var n=t.components;return n.has(this.tagName)?this._renderComponent(n.get(this.tagName),t,e):this._renderElement(t,e)},e.prototype.setAttributes=function(t,e){"string"==typeof t?this.attributes[t]=e:o.extend(this.attributes,t)},e.prototype._renderComponent=function(e,n,i){var o=new t.FragmentSection(n.document);return i.push(new r(e,o,this,this._splitAttributes(n),n)),o.render()},e.prototype._renderElement=function(e,n){var r=e.document.createElement(this.tagName),o=this._splitAttributes(e);for(var a in o.staticAttributes)r.setAttribute(a,o.staticAttributes[a]);for(var s=0,u=this.childNodes;s<u.length;s++){var c=u[s];r.appendChild(c.render(e,n))}return Object.keys(o.dynamicAttributes).length&&n.push(new i(new t.NodeSection(e.document,r),e,o.dynamicAttributes)),r},e.prototype._splitAttributes=function(t){var e={},n={};if(t.attributes)for(var r in this.attributes){var i=t.attributes.get(r);!i||i.test&&!i.test(this,r,this.attributes[r])?n[r]=this.attributes[r]:e[r]=this.attributes[r]}else n=this.attributes;return{dynamicAttributes:e,staticAttributes:n}},e}();t.Element=n,t.element=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return new n(t,e,r)};var r=function(){function t(t,e,n,r,i){this.section=e,this.componentClass=t,this.element=n,this.options=i,this.attributes=r.staticAttributes,this.dynamicAttributes=r.dynamicAttributes}return t.prototype.generate=function(t,n){this._marker||(this._marker=this.section.createMarker());var r=new this.componentClass(this._marker.createSection(t),this.element,this.attributes,n);Object.keys(this.dynamicAttributes).length&&e(r,this.options,this.dynamicAttributes,n),r.update&&n.bindings.push(r)},t}(),i=function(){function t(t,e,n){this.section=t,this.options=e,this.attributes=n}return t.prototype.generate=function(t,n){this._marker||(this._marker=this.section.createMarker()),e(this._marker.findNode(t),this.options,this.attributes,n);
},t}()}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(){function e(e){this.nodeType=t.NodeType.Fragment,this.childNodes=e;for(var n=0;n<e.length;n++)e[n].parentNode=this}return e.prototype.render=function(t,e){for(var n=t.document.createDocumentFragment(),r=0,i=this.childNodes.length;i>r;r++)n.appendChild(this.childNodes[r].render(t,e));return n},e}();t.Fragment=e,t.fragment=function(t){return new e(t)}}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(){function e(e){this.nodeType=t.NodeType.Text,this.nodeValue=e}return e.prototype.render=function(t){return t.document.createTextNode(this.nodeValue)},e}();t.Text=e,t.text=function(t){return new e(t)}}(e=t.vnode||(t.vnode={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(){function t(t,e,n,r){this.ref=t,this.key=e,this.value=n,this.view=r,this.initialize()}return t.prototype.initialize=function(){},t.prototype.update=function(){},t.prototype.destroy=function(){},t.test=function(){},t}();t.BaseAttribute=e}(e=t.attributes||(t.attributes={}))}(i||(i={}));var i;!function(t){var e;!function(e){var n=["change","keyup","input"],r=function(e){function r(){e.apply(this,arguments)}return a(r,e),r.prototype.initialize=function(){this._onInput=o.bind(this._onInput,this,null);for(var t=0;t<n.length;t++){var e=n[t];this.ref.addEventListener(e,this._onInput)}},r.prototype.update=function(){var e=this.model=this.value;if(e){if(!(e&&e instanceof t.Reference))throw new Error("input value must be a reference. Make sure you have <~> defined");e.gettable&&this._elementValue(this._parseValue(e.value()))}},r.prototype._parseValue=function(t){return null==t||""===t?void 0:t},r.prototype._onInput=function(t){clearInterval(this._autocompleteCheckInterval),!t||t.keyCode&&~[27].indexOf(t.keyCode)||t.stopPropagation();var e=this._parseValue(this._elementValue());this.model&&String(this.model.value())!=String(e)&&this.model.value(e)},r.prototype._elementValue=function(t){var e=this.ref,n=/checkbox/.test(e.type),r=/radio/.test(e.type),i=n||r,o=Object.prototype.hasOwnProperty.call(e,"value"),a=o||/input|textarea|checkbox/.test(e.nodeName.toLowerCase());return arguments.length?(null==t?t="":clearInterval(this._autocompleteCheckInterval),void(i?r?String(t)===String(e.value)&&(e.checked=!0):e.checked=t:String(t)!==this._elementValue()&&(a?e.value=t:e.innerHTML=t))):n?Boolean(e.checked):a?e.value||"":e.innerHTML||""},r}(e.BaseAttribute);e.ValueAttribute=r}(e=t.attributes||(t.attributes={}))}(i||(i={}));var i;!function(t){var e;!function(e){var n=o.debug("attributes:event"),r=function(e){function r(){e.apply(this,arguments)}return a(r,e),r.prototype.initialize=function(){this._onEvent=o.bind(this._onEvent,this),this.event||(this.event=this.key.match(/on(.+)/)[1].toLowerCase()),n("added event listener %s: %o",this.event,this.value),this.view.addListener(this.ref,this.event,this._onEvent)},r.prototype._onEvent=function(e){var r;if(r=this.value instanceof t.Assignment?this.value.assign:this.value,"function"!=typeof r)throw new Error("[event] value is not a function");n("fired event: %s",this.event),r(e)},r.prototype.destroy=function(){n("removed event listener %s: %o",this.event,this.value),this.view.removeListener(this.ref,this.event,this._onEvent)},r}(e.BaseAttribute);e.EventAttribute=r;var i=function(t){function e(e,n,r,i){this.event="keydown",this.keyCodes=[],t.call(this,e,n,r,i)}return a(e,t),e.prototype._onEvent=function(e){~this.keyCodes.indexOf(e.keyCode)&&t.prototype._onEvent.call(this,e)},e}(r);e.KeyCodeAttribute=i;var s=function(t){function e(){t.apply(this,arguments)}return a(e,t),e}(r);e.ClickAttribute=s;var u=function(t){function e(){t.apply(this,arguments),this.keyCodes=[13]}return a(e,t),e}(i);e.OnEnterAttribute=u;var c=function(t){function e(){t.apply(this,arguments),this.KeyCodes=[27]}return a(e,t),e}(i);e.OnEscapeAttribute=c}(e=t.attributes||(t.attributes={}))}(i||(i={}));var i;!function(t){var e;!function(t){t.value=t.ValueAttribute,t.onclick=t.ClickAttribute,t.onenter=t.OnEnterAttribute,t.onescape=t.OnEscapeAttribute,t.checked=t.ValueAttribute,t.style=t.StyleAttribute}(e=t.attributes||(t.attributes={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return a(e,t),e.prototype.initialize=function(){this._currentStyles={}},e.prototype.update=function(){var t=this.value;if("string"==typeof t)return void this.ref.setAttribute("style",t);var e={};for(var n in t){var r=t[n];r!==this._currentStyles[n]&&(e[n]=this._currentStyles[n]=r||"")}for(var i in e)this.ref.style[i]=e[i]},e}(t.BaseAttribute);t.StyleAttribute=e}(e=t.attributes||(t.attributes={}))}(i||(i={}));var i;!function(t){var e;!function(e){var n=function(){function e(e,n,r,i){this.section=e,this.vnode=n,this.attributes=r,this.view=i,this.document=i.template.options.document,n.childNodes&&(this.childTemplate=t.vnode.template(t.vnode.fragment(n.childNodes),i.template.options));for(var o in r)this.setAttribute(o,r[o]);this.initialize()}return e.prototype.initialize=function(){},e.prototype.setAttribute=function(t,e){this.attributes[t]=e},e.prototype.removeAttribute=function(t){this.attributes[t]=void 0},e.prototype.destroy=function(){},e}();e.BaseComponent=n}(e=t.components||(t.components={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(t,e){if(t)if(t.forEach)t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}var n=function(t){function n(){t.apply(this,arguments),this._children=[]}return a(n,t),n.prototype.update=function(){var t,n=this.as,r=this.each,i=this.key||"key",o=0,a=this,s=this.view;e(r,function(e,r){var u;n?(t={},t[i]=r,t[n]=e):t=e,o>=a._children.length?(u=a.childTemplate.view(t,{parent:s}),a._children.push(u),a.section.appendChild(u.render(t))):(u=a._children[o],u.context=t,u.update()),o++}),this._children.splice(o).forEach(function(t){t.remove()})},n.prototype.setAttribute=function(t,e){this[t]=e},n}(t.BaseComponent);t.Repeat=n}(e=t.components||(t.components={}))}(i||(i={}));var i;!function(t){var e;!function(t){t.repeat=t.Repeat}(e=t.components||(t.components={}))}(i||(i={}));var u;return function(t){function e(t){return String(t).toUpperCase()}function n(t){return String(t).toLowerCase()}function r(t){var e;return e=String(t),e.substr(0,1).toUpperCase()+e.substr(1)}function i(t,e,n){return JSON.stringify.apply(JSON,arguments)}function o(t){return o(t)}t.uppercase=e,t.lowercase=n,t.titlecase=r,t.json=i,t.isNaN=o,t.round=Math.round}(u||(u={})),i})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e,n){var r=void 0,i=void 0;try{r=d.callFunc(t,e,n)}catch(o){i=o}return[r,i]}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}};e.tryCatch=a;var c=n(13),l=n(23),f=n(24),p=n(3),h=n(4),d=r(h),v=function(t){function e(t){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.__instances=new Map}return o(e,t),s(e,[{key:"hasInstance",value:function(t){return this.__instances.has(t)}},{key:"get",value:function(t,e){var n;if(null===t||void 0===t)throw new c.DIBadKeyError;if(t===c.DIContainer)return this;if(t instanceof c.Resolver)return t.get(this);if(n=this.entries.get(t),void 0!==n)return n[0](this);if(this.parent&&this.parent.hasHandler(t))return this.parent.get(t,e);if(n=f.Repository.any(t),null!=n)return this.register(n),this.entries.get(t)[0](this);if("string"==typeof t)throw new l.StickDependencyError("no component registered for key: "+t);return this.autoRegister(t,e),n=this.entries.get(t),n[0](this)}},{key:"registerSingleton",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];return this.registerHandler(t,function(i){if(n.__instances.has(t))return n.__instances.get(t);var o=n.invoke(e,null,r);return n.__instances.set(t,o),o})}},{key:"registerInstance",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];u(Object.getPrototypeOf(e.prototype),"registerInstance",this).call(this,t,n),r&&this.__instances.set(t,n)}},{key:"clear",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.__instances.keys()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.destroy(o)}}catch(a){e=!0,n=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},{key:"destroy",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null==t){var n=!0,r=!1,i=void 0;try{for(var o,a=this.__instances.keys()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.destroy(s,e)}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return void delete this.constructionInfo}var c=this.__instances.get(t);c?(e?e(c):"function"==typeof c.$destroy&&c.$destroy(),this.__instances["delete"](t),c=void 0):console.log("could not find key ",t)}},{key:"register",value:function(t){switch(t.type){case p.DependencyType.Controller:this.registerTransient(t.name,t.handler);break;case p.DependencyType.Service:this.registerSingleton(t.name,t.handler);break;case p.DependencyType.Factory:"function"==typeof t.handler?(p.setActivator(t.handler,c.FactoryActivator.instance),this.registerSingleton(t.name,t.handler)):this.registerInstance(t.name,t.handler)}}},{key:"createChild",value:function(){var t=new e;return t.parent=this,t}}]),e}(c.DIContainer);e.Container=v},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}},u=n(38),c=r(u),l=n(29),f=function(t){function e(t,n,r,o){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,r,o),o.delegator&&(this.delegator=o.delegator),o.container&&(this._container=o.container)}return o(e,t),a(e,[{key:"_onModelChange",value:function(){}},{key:"set",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(!r){if(!(this.context instanceof l.Model))return s(Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n);if(Array.isArray(t)||(t=t.split(/[,.]/)),"this"===t[0])return t.shift(),void(0===t.length?(this.root.context=n,this.root.update()):(this.root.set(t,n),this.root.update()));"root"===t[0]?(t.shift(),this.root.set(t,n)):this.context.set(t.join("."),n)}this.update()}},{key:"get",value:function(t){Array.isArray(t)||(t=t.split(/[,.]/));var n=void 0,r=this.context;return"@"===t[0].substr(0,1)&&(t[0]=t[0].substr(1),t.unshift("this")),"this"===t[0]?(t.shift(),0===t.length&&(n=this.context)):"root"===t[0]&&(t.shift(),r=this.context.root),t=t.join("."),n||(n=this.context instanceof l.Model?r.get(t):s(Object.getPrototypeOf(e.prototype),"get",this).call(this,t)),n}},{key:"remove",value:function(){s(Object.getPrototypeOf(e.prototype),"remove",this).call(this),delete this._container,delete this.delegator,delete this._context}},{key:"$destroy",value:function(){this.remove()}},{key:"context",set:function(t){this._context&&this._context instanceof l.Model,null!=t&&t instanceof l.Model&&t.on("change",function(){var e=t.changed;for(var n in e)this.set(n,e[n])},this),this._context=t},get:function(){return this._context}}]),e}(c.View);e.TemplateView=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(42),a=n(4),s=function(t,e,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(t,e,n,r);switch(arguments.length){case 2:return t.reduceRight(function(t,e){return e&&e(t)||t},e);case 3:return t.reduceRight(function(t,r){return void(r&&r(e,n))},void 0);case 4:return t.reduceRight(function(t,r){return r&&r(e,n,t)||t},r)}},u=function(){function t(){r(this,t)}return i(t,[{key:"get",value:function(t){return a.request.get(t)}},{key:"post",value:function(t){return a.request.post(t)}},{key:"put",value:function(t){return a.request.put(t)}},{key:"del",value:function(t){return a.request.del(t)}}]),t}();e.HttpService=u,e.HttpService=u=s([o.service("$http")],u)},function(t,e,n){"use strict";function r(t){return function(e){var n=t||u.camelcase(e.name);l.Repository.add(s.DependencyType.Module,n,e)}}function i(t,e){return function(e){var n=t||u.camelcase(e.name);l.Repository.add(s.DependencyType.Service,n,e)}}function o(t){return function(e){l.Repository.add(s.DependencyType.Factory,t,e)}}function a(t){return function(e){c.Metadata.define(s.DIServiceConfig,t,e,void 0)}}Object.defineProperty(e,"__esModule",{value:!0}),e.module=r,e.service=i,e.factory=o,e.config=a;var s=n(3),u=n(4),c=n(13),l=n(24)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(44),s=n(4),u=r(s),c=n(42),l=n(13),f=function(t,e,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(t,e,n,r);switch(arguments.length){case 2:return t.reduceRight(function(t,e){return e&&e(t)||t},e);case 3:return t.reduceRight(function(t,r){return void(r&&r(e,n))},void 0);case 4:return t.reduceRight(function(t,r){return r&&r(e,n,t)||t},r)}},p=function(){function t(e,n){i(this,t),this.router=new a.Router({execute:u.bind(this.__execute,this)}),this.context=e,this.container=n,this.router.history.start()}return o(t,[{key:"route",value:function(t,e){return"function"==typeof e?this.router.route(t,e):u.isObject(e)&&this.router.route(t,this.__handleController(e)),this}},{key:"__execute",value:function(t,e){this.context.$call(t,this.context,e)}},{key:"__handleController",value:function(t){if(!this.container.hasHandler(t.controller))throw new Error("[router] controller");return function(){}}}]),t}();e.RouterService=p,e.RouterService=p=f([l.inject("$context","$container"),c.service("$router")],p)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}},s=n(45),u=n(32),c=n(4),l=/\((.*?)\)/g,f=/(\(\?)?:\w+/g,p=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g,d=function(t){return t?"object"==typeof t&&"[object RegExp]"===toString.call(t):!1},v=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.history=new s.HistoryApi,this.options=t}return i(e,t),o(e,[{key:"route",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(d(t)||(t=this._routeToRegExp(t)),"function"==typeof e&&(r=e,e=""),!r)throw new Error("router: no handler");return this.history.route(t,function(i){var o=n._extractParameters(t,i);n.execute(r,o),n.trigger.apply(n,["route:"+e].concat(o)),n.trigger("route",e,o)}),this}},{key:"execute",value:function(t,e){t&&(this.options.execute?this.options.execute(t,e):c.callFunc(t,this,e))}},{key:"navigate",value:function(t,e){return this.history.navigate(t,e),this}},{key:"_routeToRegExp",value:function(t){return t=t.replace(h,"\\$&").replace(l,"(?:$1)?").replace(f,function(t,e){return e?t:"([^/?]+)"}).replace(p,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")}},{key:"_extractParameters",value:function(t,e){var n=t.exec(e).slice(1);return n.map(function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}}]),e}(u.EventEmitter);e.Router=v},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}},u=n(32),c=n(4),l=r(c),f=/^[#\/]|\s+$/g,p=/^\/+|\/+$/g,h=/\/$/,d=/[#].*$/,v=function g(){o(this,g)};e.Handler=v;var y=function(t){function e(){o(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.handlers=[],this._started=!1,"undefined"!=typeof window&&(this.location=window.location,this.history=window.history),this.checkUrl=l.bind(this.checkUrl,this)}return i(e,t),a(e,[{key:"atRoot",value:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root}},{key:"getHash",value:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""}},{key:"getFragment",value:function(t){arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(null==t)if(this._wantsPushState||!this._wantsHashChange){t=decodeURI(this.location.pathname+this.location.search);var e=this.root.replace(h,"");t.indexOf(e)||(t=t.slice(e.length))}else t=this.getHash();return t.replace(f,"")}},{key:"start",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this.started)throw new Error("Backbone.history has already been started");this._started=!0,this.options=l.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState;var e=this.getFragment();this.root=("/"+this.root+"/").replace(p,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=e;var n=this.location;return this._wantsHashChange&&this._wantsPushState&&this.atRoot()&&n.hash&&(this.fragment=this.getHash().replace(f,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl()}},{key:"stop",value:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),this._started=!1}},{key:"route",value:function(t,e){this.handlers.unshift({route:t,callback:e})}},{key:"checkUrl",value:function(){var t=this.getFragment();return t===this.fragment?!1:void this.loadUrl()}},{key:"loadUrl",value:function(t){return t=this.fragment=this.getFragment(t),this.handlers.some(function(e){return e.route.test(t)?(e.callback(t),!0):void 0})}},{key:"navigate",value:function(t,e){if(!this.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(d,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._wantsPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace)}return e.trigger?this.loadUrl(t):void 0}}},{key:"_updateHash",value:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}},{key:"started",get:function(){return this._started}}]),e}(u.EventEmitter);e.HistoryApi=y},function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=n(47),s=n(40);i(e,r(s,i)),o.component("controller",a.ControllerComponent)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;t=c,e=o,n=a,r=!0}},s=n(38),u=n(37),c=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),o(e,[{key:"initialize",value:function(){var t=this;this.container=this.view._container,this.attributes.name&&(this.name=this.attributes.name,this.as=this.attributes.as||this.name);var e=this.view._container.get(this.name);if(!(e instanceof u.ControllerFactory))throw new Error(this.name+" is not a controller");var n=this.childTemplate;this.attributes.template&&(n=this.attributes.template),e.create({template:n}).then(function(n){var r=e.container.get("template");t.section.appendChild(r.render())})}},{key:"destroy",value:function(){a(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.subview&&(this.subview.remove(),delete this.subview)}}]),e}(s.components.BaseComponent);e.ControllerComponent=c}])});