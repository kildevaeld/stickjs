!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.stick=e():t.stick=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}n(1),n(84);var i=n(6),o=n(17);e.utils=i,e.decorators=o,r(n(76)),r(n(67)),e.ready=i.domReady(),r(n(1));var s=n(84);e.template=s,r(n(84))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(2)),r(n(79)),r(n(81)),r(n(82)),r(n(83))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(t,e,n,r){var i,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},a=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},u=n(3),c=n(6),l=n(17),f=n(63),h=n(65),p=n(76),d=n(18);p.decorator("route",function(){return function(t){if(!d.isDependencyType(t,d.DependencyType.Controller))throw new Error("[route] target not a controller")}});var y=function g(){r(this,g),this.execute=null,this.pushState=!1};e.RouterOptions=y;var v=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,t),n.execute=n.execute||c.bind(this.__execute,this),this.router=new u.Router(n),this.container=e,this.router.history.start()}return i(t,[{key:"setTarget",value:function(t){"string"==typeof t&&(t=document.querySelector(t)),this.target=t}},{key:"swapElements",value:function(t,e){return this.swap?void this.swap(t,e):(t.innerHTML="",void t.appendChild(e))}},{key:"else",value:function(t){"function"!=typeof t&&(t=this.__handleController(t)),this.router.history.on("route:unmatched",t)}},{key:"route",value:function(t,e){return"function"==typeof e?this.router.route(t,e):c.isObject(e)&&this.router.route(t,this.__handleController(e)),this}},{key:"reload",value:function(){var t=this;setTimeout(function(){t.router.history.loadUrl()||t.router.history.trigger("route:unmatched")})}},{key:"navigate",value:function(t,e){this.router.navigate(t,e)}},{key:"__execute",value:function(t,e,n){this.container.hasHandler("$route")&&this.container.unregister("$route"),this.container.registerInstance("$route",{fragment:e,parameters:n}),c.callFunc(t,this,n)}},{key:"__handleController",value:function(t){var e=this;if(!this.container.hasHandler(t.controller,!0,!0))throw new Error("[router] controller");return function(){return a(e,void 0,void 0,regeneratorRuntime.mark(function n(){var e,r,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=void 0,e="string"==typeof t.target?document.querySelector(t.target):t.target&&t.target instanceof Element?t.target:"string"==typeof this.target?document.querySelector(this.target):this.target,null!=e){n.next=4;break}throw new Error("[router] target not defined");case 4:return n.next=6,this.container.get(t.controller);case 6:if(r=n.sent,null!=r&&(r instanceof f.ControllerFactory||r instanceof h.ModuleFactory)){n.next=9;break}throw new Error(t.controller+" not a controller");case 9:return n.next=11,r.create({template:t.template,parent:this.container});case 11:return i=n.sent,null!=this._currentController&&this._currentController.destroy(),this._currentController=r,n.next=16,r.container.get("template");case 16:o=n.sent,this.swapElements(e,o.section.render());case 18:case"end":return n.stop()}},n,this)}))}}},{key:"$destroy",value:function(){this.container.hasHandler("$route")&&this.container.unregister("$route"),this._currentController&&(this._currentController.destroy(),delete this._currentController)}},{key:"target",get:function(){return this._target},set:function(t){this._target=t}}]),t}();v=s([l.config(y),l.inject("$container","$routerProvider"),l.service("$router")],v),e.RouterService=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function m(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:m(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},c=n(4),l=n(5),f=n(6),h=/\((.*?)\)/g,p=/(\(\?)?:\w+/g,d=/\*\w+/g,y=/[\-{}\[\]+?.,\\\^$|#\s]/g,v=function(t){return!!t&&("object"===("undefined"==typeof t?"undefined":u(t))&&"[object RegExp]"===toString.call(t))},g=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.history=new c.HistoryApi(t),n.options=t,n}return o(e,t),s(e,[{key:"route",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(v(t)||(t=this._routeToRegExp(t)),"function"==typeof e&&(r=e,e=""),!r)throw new Error("router: no handler");return this.history.route(t,function(i){var o=n._extractParameters(t,i);n.execute(r,i,o),n.trigger.apply(n,["route:"+e].concat(o)),n.trigger("route",e,o)}),this}},{key:"execute",value:function(t,e,n){t&&(this.options.execute?this.options.execute(t,e,n):f.callFunc(t,this,n))}},{key:"navigate",value:function(t,e){return this.history.navigate(t,e),this}},{key:"_routeToRegExp",value:function(t){return t=t.replace(y,"\\$&").replace(h,"(?:$1)?").replace(p,function(t,e){return e?t:"([^/?]+)"}).replace(d,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")}},{key:"_extractParameters",value:function(t,e){var n=t.exec(e).slice(1);return n.map(function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}},{key:"$destroy",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.history.off()}}]),e}(l.EventEmitter);e.Router=g},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),u=n(6),c=/^[#\/]|\s+$/g,l=/^\/+|\/+$/g,f=/\/$/,h=/[#].*$/,p=function y(){o(this,y)};e.Handler=p;var d=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handlers=[],n._started=!1,"undefined"!=typeof window&&(n.location=window.location,n.history=window.history),n.checkUrl=u.bind(n.checkUrl,n),n.options=t||{},n}return i(e,t),s(e,[{key:"atRoot",value:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root}},{key:"getHash",value:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""}},{key:"getFragment",value:function(t){!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(null==t)if(this._wantsPushState||!this._wantsHashChange){t=decodeURI(this.location.pathname+this.location.search);var e=this.root.replace(f,"");t.indexOf(e)||(t=t.slice(e.length))}else t=this.getHash();return t.replace(c,"")}},{key:"start",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this.started)throw new Error("Router.history has already been started");this._started=!0,this.options=u.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState;var e=this.getFragment();this.root=("/"+this.root+"/").replace(l,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=e;var n=this.location;if(this._wantsHashChange&&this._wantsPushState&&this.atRoot()&&n.hash&&(this.fragment=this.getHash().replace(c,""),this.history.replaceState({},document.title,this.root+this.fragment)),!this.options.silent)return this.loadUrl()}},{key:"stop",value:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),this._started=!1}},{key:"route",value:function(t,e){this.handlers.unshift({route:t,callback:e})}},{key:"checkUrl",value:function(){var t=this.getFragment();return t!==this.fragment&&void(this.loadUrl()||this.trigger("route:unmatched"))}},{key:"loadUrl",value:function(t){return t=this.fragment=this.getFragment(t),this.handlers.some(function(e){return!!e.route.test(t)&&(e.callback(t),!0)})}},{key:"navigate",value:function(t,e){if(!this.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(h,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._wantsPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace)}return e.trigger?this.loadUrl(t):void 0}}},{key:"_updateHash",value:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}},{key:"started",get:function(){return this._started}}]),e}(a.EventEmitter);e.HistoryApi=d},function(t,e){"use strict";function n(){return""+ ++s}function r(t,e){void 0===e&&(e=[]);var n=t.length,r=-1,i=e[0],o=e[1],s=e[2],a=e[3];switch(e.length){case 0:for(;++r<n;)t[r].handler.call(t[r].ctx);return;case 1:for(;++r<n;)t[r].handler.call(t[r].ctx,i);return;case 2:for(;++r<n;)t[r].handler.call(t[r].ctx,i,o);return;case 3:for(;++r<n;)t[r].handler.call(t[r].ctx,i,o,s);return;case 4:for(;++r<n;)t[r].handler.call(t[r].ctx,i,o,s,a);return;default:for(;++r<n;)t[r].handler.apply(t[r].ctx,e);return}}function i(t){return"function"==typeof t}function o(t){return t instanceof a||i(t.on)&&i(t.off)&&i(t.trigger)}var s=0;e.callFunc=r,e.isFunction=i,e.isEventEmitter=o;var a=function(){function t(){}return Object.defineProperty(t.prototype,"listeners",{get:function(){return this._listeners},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===r&&(r=!1);var i=(this._listeners||(this._listeners={}))[t]||(this._listeners[t]=[]);return i.push({name:t,once:r,handler:e,ctx:n||this}),this},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){if(this._listeners=this._listeners||{},null==t)this._listeners={};else if(this._listeners[t]){var n=this._listeners[t];if(null==e)this._listeners[t]=[];else for(var r=0;r<n.length;r++){n[r];n[r].handler==e&&this._listeners[t].splice(r,1)}}},t.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this._listeners=this._listeners||{};var o=(this._listeners[e]||[]).concat(this._listeners.all||[]);t.debugCallback&&t.debugCallback(this.constructor.name,this.name,e,n,o);for(var s,a,u,c=(o.length,[]),l=0,f=o.length;l<f;l++)s=o[l],a=n,"all"==s.name?(a=[e].concat(n),r([s],a)):c.push(s),s.once===!0&&(u=this._listeners[s.name].indexOf(s),this._listeners[s.name].splice(u,1));return c.length&&this._executeListener(c,n),this},t.prototype._executeListener=function(t,e){var n=r;this.constructor.executeListenerFunction&&(n=this.constructor.executeListenerFunction),n(t,e)},t.prototype.listenTo=function(t,e,r,i,o){void 0===o&&(o=!1);var s,a,u;return s=this._listeningTo||(this._listeningTo={}),a=t.listenId||(t.listenId=n()),s[a]=t,u=o?"once":"on",t[u](e,r,this),this},t.prototype.listenToOnce=function(t,e,n,r){return this.listenTo(t,e,n,r,!0)},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t.listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),!i&&Object.keys(t.listeners).length||delete this._listeningTo[o];return this},t.prototype.destroy=function(){this.stopListening(),this.off()},t}();e.EventEmitter=a},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(7)),r(n(9)),r(n(11)),r(n(8)),r(n(10)),r(n(12)),r(n(16))},function(t,e,n){"use strict";function r(t){return Array.isArray(t)}function i(t){return t.filter(function(e,n){for(n+=1;n<t.length;n+=1)if(h.equal(e,t[n]))return!1;return!0})}function o(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}function s(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function a(t,e,n){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r]))return t[r];return null}function u(t,e,n){return t.filter(function(t,r){return e.call(n,t,r)})}function c(t,e,n){return p.call(t,e,n)}function l(t){return t.reduce(function(t,e){return t.concat(Array.isArray(e)?l(e):e)},[])}function f(t,e,n){var r="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}).map(function(t){return t.value})}var h=n(8),p=Array.prototype.slice;e.isArray=r,e.unique=i,e.any=o,e.indexOf=s,e.find=a,e.filter=u,e.slice=c,e.flatten=l,e.sortBy=f},function(t,e,n){"use strict";function r(){var t;if(window.hasOwnProperty("XMLHttpRequest"))return new XMLHttpRequest;try{return new ActiveXObject("msxml2.xmlhttp.6.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp.3.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp")}catch(e){t=e}return t}function i(t){return void 0===t&&(t=""),t+ ++v}function o(t,e,n){Array.isArray(n)||(n=[n]),n.forEach(function(n){"function"==typeof e[n]&&(t[n]=s(e[n],e))})}function s(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("function"!=typeof t)throw new Error("method not at function");if(null!=g)return g.call.apply(g,[t,e].concat(n));n=n||[];var i=function(){},o=function(){var r=this instanceof i?this:e;return a(t,r,n.concat(d.slice(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}function a(t,e,n){switch(void 0===n&&(n=[]),n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}}function u(t,e){return h(t,e,[],[])}function c(t,e,n){var r=y.camelcase("on-"+e.replace(":","-"));t[r]&&"function"==typeof t[r]&&a(t[r],t,n),"function"==typeof t.trigger&&(n=[e].concat(n),a(t.trigger,t,n))}function l(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(p.isObject(i)&&i[t])return i[t]}return null}function f(t,e,n){var r;r=e&&p.has(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},p.extend(r,t,n);var i=function(){this.constructor=r};return i.prototype=t.prototype,r.prototype=new i,e&&p.extend(r.prototype,e),r.__super__=t.prototype,r}function h(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var i=toString.call(t);if(i!=toString.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!("function"==typeof s&&s instanceof s&&"function"==typeof a&&a instanceof a))return!1;n.push(t),r.push(e);var u=0,c=!0;if("[object Array]"===i){if(u=t.length,c=u===e.length)for(;u--&&(c=h(t[u],e[u],n,r)););}else{for(var l in t)if(p.has(t,l)&&(u++,!(c=p.has(e,l)&&h(t[l],e[l],n,r))))break;if(c){for(l in e)if(p.has(e,l)&&!u--)break;c=!u}}return n.pop(),r.pop(),c}var p=n(9),d=n(7),y=n(10),v=0,g=Function.prototype.bind;e.ajax=r,e.uniqueId=i,e.proxy=o,e.bind=s,e.callFunc=a,e.equal=u,e.triggerMethodOn=c,e.getOption=l,e.inherits=f,e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}()},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e=".");var n={};for(var i in t){var s=t[i];if(!s||s.constructor!==Object&&s.constructor!==Array||o(s))n[i]=s;else{var a=r(s);for(var u in a){var c=a[u];n[i+e+u]=c}}}return n}function i(t){return t===Object(t)}function o(t){return 0===Object.keys(t).length}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!i(t))return t;for(var r,o,s=0,a=e;s<a.length;s++)if(r=a[s],i(r))for(o in r)u(r,o)&&(t[o]=r[o]);return t}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),i=0,o=e.length;i<o;i++){var s=e[i];if(void 0!==s&&null!==s){s=Object(s);for(var a=Object.keys(Object(s)),u=0,c=a.length;u<c;u++){var l=a[u],f=Object.getOwnPropertyDescriptor(s,l);void 0!==f&&f.enumerable&&(r[l]=s[l])}}}return r}function u(t,e){return v.call(t,e)}function c(t,e){for(var n,r={},i=0,o=e;i<o.length;i++)n=o[i],u(t,n)&&(r[n]=t[n]);return r}function l(t,e){var n={};for(var r in t)~e.indexOf(r)||(n[r]=t[r]);return n}function f(t,e,n,r){var i=t[e];return"function"==typeof i?y.callFunc(i,n,r||[]):i}function h(t){var e=[];for(var n in t)u(t,n)&&e.push(t[n]);return e}function p(t,e,n){for(var r,i,o=[],s=0,a=t.length;s<a;s++)r=t[s],i=function(t){return n(t,r)},i&&o.push(r);return o}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[e.length-1],i=e.length,o=y.equal;"function"==typeof r&&(o=r,i--);for(var s=0;s<i;s++){var a=e[s];if(t=p(t,a,o),0===t.length)break}return t}var y=n(8),v=Object.prototype.hasOwnProperty;e.objToPaths=r,e.isObject=i,e.isEmpty=o,e.extend=s,e.assign=a,e.has=u,e.pick=c,e.omit=l,e.result=f,e.values=h,e.intersection=d},function(t,e){"use strict";function n(t){return"string"==typeof t}function r(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function i(t,e){var n=t.substring(0,Math.min(e,t.length));return n+(n.length==t.length?"":"...")}function o(t,e){void 0===e&&(e=!1);var n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";var r=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do t/=n,++i;while(Math.abs(t)>=n&&i<r.length-1);return t.toFixed(1)+" "+r[i]}e.isString=n,e.camelcase=r,e.truncate=i,e.humanFileSize=o},function(t,e,n){(function(t){"use strict";function r(t){return t&&"function"==typeof t.then}function i(t){return t?r(t)?t:"function"==typeof t?o.call(this,t):Array.isArray(t)?s.call(this,t):p.isObject(t)?a.call(this,t):e.Promise.resolve(t):t}function o(t){var n=this;return new e.Promise(function(e,r){t.call(n,function(t,n){return t?r(t):(arguments.length>2&&(n=d.slice(arguments,1)),void e(n))})})}function s(t){return e.Promise.all(t.map(i,this))}function a(t){function n(t,e){o[e]=void 0,a.push(t.then(function(t){o[e]=t}))}for(var o=new t.constructor,s=Object.keys(t),a=[],u=0;u<s.length;u++){var c=s[u],l=i.call(this,t[c]);l&&r(l)?n(l,c):o[c]=t[c]}return e.Promise.all(a).then(function(){return o})}function u(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o={};return o.promise=new e.Promise(function(t,e){o.resolve=t,o.reject=e,o.done=function(n,r){return n?e(n):void t(r)}}),o}function c(t,e,n){t.then(function(t){e.call(n,null,t)})["catch"](function(t){e.call(n,t)})}function l(t){var e=u();return null==t?y.nextTick(e.resolve):setTimeout(e.resolve,t),e.promise}function f(t,e,n,r){return void 0===r&&(r=!1),h(t,e,n,r).then(function(){})}function h(t,n,i,o){return void 0===o&&(o=!1),new e.Promise(function(e,s){function a(h,p){if(h&&!o)return s(h);if(h&&l.push(h),u===c)return l.length?s(d.flatten(l)):e(f);var y=n.call(i,t[u++]);r(y)?y.then(function(t){f.push(t),a(null,t)},a):a(y instanceof Error?y:null)}var u=0,c=t.length,l=[],f=[];a(null)})}var p=n(9),d=n(7),y=n(8);e.Promise="undefined"==typeof window?t.Promise:window.Promise,e.isPromise=r,e.toPromise=i,e.thunkToPromise=o,e.arrayToPromise=s,e.objectToPromise=a,e.deferred=u,e.callback=c,e.delay=l,e.eachAsync=f,e.mapAsync=h}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(13)),r(n(15))},function(t,e,n){(function(t){"use strict";function n(){return a}function r(){return s===o.Safari}function i(){return s===o.Chrome}!function(t){t[t.Chrome=0]="Chrome",t[t.Explorer=1]="Explorer",t[t.Firefox=2]="Firefox",t[t.Safari=3]="Safari",t[t.Opera=4]="Opera",t[t.Unknown=5]="Unknown"}(e.Browser||(e.Browser={}));var o=e.Browser,s=function(){var t=navigator.userAgent;if(~t.indexOf("MSIE"))return o.Explorer;var e=!!~t.toLowerCase().indexOf("op"),n=!!~t.indexOf("Chrome"),r=!!~t.indexOf("Safari");return n&&r?o.Safari:n&&e?o.Opera:n?o.Chrome:o.Unknown}(),a=function(){try{return"object"==typeof t&&"[object process]"===Object.prototype.toString.call(t)}catch(e){return!1}}();e.isNode=n,e.isSafari=r,e.isChrome=i}).call(e,n(14))},function(t,e){function n(t){if(u===setTimeout)return setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(c===clearTimeout)return clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function i(){p&&f&&(p=!1,f.length?h=f.concat(h):d=-1,h.length&&o())}function o(){if(!p){var t=n(i);p=!0;for(var e=h.length;e;){for(f=h,h=[];++d<e;)f&&f[d].run();d=-1,e=h.length}f=null,p=!1,r(t)}}function s(t,e){this.fun=t,this.array=e}function a(){}var u,c,l=t.exports={};!function(){try{u=setTimeout}catch(t){u=function(){throw new Error("setTimeout is not defined")}}try{c=clearTimeout}catch(t){c=function(){throw new Error("clearTimeout is not defined")}}}();var f,h=[],p=!1,d=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new s(t,e)),1!==h.length||p||n(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";function r(t,e){return m.call(t,e)}function i(t,e,n,r){void 0===r&&(r=!1),v.isSafari()&&t===window?t.addEventListener(e,n,r):b.call(t,e,n,r)}function o(t,e,n){v.isSafari()&&t===window?t.removeEventListener(e,n):w.call(t,e,n)}function s(t,e,n,o,s){var a=t,u=function(t){var n=t.target||t.srcElement;if(!t.delegateTarget)for(;n&&n!=a;n=n.parentNode)r(n,e)&&(t.delegateTarget=n,o(t))},c=!!~x.indexOf(n);return i(t,n,u,c),k.push({elm:t,eventName:n,handler:u,listener:o,selector:e}),u}function a(t,e,n,r){for(var i=k.slice(),s=0,a=i.length;s<a;s++){var u=i[s],c=!(t!==u.elm||n&&u.eventName!==n||r&&u.listener!==r||e&&u.selector!==e);c&&(o(t,u.eventName,u.handler),k.splice(d.indexOf(i,u),1))}}function u(t,e){if(t.classList)for(var n=e.split(" "),r=0,i=n.length;r<i;r++)t.classList.contains(n[r].trim())||t.classList.add(n[r].trim());else t.className=d.unique(t.className.split(" ").concat(e.split(" "))).join(" ")}function c(t,e){if(t.classList)for(var n=e.split(" "),r=0,i=n.length;r<i;r++)t.classList.remove(n[r].trim());else for(var n=t.className.split(" "),o=e.split(" "),s=void 0,r=0,i=o.length;r<i;r++)s=n.indexOf(o[r]),~s&&(n=n.splice(s,1))}function l(t,e){if(t.classList)return t.classList.contains(e);var n=new RegExp("\b"+e);return n.test(t.className)}function f(t){if("selectionStart"in t)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange(),n=document.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-n}}function h(t,e,n,r){var s=j.transitionEnd||(j.transitionEnd=_()),a=function(r){o(t,s,a),e.call(n,r)};i(t,s,a)}function p(t,e,n,r){var s=j.animationEnd||(j.animationEnd=O()),a=function(r){o(t,s,a),e.call(n,r)};i(t,s,a)}var d=n(7),y=n(9),v=n(13),g="undefined"!=typeof Element&&Element.prototype||{},m=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||function(t){var e=(this.parentNode||document).querySelectorAll(t)||[];return!!~d.indexOf(e,this)},b=g.addEventListener||function(t,e){return this.attachEvent("on"+t,e)},w=g.removeEventListener||function(t,e){return this.detachEvent("on"+t,e)},_=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null},O=function(){var t=document.createElement("bootstrap"),e={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null};e.matches=r,e.addEventListener=i,e.removeEventListener=o;var x="focus blur change".split(" "),k=[];e.delegate=s,e.undelegate=a,e.addClass=u,e.removeClass=c,e.hasClass=l,e.selectionStart=f;var j={animationEnd:null,transitionEnd:null};e.transitionEnd=h,e.animationEnd=p,e.domReady=function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),o=!0;t=e.shift();)t()}),function(t){o?setTimeout(t,0):e.push(t)}};var C=function(){function t(t){Array.isArray(t)||(t=[t]),this._elements=t||[]}return t.query=function(e,n){"string"==typeof n&&(n=document.querySelectorAll(n));var r,i;if("string"==typeof e)if(n){if(!(n instanceof HTMLElement))return r=new t(d.slice(n)),r.find(e);i=d.slice(n.querySelectorAll(e))}else i=d.slice(document.querySelectorAll(e));else e&&e instanceof Element?i=[e]:e&&e instanceof NodeList&&(i=d.slice(e));return new t(i)},Object.defineProperty(t.prototype,"length",{get:function(){return this._elements.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return t=void 0===t?0:t,t>=this.length?void 0:this._elements[t]},t.prototype.addClass=function(t){return this.forEach(function(e){u(e,t)})},t.prototype.removeClass=function(t){return this.forEach(function(e){c(e,t)})},t.prototype.hasClass=function(t){return this._elements.reduce(function(e,n){return l(n,t)},!1)},t.prototype.attr=function(t,e){var n;if("string"==typeof t&&e)r={},r[t]=e,n=r;else if("string"==typeof t){if(this.length)return this.get(0).getAttribute(t)}else y.isObject(t)&&(n=t);return this.forEach(function(t){for(var e in n)t.setAttribute(e,n[e])});var r},t.prototype._setValue=function(t,e){var n=t.type||"",r=/checkbox/.test(n),i=/radio/.test(n),o=r||i,s=Object.prototype.hasOwnProperty.call(t,"value"),a=s||/input|textarea|checkbox/.test(t.nodeName.toLowerCase()),u=/select/i.test(t.nodeName);null==e&&(e=""),o?i?String(e)===String(t.value)&&(t.checked=!0):t.checked=e:a||u?t.value=e:t.textContent=e},t.prototype._getValue=function(t){var e=t.type||"",n=/checkbox/.test(e),r=(/radio/.test(e),Object.prototype.hasOwnProperty.call(t,"value")),i=r||/input|textarea|checkbox/.test(t.nodeName.toLowerCase()),o=/select/i.test(t.nodeName);return n?Boolean(t.checked):i||o?t.value||"":t.textContent||""},t.prototype.val=function(t){var e=this;if(0===arguments.length){var n=this.get(0);if(void 0===n)return;return this._getValue(n)}return this.forEach(function(n){return e._setValue(n,t)})},t.prototype.text=function(t){return 0===arguments.length?this.length>0?this.get(0).textContent:null:this.forEach(function(e){return e.textContent=t})},t.prototype.html=function(t){return 0===arguments.length?this.length>0?this.get(0).innerHTML:null:this.forEach(function(e){return e.innerHTML=t})},t.prototype.css=function(t,e){return 2===arguments.length?this.forEach(function(n){t in n.style&&(n.style[t]=String(e))}):this.forEach(function(e){for(var n in t)t in e.style&&(e.style[n]=String(t[n]))})},t.prototype.parent=function(){var e=[];return this.forEach(function(t){t.parentElement&&e.push(t.parentElement)}),new t(e)},t.prototype.find=function(e){var n=[];return this.forEach(function(t){n=n.concat(d.slice(t.querySelectorAll(e)))}),new t(n)},t.prototype.map=function(t){var e=new Array(this.length);return this.forEach(function(n,r){e[r]=t(n,r)}),e},t.prototype.forEach=function(t){return this._elements.forEach(t),this},t}();e.Html=C},function(t,e,n){"use strict";function r(t){return u.isObject(status)&&u.has(t,"status")&&u.has(t,"statusText")&&u.has(t,"body")}function i(t){for(var e,n,r,i,o={},s=decodeURIComponent,a=t.split("&"),u=0,c=a.length;u<c;u++){var l=a[u];e=l.split("="),n=e[0],r=e[1],null==r&&(r=!0),n=s(n),r=s(r),i=o[n],Array.isArray(i)?i.push(r):i?o[n]=[i,r]:o[n]=r}return o}function o(t){return Object.keys(t).reduce(function(e,n){return e.push(n+"="+encodeURIComponent(t[n])),e},[]).join("&")}var s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=n(10),u=n(9),c=n(11),l=n(8);
!function(t){t[t.GET=0]="GET",t[t.PUT=1]="PUT",t[t.POST=2]="POST",t[t.DELETE=3]="DELETE",t[t.HEAD=4]="HEAD"}(e.HttpMethod||(e.HttpMethod={}));var f=e.HttpMethod;e.isResponse=r;var h=function(t){function e(e,n,i){t.call(this,n),1===arguments.length?r(e)?(this.status=e.status,this.message=e.statusText,this.body=e.body):this.status=e:(this.status=e,this.message=n,this.body=i)}return s(e,t),e}(Error);e.HttpError=h;var p=function(t){function e(e){t.call(this,e)}return s(e,t),e}(Error);e.ResponseError=p,e.queryStringToParams=i,e.queryParam=o;var d=/^application\/json/,y=/^file:/,v=function(t,e){return t.status>=200&&t.status<300||304===t.status||0===t.status&&y.test(e)||0===t.status&&"file:"===window.location.protocol},g=function(){function t(t,e){this._method=t,this._url=e,this._params={},this._headers={"X-Requested-With":"XMLHttpRequest"},this._xhr=l.ajax()}return t.prototype.uploadProgress=function(t){return this._xhr.upload.addEventListener("progress",t),this},t.prototype.downloadProgress=function(t){return this._xhr.addEventListener("progress",t),this},t.prototype.header=function(t,e){return a.isString(t)&&a.isString(e)?this._headers[t]=e:u.isObject(t)&&u.extend(this._headers,t),this},t.prototype.params=function(t,e){return 1===arguments.length&&u.isObject(t)?u.extend(this._params,t):2===arguments.length&&(this._params[t]=e),this},t.prototype.withCredentials=function(t){return this._xhr.withCredentials=t,this},t.prototype.json=function(t,e){var n=this;return void 0===e&&(e=!1),this.header("content-type","application/json; charset=utf-8"),a.isString(t)||(t=JSON.stringify(t)),this.end(t,e).then(function(t){var e=n._xhr.getResponseHeader("content-type");if(d.test(e)&&""!=t.body){var r=JSON.parse(t.body),i=t;return i.body=r,i}throw new p("type error")})},t.prototype.end=function(t,e){var n=this;void 0===e&&(e=!1),t=t||this._data;var r=c.deferred();this._xhr.addEventListener("readystatechange",function(){if(n._xhr.readyState===XMLHttpRequest.DONE){var t={status:n._xhr.status,statusText:n._xhr.statusText,body:null,headers:{},isValid:!1,contentLength:0,contentType:null},i=n._xhr.getAllResponseHeaders().split("\r\n");if(i.length)for(var o=0,s=i.length;o<s;o++)if(""!==i[o]){var a=i[o].split(":");t.headers[a[0].trim()]=a[1].trim()}return t.contentType=t.headers["Content-Type"],t.contentLength=parseInt(t.headers["Content-Length"]),isNaN(t.contentLength)&&(t.contentLength=0),t.body=n._xhr.response,t.isValid=v(n._xhr,n._url),!t.isValid&&e?r.reject(new h(t)):void r.resolve(t)}});var i=f[this._method],s=this._url;if(t&&t===Object(t)&&this._method==f.GET){var a=s.indexOf("?")===-1?"?":"&",u=a+o(t);s+=u}s=this._apply_params(s),this._xhr.open(i,s,!0);for(var l in this._headers)this._xhr.setRequestHeader(l,this._headers[l]);return this._xhr.send(t),r.promise},t.prototype._apply_params=function(t){var e={},n=t.indexOf("?");if(n>-1&&(e=u.extend(e,i(t.substr(n+1))),t=t.substr(0,n)),u.extend(e,this._params),!u.isEmpty(e)){var r=t.indexOf("?")===-1?"?":"&";t+=r+o(e)}return t},t}();e.Request=g,e.request={},["get","post","put","delete","patch","head"].forEach(function(t){e.request["delete"===t?"del":t]=function(e){var n=f[t.toUpperCase()];return new g(n,e)}})},function(t,e,n){"use strict";function r(t){return function(e){var n=t||h.camelcase(e.name);d.Repository.add(f.DependencyType.Controller,n,e)}}function i(t){return function(e){var n=t||h.camelcase(e.name);d.Repository.add(f.DependencyType.Module,n,e)}}function o(t,e){return function(e){var n=t||h.camelcase(e.name);d.Repository.add(f.DependencyType.Service,n,e)}}function s(t){return function(t){}}function a(t){return function(e){p.Metadata.define(f.DIServiceConfig,t,e,void 0)}}function u(t){return function(e){p.Metadata.define(f.Metakey[f.Metakey.Template],t,e,void 0)}}function c(t){return function(e){g("defining component %s, target: %s",t,e.name),y.component(t,e)}}function l(t){return function(e){g("defining attribute %s, target: %s",t,e.name),y.attribute(t,e)}}var f=n(18),h=n(6),p=n(19),d=n(32),y=n(33),v=n(19);e.autoinject=v.autoinject,e.inject=v.inject,e.registration=v.registration,e["transient"]=v["transient"],e.singleton=v.singleton,e.instanceActivator=v.instanceActivator;var g=n(25)("stick:decorators");e.controller=r,e.module=i,e.service=o,e.factory=s,e.config=a,e.template=u,e.component=c,e.attribute=l},function(t,e,n){"use strict";function r(t){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],n=p.Metadata.getOwn(p.Metadata.paramTypes,t);if(!n){var r=t.toString().match(d);r&&(n=r[1].replace(/,/," ").split(" ").map(function(t){return t.replace(",","").trim()}).filter(function(t){return""!==t}),e&&p.Metadata.define(p.Metadata.paramTypes,n,t,void 0))}return n||[]}function i(t){var e=void 0;if(t.constructor===Array){var n=t.pop();e=t,t=n,t.inject=e}else{if("function"!=typeof t)return[t,null];if(e=h.result(t,"inject"),!e||0==e.length){var i=t;e=r(t),i.inject=e}}return[t,e]}function o(t){var e=void 0,n=void 0;try{e=t()}catch(r){n=r}return[e,n]}function s(t,e){var n=void 0,r=void 0,i=void 0,s=t.inject;if(!s)return h.Promise.resolve([]);for(n=0,r=s.length;n<r;n++){if(i=o(function(){return e.get(s[n])}),null!=i[1])return h.Promise.reject(i[1]);s[n]=i[0]}return h.Promise.all(s)}function a(t){return function(e){var n=y[y.DependencyType];p.Metadata.define(n,t,e,void 0)}}function u(t){var e=y[y.DependencyType],n=p.Metadata.getOwn(e,t,void 0);return n}function c(t,e){return u(t)===e}function l(t,e){var n=p.Metadata.instanceActivator;p.Metadata.define(n,e,t,void 0)}function f(t,e){var n=p.Metadata.dependencyResolver;p.Metadata.define(n,e,t,void 0)}var h=n(6),p=n(19),d=/function[^(]*\(([^)]*)\)/i;e.getFunctionParameters=r,function(t){t[t.Service=0]="Service",t[t.Module=1]="Module",t[t.Controller=2]="Controller",t[t.Factory=3]="Factory"}(e.DependencyType||(e.DependencyType={}));e.DependencyType;!function(t){t[t.DependencyType=0]="DependencyType",t[t.Template=1]="Template"}(e.Metakey||(e.Metakey={}));var y=e.Metakey;e.DIServiceConfig="mobyjs:service:config",e.getDependencies=i,e.resolveDependencies=s,e.setDependencyType=a,e.getDependencyType=u,e.isDependencyType=c,e.setActivator=l,e.setDependencyResolver=f},function(t,e,n){t.exports=n(20)},function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}function o(){}Object.defineProperty(e,"__esModule",{value:!0}),o.name||Object.defineProperty(Function.prototype,"name",{get:function(){var t=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:t}),t}});var s="0.1.0";e.Version=s;var a=n(21);i(e,r(a,i));var u=n(28);i(e,r(u,i));var c=n(31);i(e,r(c,i));var l=n(22);i(e,r(l,i))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(){return"di"+ ++h}function s(t){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],n=c.Metadata.getOwn(c.Metadata.paramTypes,t);if(!n){var r=t.toString().match(p);r&&(n=r[1].replace(/\W+/," ").split(" ").map(function(t){return t.replace(",","").trim()}).filter(function(t){return""!==t}),e&&c.Metadata.define(c.Metadata.paramTypes,n,t,void 0))}return n||[]}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.getFunctionParameters=s;var u=n(22),c=n(23),l=n(24),f=n(25)("stick:di"),h=0,p=/function[^(]*\(([^)]*)\)/i,d=function(t){function e(n){r(this,e),t.call(this,n),this.name="BadKeyError",this.message="key not registered with container"}return i(e,t),e}(l.DIError);e.DIBadKeyError=d;var y=Object.freeze([]);e.emptyParameters=y;var v=function(){function t(e){r(this,t),this._id=o(),this.entries=new Map,this.constructionInfo=e||new Map,f("Creating new container: %s",this.id)}return t.prototype.makeGlobal=function(){return f("%s: Make global",this.id),t.instance=this,this},t.prototype.autoRegister=function(t,e,n){var r;if(null===t||void 0===t)throw new d("no key");"function"==typeof t?(r=c.Metadata.get(c.Metadata.registration,t,n),void 0!==r?r.register(this,e||t,t):this.registerSingleton(e||t,t,n)):this.registerInstance(t,t)},t.prototype.unregister=function(t){f("%s: Unregister key: %s",this.id,t),this.entries["delete"](t)},t.prototype.hasHandler=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(null===t||void 0===t)throw new d;return this.entries.has(t)||e&&this.parent&&this.parent.hasHandler(t,e)},t.prototype.get=function(e,n){f("%s: Get %s, target: %s",this.id,e,n);var r;if(null===e||void 0===e)throw new d;if(e===t)return this;if(e instanceof u.Resolver)return e.get(this);if(r=this.entries.get(e),void 0!==r)return r[0](this);if(this.parent&&this.parent.hasHandler(e))return f("%s: found key '%s' on parent",this.id,e),this.parent.get(e,n);if("string"==typeof e)throw(0,l.createError)("DIResolveError","no component registered for key: "+e);return this.autoRegister(e,n),r=this.entries.get(e),r[0](this)},t.prototype.getAll=function(t){var e,n=this;if(null===t||void 0===t)throw new d;return e=this.entries.get(t),void 0!==e?e.map(function(t){return t(n)}):this.parent?this.parent.getAll(t):[]},t.prototype.createChild=function(){var e=new t(this.constructionInfo);return e.parent=this,f("%s: Create child container: %s",this.id,e.id),e},t.prototype.resolveDependencies=function(t,e){f("%s: Resolve dependencies for: %j",this.id,t.name);var n,r,i=this._getOrCreateConstructionSet(t,e),o=i.keys,s=new Array(o.length);try{for(n=0,r=o.length;n<r;++n)s[n]=this.get(o[n])}catch(a){var u="Error";throw n<r&&(u+=" The argument at index "+n+" (key:"+o[n]+") could not be satisfied."),(0,l.createError)("DependencyError",u,[a])}return s},t.prototype.invoke=function(t,e,n){var r=this._getOrCreateConstructionSet(t,n);try{var i,o;return o=r.dependencyResolver?r.dependencyResolver.resolveDependencies(t):this.resolveDependencies(t,n),void 0!==e&&Array.isArray(e)&&(o=o.concat(e)),f("%s: invoking '%s', with dependencies:",this.id,t.name,o),r.activator.invoke(t,o,n,i)}catch(s){var a=r.activator instanceof u.ClassActivator?"instantiating":"invoking",c="Error "+a+" "+t.name+".";throw c+=" Check the inner error for details.",(0,l.createError)("DIInvokeError",c,[s])}},t.prototype.registerInstance=function(t,e){f("%s: Register instance %s",this.id,t),this.registerHandler(t,function(t){return e})},t.prototype.registerTransient=function(t,e,n){f("%s: Register transient %s",this.id,t),this.registerHandler(t,function(t){return t.invoke(e,null,n)})},t.prototype.registerSingleton=function(t,e,n){f("%s: Register singleton %s",this.id,t);var r;this.registerHandler(t,function(t){return r||(r=t.invoke(e,null,n))})},t.prototype.registerHandler=function(t,e){this._getOrCreateEntry(t).push(e)},t.prototype._getOrCreateEntry=function(t){var e;if(null===t||void 0===t)throw new l.DIError("key cannot be null or undefined.  (Are you trying to inject something that doesn't exist with DI?)");return e=this.entries.get(t),void 0===e&&(e=[],this.entries.set(t,e)),e},t.prototype._getOrCreateConstructionSet=function(t,e){var n=this.constructionInfo.get(t);return void 0===n&&(n=this._createConstructionSet(t,e),this.constructionInfo.set(t,n)),n},t.prototype._createConstructionSet=function(t,e){var n={activator:c.Metadata.getOwn(c.Metadata.instanceActivator,t,e)||u.ClassActivator.instance,dependencyResolver:c.Metadata.getOwn(c.Metadata.dependencyResolver,t,e)||this};return void 0!==t.inject?("function"==typeof t.inject?n.keys=t.inject():n.keys=t.inject,n):(n.keys=c.Metadata.getOwn(c.Metadata.paramTypes,t,e)||s(t)||y,n)},a(t,[{key:"root",get:function(){for(var t=this,e=t;e;)e=t.parent,e&&(t=e);return t}},{key:"id",get:function(){return this._id}}]),t}();e.DIContainer=v},function(t,e){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e){r(this,t),this.key=e}return t.prototype.register=function(t,e,n){t.registerTransient(this.key||e,n)},t}();e.TransientRegistration=i;var o=function(){function t(e){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];r(this,t),"boolean"==typeof e?this.registerInChild=e:(this.key=e,this.registerInChild=n)}return t.prototype.register=function(t,e,n){var r=this.registerInChild?t:t.root;r.registerSingleton(this.key||e,n)},t}();e.SingletonRegistration=o;var s=function(){function t(){r(this,t)}return t.prototype.get=function(t){throw new Error("A custom Resolver must implement get(container) and return the resolved instance(s).")},t}();e.Resolver=s;var a=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){var e=this;return function(){return t.get(e.key)}},e.of=function(t){return new e(t)},e}(s);e.Lazy=a;var u=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){return t.getAll(this.key)},e.of=function(t){return new e(t)},e}(s);e.All=u;var c=function(t){function e(n){var i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];r(this,e),t.call(this),this.key=n,this.checkParent=i}return n(e,t),e.prototype.get=function(t){return t.hasHandler(this.key,this.checkParent)?t.get(this.key):null},e.of=function(t){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return new e(t,n)},e}(s);e.Optional=c;var l=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){return t.parent?t.parent.get(this.key):null},e.of=function(t){return new e(t)},e}(s);e.Parent=l;var f=function(){function t(){r(this,t)}return t.prototype.invoke=function(t,e){return Reflect.construct(t,e)},t}();e.ClassActivator=f,f.instance=new f;var h=function(){function t(){r(this,t)}return t.prototype.invoke=function(t,e){return t.apply(void 0,e)},t}();e.FactoryActivator=h,h.instance=new h},function(t,e){(function(t){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){var e;if(e="function"==typeof t.decorators?t.decorators():t.decorators,"function"!=typeof e._decorate)throw new Error("The return value of your decorator's method was not valid.");delete t.decorators,e._decorate(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=Function.prototype.bind,o=function(){return"undefined"!=typeof self?self:"undefined"!=typeof t?t:new Function("return this")()}(),s=Object.freeze({}),a="__metadata__";e.metadataContainerKey=a,"undefined"==typeof o.System&&(o.System={isFake:!0}),"undefined"==typeof o.System.forEachModule&&(o.System.forEachModule=function(){}),"undefined"==typeof o.Reflect&&(o.Reflect={}),"undefined"==typeof o.Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(t,e,n){return((e[a]||s)[n]||s)[t]}),"undefined"==typeof o.Reflect.defineMetadata&&(Reflect.defineMetadata=function(t,e,n,r){var i=n.hasOwnProperty(a)?n[a]:n[a]={},o=i[r]||(i[r]={});o[t]=e}),"undefined"==typeof o.Reflect.metadata&&(Reflect.metadata=function(t,e){return function(n,r){Reflect.defineMetadata(t,e,n,r)}}),Reflect.construct=function(t,e){return new(i.apply(t,[null].concat(n(e))))};var u={global:o,noop:function(){},paramTypes:"design:paramtypes",properties:"design:properties",instanceActivator:"di:instance-activator",registration:"di:registration",dependencyResolver:"di:dependency-resolver",get:function(t,e,n){if(e){var r=u.getOwn(t,e,n);return void 0===r?u.get(t,Object.getPrototypeOf(e),n):r}},getOwn:function(t,e,n){if(e)return e.hasOwnProperty("decorators")&&r(e),Reflect.getOwnMetadata(t,e,n)},define:function(t,e,n,r){Reflect.defineMetadata(t,e,n,r)},getOrCreateOwn:function(t,e,n,r){var i=u.getOwn(t,n,r);return void 0===i&&(i=new e,Reflect.defineMetadata(t,i,n,r)),i}};e.Metadata=u}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e,n){var r=void 0;return r=n?new s(e,n):new o(e),r.name=t,r}Object.defineProperty(e,"__esModule",{value:!0}),e.createError=i;var o=function(t){function e(r){n(this,e),t.call(this,r),this.message=r}return r(e,t),e.prototype.toString=function(){return"["+this.name+": "+this.message+"]"},e}(Error);e.DIError=o;var s=function(t){function e(r,i){n(this,e),t.call(this,r),this.errors=i}return r(e,t),e.prototype.toString=function(){return"["+this.name+": "+this.message+"], errors:"+this.errors},e}(o);e.DIAggregateError=s},function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function a(){var t;try{t=e.storage.debug}catch(n){}return t}function u(){try{return window.localStorage}catch(t){}}e=t.exports=n(26),e.log=o,e.formatArgs=i,e.save=s,e.load=a,e.useColors=r,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,n){function r(){return e.colors[l++%e.colors.length]}function i(t){function n(){}function i(){var t=i,n=+new Date,o=n-(c||n);t.diff=o,t.prev=c,t.curr=n,c=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var i=e.formatters[r];if("function"==typeof i){var o=s[a];n=i.call(t,o),s.splice(a,1),a--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var u=i.log||e.log||console.log.bind(console);u.apply(t,s)}n.enabled=!1,i.enabled=!0;var o=e.enabled(t)?i:n;return o.namespace=t,o}function o(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(t=n[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=i,e.coerce=u,e.disable=s,e.enable=o,e.enabled=a,e.humanize=n(27),e.names=[],e.skips=[],e.formatters={};var c,l=0},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(t){return t>=c?Math.round(t/c)+"d":t>=u?Math.round(t/u)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function i(t){return o(t,c,"day")||o(t,u,"hour")||o(t,a,"minute")||o(t,s,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,l=365.25*c;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?i(t):r(t)}},function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(23);i(e,r(o,i));var s=n(29);i(e,r(s,i))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),i={configure:{parameterizedDecorator:function(t,e){i[t]=function(){var e=new r.DecoratorApplicator;return e[t].apply(e,arguments)},r.DecoratorApplicator.prototype[t]=function(){var t=e.apply(null,arguments);return this.decorator(t)}},simpleDecorator:function(t,e){i[t]=function(){return(new r.DecoratorApplicator).decorator(e)},r.DecoratorApplicator.prototype[t]=function(){return this.decorator(e)}}}};e.Decorators=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){n(this,t),this._first=null,this._second=null,this._third=null,this._rest=null}return t.prototype.decorator=function(t){return null===this._first?(this._first=t,this):null===this._second?(this._second=t,this):null===this._third?(this._third=t,this):(null===this._rest&&(this._rest=[]),this._rest.push(t),this)},t.prototype._decorate=function(t){var e,n,r;if(null!==this._first&&this._first(t),null!==this._second&&this._second(t),null!==this._third&&this._third(t),r=this._rest,null!==r)for(e=0,n=r.length;e<n;++e)r[e](t)},t}();e.DecoratorApplicator=r},function(t,e,n){"use strict";function r(t){var e=function(t){t.inject=l.Metadata.getOwn(l.Metadata.paramTypes,t)||h.emptyParameters};return t?e(t):e}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){t.inject=e}}function o(t,e){return function(n){l.Metadata.define(l.Metadata.registration,t,n,e)}}function s(t,e){return o(new f.TransientRegistration(t),e)}function a(t,e,n){return void 0===e&&(e=!1),o(new f.SingletonRegistration(t,e),n)}function u(t,e){return function(n){l.Metadata.define(l.Metadata.instanceActivator,t,n,e)}}function c(){return u(f.FactoryActivator.instance)}Object.defineProperty(e,"__esModule",{value:!0}),e.autoinject=r,e.inject=i,e.registration=o,e["transient"]=s,e.singleton=a,e.instanceActivator=u,e.factory=c;var l=n(28),f=n(22),h=n(21);l.Decorators.configure.simpleDecorator("autoinject",r),l.Decorators.configure.parameterizedDecorator("inject",i),l.Decorators.configure.parameterizedDecorator("registration",o),l.Decorators.configure.parameterizedDecorator("transient",s),l.Decorators.configure.parameterizedDecorator("singleton",a),l.Decorators.configure.parameterizedDecorator("instanceActivator",u),l.Decorators.configure.parameterizedDecorator("factory",c)},function(t,e,n){"use strict";var r,i=n(18),o=n(6),s=n(19),a=n(25)("stick:container:repository");Function.prototype.toString;!function(t){function e(e,n,r){a("Adding dependency: %s, name: %s",i.DependencyType[e],n);var u=void 0;(u=o.find(t.items,function(t){return t.name==n}))&&t.items.splice(t.items.indexOf(u),1);var c=s.Metadata.get(i.DIServiceConfig,r);if("function"==typeof r&&""==r.name)try{Object.defineProperty(r,"name",{value:n})}catch(l){}t.items.push({name:n,handler:r,type:e,config:c})}function n(t){return!!c(t)}function r(t,e){return!!u(t,e)}function u(e,n){return a("Get dependency: %s, name: %s",i.DependencyType[e],n),o.find(t.items,function(t){return t.name==n&&t.type==e})}function c(e){return o.find(t.items,function(t){return t.name==e})}t.items=[],t.add=e,t.hasAny=n,t.has=r,t.get=u,t.any=c}(r=e.Repository||(e.Repository={}))},function(t,e,n){"use strict";function r(t,e){"function"!=typeof e&&(e=p.extendClass(f.BaseAttribute,e)),f[t]=e}function i(t,e){"function"!=typeof e&&(e=p.extendClass(l.BaseComponent,e)),l[t]=e}function o(t,e){h[t]=e}function s(t){p.Debug.enable(t)}function a(t,e){var n=c,r=y.compile(t),i=r(n.fragment,n.element,n.text,n.comment,n.dynamic,v.binding);return n.template(i,p.extend({document:document,viewClass:d.View,attributes:new u.Repository(f),components:new u.Repository(l),modifiers:h,runloop:new g.RunLoop},e||{}))}var u=n(34),c=n(35),l=n(48),f=n(52),h=n(58),p=n(40),d=n(51),y=n(59),v=n(61),g=n(62);e.version="$$version$$",e.attribute=r,e.component=i,e.modifier=o,e.debugging=s,e.compile=a},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.values=e||{}}return t.prototype.set=function(t,e){this.values[t]=e},t.prototype.get=function(t){return this.values[t]},t.prototype.has=function(t){return!!this.get(t)},t.prototype["delete"]=function(t){delete this.values[t]},t}();e.Repository=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(36)),r(n(37)),r(n(39)),r(n(43)),r(n(44)),r(n(45)),r(n(47)),r(n(46)),r(n(38))},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=8,this.nodeValue=e}return t.prototype.render=function(t){return Promise.resolve(t.document.createComment(this.nodeValue))},t}();e.Comment=r,e.comment=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(38),o=function(){function t(e,n){r(this,t),this.nodeType=-200,this.vnode=e,this.bindingClass=n,this.vnode.parentNode=this}return t.prototype.render=function(t,e){return t.components.has(this.vnode.tagName)?this._renderComponent(t,e):this._renderElement(t,e)},t.prototype._renderElement=function(t,e){var n=this;return this.vnode.render(t,e).then(function(r){return e.push(new a(r,n.bindingClass,t)),r})},t.prototype._renderComponent=function(t,e){var n=this,r=[];return this.vnode.render(t,r).then(function(i){return e.push(new s(r[0],n.bindingClass,t)),i})},t}();e.Dynamic=o,e.dynamic=function(t,e){return new o(t,e)};var s=function(){function t(e,n,i){r(this,t),this.renderer=e,this.bindingClass=n,this.options=i}return t.prototype.generate=function(t,e){var n=this;return this.renderer.generate(t,e).then(function(){var t=e.bindings[e.bindings.length-1];e.bindings.splice(e.bindings.indexOf(t),0,new n.bindingClass(t,e))})},t}(),a=function(){function t(e,n,i){r(this,t),this.ref=e,this.bindingClass=n,this.options=i}return t.prototype.generate=function(t,e){return this._refPath||(this._refPath=i.getNodePath(this.ref)),e.bindings.push(new this.bindingClass(i.getNodeByPath(t,this._refPath),e)),Promise.resolve()},t}()},function(t,e){"use strict";function n(t,e){for(var n=t,r=0,i=e.length;r<i;r++)n=n.childNodes[e[r]];return n}function r(t){for(var e=[],n=t.parentNode,r=t;n;)for(e.unshift(Array.prototype.indexOf.call(n.childNodes,r)),r=n,n=n.parentNode;n&&n.nodeType>12;)n=n.parentNode;return e}e.getNodeByPath=n,e.getNodePath=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n,r){for(var i in n){var o=e.attributes.get(i),s=new o(t,i,n[i],r);s.update&&r.bindings.push(s)}}var o=n(40),s=n(41),a=n(42),u=function(){function t(e,n,i){r(this,t),this.nodeType=1,this.tagName=String(e).toLocaleLowerCase(),this.childNodes=i,this.attributes=n||{};for(var o=0;o<i.length;o++)i[o].parentNode=this}return t.prototype.render=function(t,e){var n=t.components;return n.has(this.tagName)?this._renderComponent(n.get(this.tagName),t,e):this._renderElement(t,e)},t.prototype.setAttributes=function(t,e){"string"==typeof t?this.attributes[t]=e:o.extend(this.attributes,t)},t.prototype._renderComponent=function(t,e,n){var r=new s.FragmentSection(e.document);return n.push(new c(t,r,this,this._splitAttributes(e),e)),Promise.resolve(r.render())},t.prototype._renderElement=function(t,e){var n=t.document.createElement(this.tagName),r=this._splitAttributes(t);for(var i in r.staticAttributes)n.setAttribute(i,r.staticAttributes[i]);var o=this.childNodes.map(function(n){return n.render(t,e)});return Promise.all(o).then(function(i){return i.forEach(function(t){n.appendChild(t)}),Object.keys(r.dynamicAttributes).length&&e.push(new l(new a.NodeSection(t.document,n),t,r.dynamicAttributes)),n})},t.prototype._splitAttributes=function(t){var e={},n={};if(t.attributes)for(var r in this.attributes){var i=t.attributes.get(r);!i||i.test&&!i.test(this,r,this.attributes[r])?n[r]=this.attributes[r]:e[r]=this.attributes[r]}else n=this.attributes;return{dynamicAttributes:e,staticAttributes:n}},t}();e.Element=u,e.element=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return new u(t,e,r)};var c=function(){function t(e,n,i,o,s){r(this,t),this.section=n,this.componentClass=e,this.element=i,this.options=s,this.attributes=o.staticAttributes,this.dynamicAttributes=o.dynamicAttributes}return t.prototype.generate=function(t,e){this._marker||(this._marker=this.section.createMarker());var n=new this.componentClass(this._marker.createSection(t),this.element,this.attributes,e);return Object.keys(this.dynamicAttributes).length&&i(n,this.options,this.dynamicAttributes,e),n.update&&e.bindings.push(n),n.initialize()},t}(),l=function(){function t(e,n,i){r(this,t),this.section=e,this.options=n,this.attributes=i}return t.prototype.generate=function(t,e){return this._marker||(this._marker=this.section.createMarker()),i(this._marker.findNode(t),this.options,this.attributes,e),Promise.resolve()},t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){for(var e=void 0,n=void 0,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var s=i,a=Array.isArray(s),u=0,s=a?s:s[Symbol.iterator]();;){if(a){if(u>=s.length)break;e=s[u++]}else{if(u=s.next(),u.done)break;e=u.value}if(e===Object(e))for(n in e)t[n]=e[n]}return t}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Array.prototype.slice.apply(t,n)}function o(t,e,n){var i;i=e&&Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},r(i,t,n);var o=function(){this.constructor=i};return o.prototype=t.prototype,i.prototype=new o,e&&r(i.prototype,e),i.__super__=t.prototype,i}function s(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if("function"!=typeof t)throw new Error("method not at function");if(null!=c)return c.call.apply(c,[t,e].concat(r));
r=r||[];var s=function(){},a=function(){var n=this instanceof s?this:e;return t.apply(n,r.concat(i(arguments)))};return s.prototype=this.prototype,a.prototype=new s,a}function a(t){return l.create(t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.extend=r,e.slice=i,e.extendClass=o;var c=Function.prototype.bind;e.bind=s;var l=function(){function t(e){n(this,t),this.enabled=!1,this.namespace=e}return t.enable=function(t,e){for(var n in this.loggers)e&&n===e?this.loggers[n].enabled=t:e||(this.loggers[n].enabled=t)},t.create=function(e){var n=void 0;return this.loggers[e]?n=this.loggers[e]:(n=new t(e),this.loggers[e]=n),s(n.debug,n)},t.prototype.debug=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(this.enabled){n[0]=this._coerce(n[0]),"string"!=typeof n[0]&&(n=["%o"].concat(n));var i=0;n[0]=n[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;i++;var o=t.formatters[r];if("function"==typeof o){var s=n[i];e=o.call(self,s),n.splice(i,1),i--}return e}),n=this._formatArgs(n),this._log.apply(this,n)}},t.prototype._log=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return"object"===("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.prototype._coerce=function(t){return t instanceof Error?t.stack||t.message:t},t.prototype._formatArgs=function(t){return t[0]="[templ:"+this.namespace+"] "+t[0],t},t}();l.loggers={},l.formatters={j:function(t){return JSON.stringify(t)}},e.Debug=l,e.debug=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(38),o=function(){function t(e,n,i){if(r(this,t),this.document=e,this.start=n||e.createTextNode(""),this.end=i||e.createTextNode(""),!this.start.parentNode){var o=e.createDocumentFragment();o.appendChild(this.start),o.appendChild(this.end),this.__parent=o}}return t.prototype.appendChild=function(t){this.end.parentNode.insertBefore(t,this.end)},t.prototype.render=function(){return this.start.parentNode},t.prototype.remove=function(){var t=this.removeChildNodes();return t.insertBefore(this.start,t.childNodes[0]),t.appendChild(this.end),this},t.prototype.removeChildNodes=function(){for(var t=this.document.createDocumentFragment(),e=this.start,n=e.nextSibling,r=this.end;n!==r;)t.appendChild(n),n=e.nextSibling;return t},t.prototype.createMarker=function(){return new s(this.document,i.getNodePath(this.start),i.getNodePath(this.end))},t.prototype.clone=function(){var e;if(11===this.start.parentNode.nodeType)e=this.start.parentNode.cloneNode(!0);else{e=this.document.createDocumentFragment();for(var n=this._getChildNodes(),r=n.length,i=0;i<r;i++)e.appendChild(n[i].cloneNode(!0))}var o=e.childNodes[0],s=e.childNodes[e.childNodes.length-1];return new t(this.document,o,s)},t.prototype._getChildNodes=function(){for(var t=this.start,e=this.end.nextSibling,n=[];t!==e;)n.push(t),t=t.nextSibling;return n},t}();e.FragmentSection=o;var s=function(){function t(e,n,i){r(this,t),this.document=e,this.startPath=n,this.endPath=i}return t.prototype.createSection=function(t){return new o(this.document,i.getNodeByPath(t,this.startPath),i.getNodeByPath(t,this.endPath))},t}();e.FragmentSectionMarker=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(38),o=function(){function t(e,n){r(this,t),this.document=e,this.node=n}return t.prototype.createMarker=function(){return new s(this.document,i.getNodePath(this.node))},t.prototype.appendChild=function(t){this.node.appendChild(t)},t.prototype.render=function(){return this.node},t.prototype.remove=function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},t.prototype.removeChildren=function(){for(;this.node.childNodes.length;)this.node.removeChild(this.node.childNodes[0])},t.prototype.clone=function(){return new t(this.document,this.node.cloneNode(!0))},t}();e.NodeSection=o;var s=function(){function t(e,n){r(this,t),this.document=e,this.path=n}return t.prototype.createSection=function(t){return new o(this.document,this.findNode(t))},t.prototype.findNode=function(t){return i.getNodeByPath(t,this.path)},t}();e.NodeSectionMarker=s},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},i=function(){function t(e){n(this,t),this.nodeType=11,this.childNodes=e;for(var r=0;r<e.length;r++)e[r].parentNode=this}return t.prototype.render=function(t,e){return r(this,void 0,Promise,regeneratorRuntime.mark(function n(){var r,i,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t.document.createDocumentFragment(),i=0,o=this.childNodes.length;case 2:if(!(i<o)){n.next=10;break}return n.next=5,this.childNodes[i].render(t,e);case 5:s=n.sent,r.appendChild(s);case 7:i++,n.next=2;break;case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}},n,this)}))},t}();e.Fragment=i,e.fragment=function(t){return new i(t)}},function(t,e,n){"use strict";function r(t,e){var n=void 0;if(11==e.nodeType){var r=new i.FragmentSection(t);r.appendChild(e),n=r}else n=new o.NodeSection(t,e);return n}var i=n(41),o=n(42);e.section=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return new u(t,e)}var o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},s=n(44),a=n(46),u=function(){function t(e,n){r(this,t),this._renderers=[],this.vnode=e,this.options=n}return t.prototype.render=function(t,e){var n=this;return this.vnode.render(this.options,this._renderers).then(function(r){return n.section=s.section(n.options.document,r),n.view(t,e)})},t.prototype.view=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(this,void 0,Promise,regeneratorRuntime.mark(function n(){var r,i,o,s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=this.section){n.next=2;break}throw new Error("must call render before view");case 2:r=this.section.clone(),i=this.options.viewClass||a.View;for(o in this.options)e[o]||(e[o]=this.options[o]);s=new i(r,this,t,e),u=0,c=this._renderers.length;case 7:if(!(u<c)){n.next=13;break}return n.next=10,this._renderers[u].generate(r.node||r.start.parentNode,s);case 10:u++,n.next=7;break;case 13:return n.abrupt("return",s);case 14:case"end":return n.stop()}},n,this)}))},t}();e.Template=u,e.template=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(5),a=function(t){function e(n,o,s,a){r(this,e);var u=i(this,t.call(this));return u.section=n,u.template=o,u.bindings=[],u._runloop=a.runloop,u.context=s,u}return o(e,t),e.prototype.update=function(){return Promise.all(this.bindings.map(function(t){return t.update()})).then(function(t){})},e.prototype.addListener=function(t,e,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];return t.addEventListener(e,n,r),n},e.prototype.removeListener=function(t,e,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];t.removeEventListener(e,n,r)},e.prototype.render=function(){return Promise.resolve(this.section.render())},e.prototype.remove=function(){for(var t=this.bindings,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;i.destroy()}return this.section.remove()},e}(s.EventEmitter);e.View=a},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=-201,this.nodeValue=e}return t.prototype.render=function(t){return Promise.resolve(t.document.createTextNode(this.nodeValue))},t}();e.Text=r,e.text=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(49)),r(n(50))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(45),o=n(43),s=function(){function t(e,n,s,a){r(this,t),this.section=e,this.vnode=n,this.attributes=s,this.view=a,this.document=a.template.options.document,n.childNodes&&(this.childTemplate=i.template(o.fragment(n.childNodes),a.template.options));for(var u in s)this.setAttribute(u,s[u])}return t.prototype.initialize=function(){return Promise.resolve()},t.prototype.setAttribute=function(t,e){this.attributes[t]=e},t.prototype.removeAttribute=function(t){this.attributes[t]=void 0},t.prototype.destroy=function(){},t}();e.BaseComponent=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(t)if(t.forEach)t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}var a=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},u=n(49),c=n(51),l=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a._children=[],a}return o(e,t),e.prototype.initialize=function(){return a(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.childTemplate.render({},{});case 2:case"end":return t.stop()}},t,this)}))},e.prototype.update=function(){return a(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,r,i,o,s,a,u,l,f,h,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.as,n=this.each,r=this.key||"key",i=0,o=this,s=this.view,n instanceof c.Call&&(n=n.call()),null!=n){t.next=9;break}return t.abrupt("return");case 9:u=[],l=0,f=n.length;case 11:if(!(l<f)){t.next=31;break}if(h=n[l],e?(a={},a[r]=l,a[e]=h):a=h,a.parent=o.view.context,!(i>=o._children.length)){t.next=24;break}return t.next=18,this.childTemplate.view(a,{parent:s});case 18:p=t.sent,o._children.push(p),o.section.appendChild(p.section.render()),u.push(p.render(a)),t.next=27;break;case 24:p=o._children[i],p.context=a,p.update();case 27:i++;case 28:l++,t.next=11;break;case 31:return this._children.splice(i).forEach(function(t){t.remove()}),t.next=34,u;case 34:case"end":return t.stop()}},t,this)}))},e.prototype.update2=function(){var t,e=this.as,n=this.each,r=this.key||"key",i=0,o=this,a=this.view;n instanceof c.Call&&(n=n.call()),console.log(n),s(n,function(n,s){var u;e?(t={},t[r]=s,t[e]=n):t=n,t.parent=o.view.context,i>=o._children.length?(u=o.childTemplate.view(t,{parent:a}),o._children.push(u),o.section.appendChild(u.render(t))):(u=o._children[i],u.context=t,u.update()),i++}),this._children.splice(i).forEach(function(t){t.remove()})},e.prototype.setAttribute=function(t,e){this[t]=e},e}(u.BaseComponent);e.Repeat=l,e.repeat=l},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){for(var r,i="string"==typeof e?e.split("."):e,o=t,s=0,a=i.length-1;s<a;s++)r=i[s],o[r]||(o[r]={}),o=o[r];return o[i[i.length-1]]=n,n}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(40),c=n(35),l=u.debug("view"),f=function(){function t(e,n,r,i){o(this,t),this.gettable=r,this.settable=i,this.view=e,this.path=n}return t.prototype.value=function(t){return 0===arguments.length?this.gettable?this.view.get(this.path):void 0:void(this.settable&&this.view.set(this.path,t))},t.prototype.toString=function(){return this.view.get(this.path)||""},t}();e.Reference=f;var h=function(){function t(e,n,r){o(this,t),this.view=e,this.path=n,this.value=r,this.assign=u.bind(this.assign,this),this.toString=u.bind(this.toString,this)}return t.prototype.assign=function(){this.view.set(this.path,this.value.call(this))},t.prototype.toString=function(){var t=this.value.call(this);return t?String(t):""},t}();e.Assignment=h;var p=function(){function t(e,n,r){o(this,t),this.view=e,this.keypath=n,this.params=r||[]}return t.prototype.call=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e=e||[];var r=this.view.get(this.keypath);return null==r||"function"!=typeof r?this.view.trigger("error",this,new Error("function does not exists or is not a function")):r.apply(this.view,this.params.concat(e))},t.prototype.toString=function(){var t=this.call();return t?String(t):""},t}();e.Call=p;var d=function(t){function e(n,i,s){var a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];o(this,e);var u=r(this,t.call(this,n,i,s,a));return u.context=s,u._callers={},u._getters={},a.parent&&(u.parent=a.parent),a.delegator&&(u._delegator=a.delegator),u}return i(e,t),e.prototype.getDelegator=function(){if(this._delegator)return this._delegator;for(var t=this.parent;void 0!=t;){if(t._delegator)return t._delegator;t=t.parent}return null},e.prototype.addListener=function(e,n,r){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],o=this.getDelegator();return o?o.addListener(e,n,r,i):"function"==typeof r?t.prototype.addListener.call(this,e,n,r,i):void 0},e.prototype.removeListener=function(e,n,r){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],o=this.getDelegator();o?o.removeListener(e,n,r,i):"function"==typeof r&&t.prototype.removeListener.call(this,e,n,r,i)},e.prototype.get=function(t){if(this.context){var e,n="string"!=typeof t?t.join("."):t;try{var r;(r=this._getters[n])||(r=this._getters[n]=new Function("return this."+n)),e=r.call(this.context)}catch(i){e=void 0}return e=void 0!=e?e:this.parent?this.parent.get(t):void 0,l('get value "%s": %s',t,e),e}},e.prototype.set=function(t,e){if(l("set value %s on context %j",e,this.context),this.context){"string"==typeof t&&(t=t.split("."));s(this.context,t,e);this.updateLater()}},e.prototype.render=function(){var e=this;return t.prototype.render.call(this).then(function(t){return e.update()}).then(function(){return e.section.render()})},e.prototype.updateLater=function(){this._runloop.deferOnce(this)},e.prototype.ref=function(t,e,n){return l("reference %s, gettable: %o, settabble: %o",t,e,n),new f(this,t,e,n)},e.prototype.assign=function(t,e){return l("assignment %s %s",t,e),new h(this,t,e)},e.prototype.call=function(t,e){var n;if(l('call keypath "%s", args: "%o"',t,e),"string"!=typeof t&&(t=t.join(".")),!(n=this._callers[t])){var r=["this"].concat(t.split("."));r.pop(),n=this._callers[t]=new Function("params","return this."+t+".apply("+r.join(".")+", params);")}return new p(this,t,e)},a(e,[{key:"root",get:function(){if(null==this.parent)return this;for(var t=this,e=t;e;)e=e.parent,e&&(t=e);return t}}]),e}(c.View);e.View=d},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(53),o=n(55),s=n(56),a=n(57);r(n(54)),e.value=i.ValueAttribute,e.onclick=o.ClickAttribute,e.onenter=o.OnEnterAttribute,e.onescape=o.OnEscapeAttribute,e.onchange=o.ChangeAttribute,e.onscroll=o.ScrollAttribute,e.onfocus=o.OnFocusAttribute,e.onblur=o.BlurAttribute,e.checked=i.ValueAttribute,e.style=s.StyleAttribute,e.focus=a.FocusAttribute},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(54),a=n(51),u=n(40),c=["change","keyup","input"],l=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._onInput=u.bind(this._onInput,this,null);for(var t=c,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;this.ref.addEventListener(i,this._onInput)}},e.prototype.update=function(){var t=this.model=this.value;return t?t&&t instanceof a.Reference?(t.gettable&&this._elementValue(this._parseValue(t.value())),Promise.resolve()):Promise.reject(new Error("input value must be a reference. Make sure you have <~> defined")):Promise.resolve()},e.prototype._parseValue=function(t){if(null!=t&&""!==t)return t},e.prototype._onInput=function(t){clearInterval(this._autocompleteCheckInterval),!t||t.keyCode&&~[27].indexOf(t.keyCode)||t.stopPropagation();var e=this._parseValue(this._elementValue());this.model&&String(this.model.value())!=String(e)&&this.model.value(e)},e.prototype._elementValue=function(t){var e=this.ref,n=/checkbox/.test(e.type),r=/radio/.test(e.type),i=n||r,o=Object.prototype.hasOwnProperty.call(e,"value"),s=o||/input|textarea|checkbox/.test(e.nodeName.toLowerCase()),a=/select/i.test(e.nodeName);return arguments.length?(null==t?t="":clearInterval(this._autocompleteCheckInterval),void(i?r?String(t)===String(e.value)&&(e.checked=!0):e.checked=t:String(t)!==this._elementValue()&&(s||a?e.value=t:e.innerHTML=t))):n?Boolean(e.checked):s||a?e.value||"":e.innerHTML||""},e}(s.BaseAttribute);e.ValueAttribute=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,r,i,o){n(this,t),this.ref=e,this.key=r,this.value=i,this.view=o,this.initialize()}return t.prototype.initialize=function(){},t.prototype.update=function(){return Promise.resolve()},t.prototype.destroy=function(){},t.test=function(){},t}();e.BaseAttribute=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(54),u=n(51),c=n(40),l=c.debug("attributes:event"),f=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._onEvent=c.bind(this._onEvent,this)},e.prototype._onEvent=function(t){var e=void 0;if(e=this.value instanceof u.Assignment?this.value.assign:this.value,"function"!=typeof e&&!(e instanceof u.Call))throw new Error("[event] value is not a function or a Callable");if(l("fired event: %s",this._event),e instanceof u.Call)e.call();else if("function"==typeof e)return e(t);t.preventDefault()},e.prototype.destroy=function(){l("removed event listener %s: %o",this._event,this.value),this.view.removeListener(this.ref,this._event,this._onEvent)},s(e,[{key:"event",set:function(t){this._event&&(l("added event listener %s: %o",this._event,this.value),this.view.removeListener(this.ref,this._event,this._onEvent)),this._event=t,l("added event listener %s: %o",this._event,this.value),this.view.addListener(this.ref,this._event,this._onEvent)},get:function(){return this._event}}]),e}(a.BaseAttribute);e.EventAttribute=f;var h=function(t){function e(n,o,s,a){r(this,e);var u=i(this,t.call(this,n,o,s,a));return u.keyCodes=[],u.event="keydown",u}return o(e,t),e.prototype._onEvent=function(e){~this.keyCodes.indexOf(e.keyCode)&&t.prototype._onEvent.call(this,e)},e}(f);e.KeyCodeAttribute=h;var p=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.event="change",a}return o(e,t),e}(f);e.ChangeAttribute=p;var d=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.event="click",a}return o(e,t),e}(f);e.ClickAttribute=d;var y=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.event="scroll",a}return o(e,t),e}(f);e.ScrollAttribute=y;var v=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.event="focus",a}return o(e,t),e}(f);e.OnFocusAttribute=v;var g=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.event="blur",a}return o(e,t),e}(f);e.BlurAttribute=g;var m=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.keyCodes=[13],a}return o(e,t),e}(h);e.OnEnterAttribute=m;var b=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.KeyCodes=[27],a}return o(e,t),e}(h);e.OnEscapeAttribute=b},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(54),a=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._currentStyles={}},e.prototype.update=function(){var t=this.value;if("string"==typeof t)return this.ref.setAttribute("style",t),Promise.resolve();var e={};for(var n in t){var r=t[n];r!==this._currentStyles[n]&&(e[n]=this._currentStyles[n]=r||"")}for(var i in e)this.ref.style[i]=e[i];return Promise.resolve()},e}(s.BaseAttribute);e.StyleAttribute=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(54),a=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){},e.prototype.update=function(){if(!this.value)return Promise.resolve();if(this.ref.focus){var t=this;setTimeout(function(){t.ref.focus()},1)}return Promise.resolve()},e}(s.BaseAttribute);e.FocusAttribute=a},function(t,e){"use strict";function n(t){return String(t).toUpperCase()}function r(t){return String(t).toLowerCase()}function i(t){var e;return e=String(t),e.substr(0,1).toUpperCase()+e.substr(1)}function o(t,e,n){return JSON.stringify.apply(JSON,arguments)}function s(t){return s(t)}e.uppercase=n,e.lowercase=r,e.titlecase=i,e.json=o,e.isNaN=s,e.round=Math.round},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=o(t);return new Function("return "+n)()}function o(t){var e=new u;return e.transpile(t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=n(60);e.compile=i,e.transpile=o;var u=function(){function t(){r(this,t);for(var e in this)"_"===e.charAt(0)&&(this[e]=this[e].bind(this));this.transpile=this.transpile.bind(this)}return t.prototype.transpile=function(t){return this._root(a.parser.parse(t))},t.prototype._root=function(t){var e="(function(fragment, element, text, comment, dynamic, createBindingClass) {",n="fragment(["+this._children(t)+"])";return e+="'use strict';return "+n,e+="})"},t.prototype._expression=function(t){return this["_"+t[0]](t)},t.prototype._element=function(t){var e={},n=[];return t[2].forEach(function(r,i){var o=r[1],s=r[2],a=o.split(".");a.length>1?(e[a[0]]||(t=e[a[0]]=["element",a[0],[],[["element",t[1],n,t[3]]]]),e[a[0]][2].push([r[0],a[1],s])):n.push(r)}),this._element2(t)},t.prototype._doctype=function(t){return"text('<!DOCTYPE "+t[1]+">')"},t.prototype._children=function(t){for(t=t.concat();t.length;){var e=t[t.length-1];if("text"!==e[0])break;if(e[1]=e[1].replace(/[\s\r\n\t]+$/,""),!/^[\s\r\n\t]*$/.test(e[1]))break;t.pop()}return t.map(this._expression).join(", ")},t.prototype._element2=function(t){var e="element('"+t[1]+"'",n=[];e+=", {";e+=t[2].map(function(t){var e=t[1],r=t[2];return!r.length||1===r.length&&"string"===r[0][0]?"'"+e+"':"+(r.length?this._expression(r[0]):"true"):void n.push(t)}.bind(this)).filter(function(t){return!!t}).join(","),e+="}";var r=this._children(t[3]);if(r.length&&(e+=", "+r),e+=")",n.length){var i="",o="";n.forEach(function(t){var e=t[0];if(i+="this","block"===e)i+=".ref.nodeValue = "+this._expression(t[1]);else if("attribute"===e){var n=t[2].map(function(t){return"("+this._expression(t)+")"}.bind(this)).join("+");i+=".setAttribute('"+t[1]+"', "+n+");"}else"property"===e&&(i+=".setProperty('"+t[1]+"', "+this._expression(t[2])+");")}.bind(this)),i.length&&(i="function(context) {"+i+"}"),o.length&&(o="function() { var self = this; "+o+"}"),(i.length||o.length)&&(e="dynamic("+e+",",e+="createBindingClass("+(o.length?o:"void 0")+", "+(i?i:"void 0")+")",e+=")")}return e},t.prototype.__addReference=function(t){var e="_"+ ++this._refCounter;return this._refs[e]=t,e},t.prototype._block=function(t){var e="dynamic(text(), createBindingClass(void 0, function(context) {";return e+="this.ref.nodeValue = "+this._expression(t[1])+";",e+"}))"},t.prototype._text=function(t){return"text('"+t[1]+"')"},t.prototype._comment=function(t){return"comment('"+t[1]+"')"},t.prototype._hash=function(t){var e=t[1],n=[];for(var r in e)n.push("'"+r+"':"+this._expression(e[r]));return"{"+n.join(",")+"}"},t.prototype._script=function(t){return this._expression(t[1])},t.prototype._referenceKeyPath=function(t){var e=[],n=!1;return t.forEach(function(t){"string"!=typeof t?(n=!0,e.push(this._expression(t))):e.push(t)}.bind(this)),e=n?"["+e.map(function(e,n){return"string"==typeof t[n]?"'"+e+"'":e}).join(",")+"]":"'"+e.join(".")+"'"},t.prototype._reference=function(t){var e=this._referenceKeyPath(t[1]);if(t[2]){var n=!!~t[2].indexOf("<~"),r=!!~t[2].indexOf("~>");return"this.view.ref("+e+", "+n+", "+r+")"}return"this.view.get("+e+")"},t.prototype._string=function(t){return"'"+t[1]+"'"},t.prototype._operator=function(t){return this._expression(t[2])+t[1]+this._expression(t[3])},t.prototype._condition=function(t){return this._expression(t[1])+"?"+this._expression(t[2])+":"+this._expression(t[3])},t.prototype._literal=function(t){return t[1]},t.prototype._not=function(t){return"!"+this._expression(t[1])},t.prototype._negative=function(t){return"-"+this._expression(t[1])},t.prototype._call=function(t){var e="this.view.call("+this._referenceKeyPath(t[1][1])+", [";return e+=t[2].map(this._expression).join(","),e+"])"},t.prototype._modifier=function(t){return"this.options.modifiers."+t[1]+"("+t[2].map(this._expression).join(",")+")"},t.prototype._assign=function(t){return'this.view.assign("'+t[1][1]+'", function () { return '+this._expression(t[2])+";})"},t.prototype._group=function(t){return"("+this._expression(t[1])+")"},t.prototype.__findExpressions=function(t,e){var n=[];return this.__traverse(e,function(e){e[0]===t&&n.push(e)}),n},t.prototype.__traverse=function(t,e){e(t),t.forEach(function(t){t&&"object"===("undefined"==typeof t?"undefined":s(t))&&this.__traverse(t,e)}.bind(this))},t}()},function(t,e){"use strict";e.parser=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function n(t){function n(){return t.substring(Ci,ji)}function r(e){throw a(null,[{type:"other",description:e}],t.substring(Ci,ji),o(Ci,ji))}function i(e){var n,r,i=Ei[e];if(i)return i;for(n=e-1;!Ei[n];)n--;for(i=Ei[n],i={line:i.line,column:i.column,seenCR:i.seenCR};n<e;)r=t.charAt(n),"\n"===r?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return Ei[e]=i,i}function o(t,e){var n=i(t),r=i(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function s(t){ji<Pi||(ji>Pi&&(Pi=ji,Ai=[]),Ai.push(t))}function a(t,n,r,i){
function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var r,i,o,s=new Array(t.length);for(o=0;o<t.length;o++)s[o]=t[o].description;return r=t.length>1?s.slice(0,-1).join(", ")+" or "+s[t.length-1]:s[0],i=e?'"'+n(e)+'"':"end of input","Expected "+r+" but "+i+" found."}return null!==n&&o(n),new e(null!==t?t:s(n,r),n,r,i)}function u(){var t;return t=c()}function c(){var t,e;return t=ji,e=f(),e!==bt&&(Ci=t,e=Ot(e)),t=e}function l(){var e,n,r,i,o,a;if(e=ji,t.substr(ji,9)===xt?(n=xt,ji+=9):(n=bt,0===Si&&s(kt)),n!==bt)if(r=ft(),r!==bt){if(i=[],jt.test(t.charAt(ji))?(o=t.charAt(ji),ji++):(o=bt,0===Si&&s(Ct)),o!==bt)for(;o!==bt;)i.push(o),jt.test(t.charAt(ji))?(o=t.charAt(ji),ji++):(o=bt,0===Si&&s(Ct));else i=bt;i!==bt?(o=ft(),o!==bt?(62===t.charCodeAt(ji)?(a=Et,ji++):(a=bt,0===Si&&s(Pt)),a!==bt?(Ci=e,n=At(i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;else ji=e,e=bt;return e}function f(){var t,e,n;for(t=ji,e=[],n=y(),n===bt&&(n=p(),n===bt&&(n=g(),n===bt&&(n=h(),n===bt&&(n=m(),n===bt&&(n=A())))));n!==bt;)e.push(n),n=y(),n===bt&&(n=p(),n===bt&&(n=g(),n===bt&&(n=h(),n===bt&&(n=m(),n===bt&&(n=A())))));return e!==bt&&(Ci=t,e=St(e)),t=e}function h(){var e,n,r,i,o,a,u;if(e=ji,n=ft(),n!==bt)if(t.substr(ji,4)===Rt?(r=Rt,ji+=4):(r=bt,0===Si&&s(Tt)),r!==bt){if(i=[],o=ji,a=ji,Si++,t.substr(ji,3)===Mt?(u=Mt,ji+=3):(u=bt,0===Si&&s(Dt)),Si--,u===bt?a=void 0:(ji=a,a=bt),a!==bt?(u=lt(),u!==bt?(Ci=o,a=Nt(u),o=a):(ji=o,o=bt)):(ji=o,o=bt),o!==bt)for(;o!==bt;)i.push(o),o=ji,a=ji,Si++,t.substr(ji,3)===Mt?(u=Mt,ji+=3):(u=bt,0===Si&&s(Dt)),Si--,u===bt?a=void 0:(ji=a,a=bt),a!==bt?(u=lt(),u!==bt?(Ci=o,a=Nt(u),o=a):(ji=o,o=bt)):(ji=o,o=bt);else i=bt;i!==bt?(t.substr(ji,3)===Mt?(o=Mt,ji+=3):(o=bt,0===Si&&s(Dt)),o!==bt?(a=ft(),a!==bt?(Ci=e,n=Lt(i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;else ji=e,e=bt;return e===bt&&(e=l()),e}function p(){var e,n,r,i,o,a,u,c;if(e=ji,n=ft(),n!==bt)if(t.substr(ji,7)===It?(r=It,ji+=7):(r=bt,0===Si&&s(Ft)),r!==bt)if(i=x(),i!==bt)if(62===t.charCodeAt(ji)?(o=Et,ji++):(o=bt,0===Si&&s(Pt)),o!==bt){if(a=[],u=d(),u!==bt)for(;u!==bt;)a.push(u),u=d();else a=bt;a!==bt?(t.substr(ji,9)===Ht?(u=Ht,ji+=9):(u=bt,0===Si&&s(Bt)),u!==bt?(c=ft(),c!==bt?(Ci=e,n=qt(i,a),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;else ji=e,e=bt;else ji=e,e=bt;else ji=e,e=bt;return e}function d(){var e,n,r;return e=ji,n=ji,Si++,t.substr(ji,9)===Ht?(r=Ht,ji+=9):(r=bt,0===Si&&s(Bt)),Si--,r===bt?n=void 0:(ji=n,n=bt),n!==bt?(r=lt(),r!==bt?(Ci=e,n=$t(),e=n):(ji=e,e=bt)):(ji=e,e=bt),e}function y(){var e,n,r,i,o,a;return e=ji,60===t.charCodeAt(ji)?(n=Ut,ji++):(n=bt,0===Si&&s(zt)),n!==bt?(t.substr(ji,4)===Vt?(r=Vt,ji+=4):(r=bt,0===Si&&s(Jt)),r===bt&&(t.substr(ji,4)===Gt?(r=Gt,ji+=4):(r=bt,0===Si&&s(Kt)),r===bt&&(t.substr(ji,2)===Xt?(r=Xt,ji+=2):(r=bt,0===Si&&s(Zt)),r===bt&&(t.substr(ji,3)===Yt?(r=Yt,ji+=3):(r=bt,0===Si&&s(Qt)),r===bt&&(t.substr(ji,7)===Wt?(r=Wt,ji+=7):(r=bt,0===Si&&s(te)),r===bt&&(t.substr(ji,5)===ee?(r=ee,ji+=5):(r=bt,0===Si&&s(ne)),r===bt&&(t.substr(ji,2)===re?(r=re,ji+=2):(r=bt,0===Si&&s(ie)),r===bt&&(t.substr(ji,3)===oe?(r=oe,ji+=3):(r=bt,0===Si&&s(se)),r===bt&&(t.substr(ji,5)===ae?(r=ae,ji+=5):(r=bt,0===Si&&s(ue)),r===bt&&(t.substr(ji,6)===ce?(r=ce,ji+=6):(r=bt,0===Si&&s(le)),r===bt&&(t.substr(ji,4)===fe?(r=fe,ji+=4):(r=bt,0===Si&&s(he)),r===bt&&(t.substr(ji,4)===pe?(r=pe,ji+=4):(r=bt,0===Si&&s(de)),r===bt&&(t.substr(ji,5)===ye?(r=ye,ji+=5):(r=bt,0===Si&&s(ve)),r===bt&&(t.substr(ji,6)===ge?(r=ge,ji+=6):(r=bt,0===Si&&s(me)),r===bt&&(t.substr(ji,5)===be?(r=be,ji+=5):(r=bt,0===Si&&s(we)),r===bt&&(t.substr(ji,3)===_e?(r=_e,ji+=3):(r=bt,0===Si&&s(Oe))))))))))))))))),r!==bt?(i=x(),i!==bt?(62===t.charCodeAt(ji)?(o=Et,ji++):(o=bt,0===Si&&s(Pt)),o===bt&&(t.substr(ji,2)===xe?(o=xe,ji+=2):(o=bt,0===Si&&s(ke))),o===bt&&(o=null),o!==bt?(a=v(),a===bt&&(a=null),a!==bt?(Ci=e,n=je(r,i,a),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function v(){var e,n,r,i,o;return e=ji,n=ft(),n!==bt?(t.substr(ji,2)===Ce?(r=Ce,ji+=2):(r=bt,0===Si&&s(Ee)),r!==bt?(t.substr(ji,4)===Vt?(i=Vt,ji+=4):(i=bt,0===Si&&s(Jt)),i===bt&&(t.substr(ji,4)===Gt?(i=Gt,ji+=4):(i=bt,0===Si&&s(Kt)),i===bt&&(t.substr(ji,2)===Xt?(i=Xt,ji+=2):(i=bt,0===Si&&s(Zt)),i===bt&&(t.substr(ji,3)===Yt?(i=Yt,ji+=3):(i=bt,0===Si&&s(Qt)),i===bt&&(t.substr(ji,7)===Wt?(i=Wt,ji+=7):(i=bt,0===Si&&s(te)),i===bt&&(t.substr(ji,5)===ee?(i=ee,ji+=5):(i=bt,0===Si&&s(ne)),i===bt&&(t.substr(ji,2)===re?(i=re,ji+=2):(i=bt,0===Si&&s(ie)),i===bt&&(t.substr(ji,3)===oe?(i=oe,ji+=3):(i=bt,0===Si&&s(se)),i===bt&&(t.substr(ji,5)===ae?(i=ae,ji+=5):(i=bt,0===Si&&s(ue)),i===bt&&(t.substr(ji,6)===ce?(i=ce,ji+=6):(i=bt,0===Si&&s(le)),i===bt&&(t.substr(ji,4)===fe?(i=fe,ji+=4):(i=bt,0===Si&&s(he)),i===bt&&(t.substr(ji,4)===pe?(i=pe,ji+=4):(i=bt,0===Si&&s(de)),i===bt&&(t.substr(ji,5)===ye?(i=ye,ji+=5):(i=bt,0===Si&&s(ve)),i===bt&&(t.substr(ji,6)===ge?(i=ge,ji+=6):(i=bt,0===Si&&s(me)),i===bt&&(t.substr(ji,5)===be?(i=be,ji+=5):(i=bt,0===Si&&s(we)),i===bt&&(t.substr(ji,3)===_e?(i=_e,ji+=3):(i=bt,0===Si&&s(Oe))))))))))))))))),i!==bt?(62===t.charCodeAt(ji)?(o=Et,ji++):(o=bt,0===Si&&s(Pt)),o!==bt?(Ci=e,n=Pe(i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function g(){var t,e,n,r;return t=ji,e=w(),e!==bt?(n=f(),n!==bt?(r=k(),r!==bt?(Ci=t,e=Ae(e,n,r),t=e):(ji=t,t=bt)):(ji=t,t=bt)):(ji=t,t=bt),t===bt&&(t=_()),t}function m(){var t,e,n;if(t=ji,e=[],n=b(),n!==bt)for(;n!==bt;)e.push(n),n=b();else e=bt;return e!==bt&&(Ci=t,e=Se(e)),t=e}function b(){var e,n,r;return e=ji,n=ji,Si++,60===t.charCodeAt(ji)?(r=Ut,ji++):(r=bt,0===Si&&s(zt)),r===bt&&(t.substr(ji,2)===Re?(r=Re,ji+=2):(r=bt,0===Si&&s(Te))),Si--,r===bt?n=void 0:(ji=n,n=bt),n!==bt?(r=lt(),r!==bt?(Ci=e,n=$t(),e=n):(ji=e,e=bt)):(ji=e,e=bt),e}function w(){var e,n,r,i,o,a;return e=ji,n=ft(),n!==bt?(60===t.charCodeAt(ji)?(r=Ut,ji++):(r=bt,0===Si&&s(zt)),r!==bt?(i=O(),i!==bt?(62===t.charCodeAt(ji)?(o=Et,ji++):(o=bt,0===Si&&s(Pt)),o!==bt?(a=ft(),a!==bt?(Ci=e,n=Me(i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function _(){var e,n,r,i,o,a;return e=ji,n=ft(),n!==bt?(60===t.charCodeAt(ji)?(r=Ut,ji++):(r=bt,0===Si&&s(zt)),r!==bt?(i=O(),i!==bt?(t.substr(ji,2)===xe?(o=xe,ji+=2):(o=bt,0===Si&&s(ke)),o!==bt?(a=ft(),a!==bt?(Ci=e,n=De(i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function O(){var t,e,n;return t=ji,e=j(),e!==bt?(n=x(),n!==bt?(Ci=t,e=Ne(e,n),t=e):(ji=t,t=bt)):(ji=t,t=bt),t}function x(){var t,e,n,r;if(t=ji,e=ft(),e!==bt){for(n=[],r=C();r!==bt;)n.push(r),r=C();n!==bt?(r=ft(),r!==bt?(Ci=t,e=Le(n),t=e):(ji=t,t=bt)):(ji=t,t=bt)}else ji=t,t=bt;return t}function k(){var e,n,r,i;return e=ji,t.substr(ji,2)===Ce?(n=Ce,ji+=2):(n=bt,0===Si&&s(Ee)),n!==bt?(r=j(),r!==bt?(62===t.charCodeAt(ji)?(i=Et,ji++):(i=bt,0===Si&&s(Pt)),i!==bt?(Ci=e,n=Pe(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function j(){var e,n,r,i;if(e=ji,n=ft(),n!==bt){if(r=[],Ie.test(t.charAt(ji))?(i=t.charAt(ji),ji++):(i=bt,0===Si&&s(Fe)),i!==bt)for(;i!==bt;)r.push(i),Ie.test(t.charAt(ji))?(i=t.charAt(ji),ji++):(i=bt,0===Si&&s(Fe));else r=bt;r!==bt?(Ci=e,n=He(r),e=n):(ji=e,e=bt)}else ji=e,e=bt;return e}function C(){var e,n,r,i,o,a;return e=ji,n=j(),n!==bt?(r=ft(),r!==bt?(61===t.charCodeAt(ji)?(i=Be,ji++):(i=bt,0===Si&&s(qe)),i!==bt?(o=ft(),o!==bt?(a=E(),a!==bt?(Ci=e,n=$e(n,a),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=ji,n=j(),n!==bt?(r=ft(),r!==bt?(61===t.charCodeAt(ji)?(i=Be,ji++):(i=bt,0===Si&&s(qe)),i!==bt?(o=ft(),o!==bt?(a=P(),a!==bt?(Ci=e,n=Ue(n,a),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=ji,n=j(),n!==bt&&(Ci=e,n=ze(n)),e=n)),e}function E(){var e,n,r,i,o,a,u,c;if(e=ji,34===t.charCodeAt(ji)?(n=Ve,ji++):(n=bt,0===Si&&s(Je)),n!==bt){if(r=[],i=P(),i===bt){if(i=ji,o=[],a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(Ge.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(Ke)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(Ge.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(Ke)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt);else o=bt;o!==bt&&(Ci=i,o=Xe()),i=o}for(;i!==bt;)if(r.push(i),i=P(),i===bt){if(i=ji,o=[],a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(Ge.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(Ke)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(Ge.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(Ke)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt);else o=bt;o!==bt&&(Ci=i,o=Xe()),i=o}r!==bt?(34===t.charCodeAt(ji)?(i=Ve,ji++):(i=bt,0===Si&&s(Je)),i!==bt?(Ci=e,n=Ze(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;if(e===bt)if(e=ji,39===t.charCodeAt(ji)?(n=Ye,ji++):(n=bt,0===Si&&s(Qe)),n!==bt){if(r=[],i=P(),i===bt){if(i=ji,o=[],a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(We.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(We.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt);else o=bt;o!==bt&&(Ci=i,o=Xe()),i=o}for(;i!==bt;)if(r.push(i),i=P(),i===bt){if(i=ji,o=[],a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(We.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ji,u=ji,Si++,t.substr(ji,2)===Re?(c=Re,ji+=2):(c=bt,0===Si&&s(Te)),Si--,c===bt?u=void 0:(ji=u,u=bt),u!==bt?(We.test(t.charAt(ji))?(c=t.charAt(ji),ji++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ji=a,a=bt)):(ji=a,a=bt);else o=bt;o!==bt&&(Ci=i,o=Xe()),i=o}r!==bt?(39===t.charCodeAt(ji)?(i=Ye,ji++):(i=bt,0===Si&&s(Qe)),i!==bt?(Ci=e,n=Ze(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;return e}function P(){var e,n,r,i,o,a;return e=ji,t.substr(ji,2)===Re?(n=Re,ji+=2):(n=bt,0===Si&&s(Te)),n!==bt?(r=ft(),r!==bt?(i=S(),i!==bt?(o=ft(),o!==bt?(t.substr(ji,2)===en?(a=en,ji+=2):(a=bt,0===Si&&s(nn)),a!==bt?(Ci=e,n=rn(i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function A(){var t,e;return t=ji,e=P(),e!==bt&&(Ci=t,e=on(e)),t=e}function S(){var e,n,r,i,o,a;return e=ji,n=M(),n!==bt?(63===t.charCodeAt(ji)?(r=sn,ji++):(r=bt,0===Si&&s(an)),r!==bt?(i=S(),i!==bt?(58===t.charCodeAt(ji)?(o=un,ji++):(o=bt,0===Si&&s(cn)),o!==bt?(a=S(),a!==bt?(Ci=e,n=ln(n,i,a),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=M()),e}function R(){var e,n,r,i;return e=ji,40===t.charCodeAt(ji)?(n=fn,ji++):(n=bt,0===Si&&s(hn)),n!==bt?(r=T(),r!==bt?(41===t.charCodeAt(ji)?(i=pn,ji++):(i=bt,0===Si&&s(dn)),i!==bt?(Ci=e,n=yn(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=ji,t.substr(ji,2)===vn?(n=vn,ji+=2):(n=bt,0===Si&&s(gn)),n!==bt&&(Ci=e,n=mn()),e=n),e}function T(){var e,n,r,i,o,a;if(e=ji,n=S(),n!==bt){for(r=[],i=ji,44===t.charCodeAt(ji)?(o=bn,ji++):(o=bt,0===Si&&s(wn)),o!==bt?(a=S(),a!==bt?(o=[o,a],i=o):(ji=i,i=bt)):(ji=i,i=bt);i!==bt;)r.push(i),i=ji,44===t.charCodeAt(ji)?(o=bn,ji++):(o=bt,0===Si&&s(wn)),o!==bt?(a=S(),a!==bt?(o=[o,a],i=o):(ji=i,i=bt)):(ji=i,i=bt);r!==bt?(Ci=e,n=_n(n,r),e=n):(ji=e,e=bt)}else ji=e,e=bt;return e}function M(){var e,n,r,i;return e=ji,n=F(),n!==bt?(61===t.charCodeAt(ji)?(r=Be,ji++):(r=bt,0===Si&&s(qe)),r!==bt?(i=M(),i!==bt?(Ci=e,n=On(n,i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=D()),e}function D(){var e,n,r,i;return e=ji,n=N(),n!==bt?(t.substr(ji,2)===xn?(r=xn,ji+=2):(r=bt,0===Si&&s(kn)),r===bt&&(t.substr(ji,2)===jn?(r=jn,ji+=2):(r=bt,0===Si&&s(Cn)),r===bt&&(t.substr(ji,3)===En?(r=En,ji+=3):(r=bt,0===Si&&s(Pn)),r===bt&&(t.substr(ji,2)===An?(r=An,ji+=2):(r=bt,0===Si&&s(Sn)),r===bt&&(t.substr(ji,3)===Rn?(r=Rn,ji+=3):(r=bt,0===Si&&s(Tn)),r===bt&&(t.substr(ji,2)===Mn?(r=Mn,ji+=2):(r=bt,0===Si&&s(Dn)),r===bt&&(t.substr(ji,3)===Nn?(r=Nn,ji+=3):(r=bt,0===Si&&s(Ln)),r===bt&&(t.substr(ji,2)===In?(r=In,ji+=2):(r=bt,0===Si&&s(Fn)),r===bt&&(62===t.charCodeAt(ji)?(r=Et,ji++):(r=bt,0===Si&&s(Pt)),r===bt&&(t.substr(ji,3)===Hn?(r=Hn,ji+=3):(r=bt,0===Si&&s(Bn)),r===bt&&(t.substr(ji,2)===qn?(r=qn,ji+=2):(r=bt,0===Si&&s($n)),r===bt&&(60===t.charCodeAt(ji)?(r=Ut,ji++):(r=bt,0===Si&&s(zt)),r===bt&&(43===t.charCodeAt(ji)?(r=Un,ji++):(r=bt,0===Si&&s(zn)),r===bt&&(45===t.charCodeAt(ji)?(r=Vn,ji++):(r=bt,0===Si&&s(Jn)),r===bt&&(37===t.charCodeAt(ji)?(r=Gn,ji++):(r=bt,0===Si&&s(Kn)),r===bt&&(42===t.charCodeAt(ji)?(r=Xn,ji++):(r=bt,0===Si&&s(Zn)),r===bt&&(47===t.charCodeAt(ji)?(r=Yn,ji++):(r=bt,0===Si&&s(Qn)))))))))))))))))),r!==bt?(i=D(),i!==bt?(Ci=e,n=Wn(n,r,i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=N()),e}function N(){var t,e,n,r;return t=ji,e=ft(),e!==bt?(n=L(),n!==bt?(r=ft(),r!==bt?(Ci=t,e=tr(n),t=e):(ji=t,t=bt)):(ji=t,t=bt)):(ji=t,t=bt),t}function L(){var t,e,n,r;if(t=ji,e=H(),e!==bt){for(n=[],r=I();r!==bt;)n.push(r),r=I();n!==bt?(Ci=t,e=er(e,n),t=e):(ji=t,t=bt)}else ji=t,t=bt;return t===bt&&(t=Z(),t===bt&&(t=F())),t}function I(){var e,n,r,i,o,a;return e=ji,124===t.charCodeAt(ji)?(n=nr,ji++):(n=bt,0===Si&&s(rr)),n!==bt?(r=ft(),r!==bt?(i=et(),i!==bt?(o=R(),o===bt&&(o=null),o!==bt?(a=ft(),a!==bt?(Ci=e,n=ir(i,o),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function F(){var t,e,n,r;return t=ji,e=ft(),e!==bt?(n=B(),n!==bt?(r=ft(),r!==bt?(Ci=t,e=or(n),t=e):(ji=t,t=bt)):(ji=t,t=bt)):(ji=t,t=bt),t}function H(){var e,n,r;return e=ji,33===t.charCodeAt(ji)?(n=sr,ji++):(n=bt,0===Si&&s(ar)),n!==bt?(r=H(),r!==bt?(Ci=e,n=ur(n,r),e=n):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=ji,33===t.charCodeAt(ji)?(n=sr,ji++):(n=bt,0===Si&&s(ar)),n===bt&&(45===t.charCodeAt(ji)?(n=Vn,ji++):(n=bt,0===Si&&s(Jn))),n!==bt?(r=H(),r!==bt?(Ci=e,n=cr(n,r),e=n):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(e=z(),e===bt&&(e=Z(),e===bt&&(e=F())))),e}function B(){var t;return t=U(),t===bt&&(t=nt(),t===bt&&(t=q(),t===bt&&(t=at(),t===bt&&(t=Y())))),t}function q(){var e,n,r,i,o,a;if(e=ji,n=ji,45===t.charCodeAt(ji)?(r=Vn,ji++):(r=bt,0===Si&&s(Jn)),r===bt&&(r=null),r!==bt){if(i=ji,o=[],lr.test(t.charAt(ji))?(a=t.charAt(ji),ji++):(a=bt,0===Si&&s(fr)),a!==bt)for(;a!==bt;)o.push(a),lr.test(t.charAt(ji))?(a=t.charAt(ji),ji++):(a=bt,0===Si&&s(fr));else o=bt;o!==bt?(a=$(),a===bt&&(a=null),a!==bt?(o=[o,a],i=o):(ji=i,i=bt)):(ji=i,i=bt),i===bt&&(i=$()),i!==bt?(r=[r,i],n=r):(ji=n,n=bt)}else ji=n,n=bt;return n!==bt&&(Ci=e,n=hr(n)),e=n}function $(){var e,n,r,i;if(e=ji,46===t.charCodeAt(ji)?(n=pr,ji++):(n=bt,0===Si&&s(dr)),n!==bt){if(r=[],lr.test(t.charAt(ji))?(i=t.charAt(ji),ji++):(i=bt,0===Si&&s(fr)),i!==bt)for(;i!==bt;)r.push(i),lr.test(t.charAt(ji))?(i=t.charAt(ji),ji++):(i=bt,0===Si&&s(fr));else r=bt;r!==bt?(n=[n,r],e=n):(ji=e,e=bt)}else ji=e,e=bt;return e}function U(){var e,n,r,i;return e=ji,40===t.charCodeAt(ji)?(n=fn,ji++):(n=bt,0===Si&&s(hn)),n!==bt?(r=S(),r!==bt?(41===t.charCodeAt(ji)?(i=pn,ji++):(i=bt,0===Si&&s(dn)),i!==bt?(Ci=e,n=yr(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function z(){var t,e;return t=ji,e=V(),e===bt&&(e=J(),e===bt&&(e=X(),e===bt&&(e=G(),e===bt&&(e=K())))),e!==bt&&(Ci=t,e=vr(e)),t=e}function V(){var e,n;return e=ji,t.substr(ji,4)===gr?(n=gr,ji+=4):(n=bt,0===Si&&s(mr)),n===bt&&(t.substr(ji,5)===br?(n=br,ji+=5):(n=bt,0===Si&&s(wr))),n!==bt&&(Ci=e,n=_r(n)),e=n}function J(){var e,n;return e=ji,t.substr(ji,9)===Or?(n=Or,ji+=9):(n=bt,0===Si&&s(xr)),n!==bt&&(Ci=e,n=kr()),e=n}function G(){var e,n;return e=ji,t.substr(ji,3)===jr?(n=jr,ji+=3):(n=bt,0===Si&&s(Cr)),n!==bt&&(Ci=e,n=Er()),e=n}function K(){var e,n;return e=ji,t.substr(ji,8)===Pr?(n=Pr,ji+=8):(n=bt,0===Si&&s(Ar)),n!==bt&&(Ci=e,n=Sr()),e=n}function X(){var e,n;return e=ji,t.substr(ji,4)===Rr?(n=Rr,ji+=4):(n=bt,0===Si&&s(Tr)),n===bt&&(t.substr(ji,4)===Mr?(n=Mr,ji+=4):(n=bt,0===Si&&s(Dr))),n!==bt&&(Ci=e,n=Nr()),e=n}function Z(){var t,e,n;return t=ji,e=F(),e!==bt?(n=R(),n!==bt?(Ci=t,e=Lr(e,n),t=e):(ji=t,t=bt)):(ji=t,t=bt),t}function Y(){var e,n,r,i,o,a;if(e=ji,94===t.charCodeAt(ji)?(n=Ir,ji++):(n=bt,0===Si&&s(Fr)),n===bt&&(t.substr(ji,2)===Hr?(n=Hr,ji+=2):(n=bt,0===Si&&s(Br)),n===bt&&(t.substr(ji,3)===qr?(n=qr,ji+=3):(n=bt,0===Si&&s($r)),n===bt&&(126===t.charCodeAt(ji)?(n=Ur,ji++):(n=bt,0===Si&&s(zr)),n===bt&&(t.substr(ji,2)===Vr?(n=Vr,ji+=2):(n=bt,0===Si&&s(Jr)))))),n===bt&&(n=null),n!==bt)if(r=ft(),r!==bt)if(i=et(),i!==bt){for(o=[],a=Q();a!==bt;)o.push(a),a=Q();o!==bt?(a=ft(),a!==bt?(Ci=e,n=Gr(n,i,o),e=n):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;else ji=e,e=bt;else ji=e,e=bt;return e}function Q(){var t;return t=W(),t===bt&&(t=tt()),t}function W(){var e,n,r;return e=ji,46===t.charCodeAt(ji)?(n=pr,ji++):(n=bt,0===Si&&s(dr)),n!==bt?(r=et(),r!==bt?(Ci=e,n=Kr(r),e=n):(ji=e,e=bt)):(ji=e,e=bt),e}function tt(){var e,n,r,i;return e=ji,91===t.charCodeAt(ji)?(n=Xr,ji++):(n=bt,0===Si&&s(Zr)),n!==bt?(r=S(),r!==bt?(93===t.charCodeAt(ji)?(i=Yr,ji++):(i=bt,0===Si&&s(Qr)),i!==bt?(Ci=e,n=Wr(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function et(){var e,n,r;if(e=ji,n=[],ti.test(t.charAt(ji))?(r=t.charAt(ji),ji++):(r=bt,0===Si&&s(ei)),r!==bt)for(;r!==bt;)n.push(r),ti.test(t.charAt(ji))?(r=t.charAt(ji),ji++):(r=bt,0===Si&&s(ei));else n=bt;return n!==bt&&(Ci=e,n=ni(n)),e=n}function nt(){var e,n,r,i,o,a;return e=ji,123===t.charCodeAt(ji)?(n=ri,ji++):(n=bt,0===Si&&s(ii)),n!==bt?(r=ft(),r!==bt?(i=rt(),i===bt&&(i=null),i!==bt?(o=ft(),o!==bt?(125===t.charCodeAt(ji)?(a=oi,ji++):(a=bt,0===Si&&s(si)),a!==bt?(Ci=e,n=ai(i),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function rt(){var t,e;return t=ji,e=it(),e!==bt&&(Ci=t,e=ui(e)),t=e}function it(){var e,n,r,i,o,a;if(e=ji,n=ot(),n!==bt){for(r=[],i=ji,44===t.charCodeAt(ji)?(o=bn,ji++):(o=bt,0===Si&&s(wn)),o!==bt?(a=it(),a!==bt?(o=[o,a],i=o):(ji=i,i=bt)):(ji=i,i=bt);i!==bt;)r.push(i),i=ji,44===t.charCodeAt(ji)?(o=bn,ji++):(o=bt,0===Si&&s(wn)),o!==bt?(a=it(),a!==bt?(o=[o,a],i=o):(ji=i,i=bt)):(ji=i,i=bt);r!==bt?(Ci=e,n=ci(n,r),e=n):(ji=e,e=bt)}else ji=e,e=bt;return e}function ot(){var e,n,r,i,o,a;return e=ji,n=ft(),n!==bt?(r=st(),r!==bt?(i=ft(),i!==bt?(58===t.charCodeAt(ji)?(o=un,ji++):(o=bt,0===Si&&s(cn)),o!==bt?(a=S(),a===bt&&(a=null),a!==bt?(Ci=e,n=li(r,a),e=n):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt)):(ji=e,e=bt),e}function st(){var t,e;return t=ji,e=at(),e!==bt&&(Ci=t,e=fi(e)),t=e,t===bt&&(t=ji,e=et(),e!==bt&&(Ci=t,e=hi(e)),t=e),t}function at(){var e,n,r,i;if(Si++,e=ji,34===t.charCodeAt(ji)?(n=Ve,ji++):(n=bt,0===Si&&s(Je)),n!==bt){for(r=[],i=ut();i!==bt;)r.push(i),i=ut();r!==bt?(34===t.charCodeAt(ji)?(i=Ve,ji++):(i=bt,0===Si&&s(Je)),i!==bt?(Ci=e,n=di(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;if(e===bt)if(e=ji,39===t.charCodeAt(ji)?(n=Ye,ji++):(n=bt,0===Si&&s(Qe)),n!==bt){for(r=[],i=ct();i!==bt;)r.push(i),i=ct();r!==bt?(39===t.charCodeAt(ji)?(i=Ye,ji++):(i=bt,0===Si&&s(Qe)),i!==bt?(Ci=e,n=di(r),e=n):(ji=e,e=bt)):(ji=e,e=bt)}else ji=e,e=bt;return Si--,e===bt&&(n=bt,0===Si&&s(pi)),e}function ut(){var e,n,r;return e=ji,n=ji,Si++,34===t.charCodeAt(ji)?(r=Ve,ji++):(r=bt,0===Si&&s(Je)),r===bt&&(92===t.charCodeAt(ji)?(r=yi,ji++):(r=bt,0===Si&&s(vi))),Si--,r===bt?n=void 0:(ji=n,n=bt),n!==bt?(r=lt(),r!==bt?(Ci=e,n=gi(),e=n):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(t.substr(ji,2)===mi?(e=mi,ji+=2):(e=bt,0===Si&&s(bi))),e}function ct(){var e,n,r;return e=ji,n=ji,Si++,39===t.charCodeAt(ji)?(r=Ye,ji++):(r=bt,0===Si&&s(Qe)),r===bt&&(92===t.charCodeAt(ji)?(r=yi,ji++):(r=bt,0===Si&&s(vi))),Si--,r===bt?n=void 0:(ji=n,n=bt),n!==bt?(r=lt(),r!==bt?(Ci=e,n=gi(),e=n):(ji=e,e=bt)):(ji=e,e=bt),e===bt&&(t.substr(ji,2)===wi?(e=wi,ji+=2):(e=bt,0===Si&&s(_i))),e}function lt(){var e;return t.length>ji?(e=t.charAt(ji),ji++):(e=bt,0===Si&&s(Oi)),e}function ft(){var e,n;for(e=[],xi.test(t.charAt(ji))?(n=t.charAt(ji),ji++):(n=bt,0===Si&&s(ki));n!==bt;)e.push(n),xi.test(t.charAt(ji))?(n=t.charAt(ji),ji++):(n=bt,0===Si&&s(ki));return e}function ht(t){return t.replace(/(^\s+)|(\s+$)/,"").replace(/[\r\n]/g,"\\n")}function pt(t){return t.replace(/[ \r\n\t]+/g," ")}function dt(t){return t=t.filter(function(t){return!/^[\n\t\r]+$/.test(t.value)}),1===t.length&&"string"===t[0].type?t[0]:t}function yt(t){function e(t){for(var e,n=t.length;n--&&(e=t[n],"textNode"==e.type&&!/\S/.test(e.value)&&!e.decoded);)t.splice(n,1);return t}return e(e(t.reverse()).reverse())}function vt(t){return t.replace(/[\n\r]+/g,"\\n").replace(/'/g,"\\'")}var gt,mt=arguments.length>1?arguments[1]:{},bt={},wt={Start:u},_t=u,Ot=function(t){return t},xt="<!DOCTYPE",kt={type:"literal",value:"<!DOCTYPE",description:'"<!DOCTYPE"'},jt=/^[^>]/,Ct={type:"class",value:"[^>]",description:"[^>]"},Et=">",Pt={type:"literal",value:">",description:'">"'},At=function(t){return["doctype",t.join("")]},St=function(t){return yt(t)},Rt="<!--",Tt={type:"literal",value:"<!--",description:'"<!--"'},Mt="-->",Dt={type:"literal",value:"-->",description:'"-->"'},Nt=function(t){return t},Lt=function(t){return["comment",vt(ht(t.join("")))]},It="<script",Ft={type:"literal",value:"<script",description:'"<script"'},Ht="</script>",Bt={type:"literal",value:"</script>",description:'"</script>"'},qt=function(t,e){return["element","script",t,[["text",vt(e.join(""))]]]},$t=function(){return n()},Ut="<",zt={type:"literal",value:"<",description:'"<"'},Vt="area",Jt={type:"literal",value:"area",description:'"area"'},Gt="base",Kt={type:"literal",value:"base",description:'"base"'},Xt="br",Zt={type:"literal",value:"br",description:'"br"'},Yt="col",Qt={type:"literal",value:"col",description:'"col"'},Wt="command",te={type:"literal",value:"command",description:'"command"'},ee="embed",ne={type:"literal",value:"embed",description:'"embed"'},re="hr",ie={type:"literal",value:"hr",description:'"hr"'},oe="img",se={type:"literal",value:"img",description:'"img"'},ae="input",ue={type:"literal",value:"input",description:'"input"'},ce="keygen",le={type:"literal",value:"keygen",description:'"keygen"'},fe="link",he={type:"literal",value:"link",description:'"link"'},pe="meta",de={type:"literal",value:"meta",description:'"meta"'},ye="param",ve={type:"literal",value:"param",description:'"param"'},ge="source",me={type:"literal",value:"source",description:'"source"'},be="track",we={type:"literal",value:"track",description:'"track"'},_e="wbr",Oe={type:"literal",value:"wbr",description:'"wbr"'},xe="/>",ke={type:"literal",value:"/>",description:'"/>"'},je=function(t,e,n){return n&&t!=n.name&&r("</"+t+">"),["element",t,e,[]]},Ce="</",Ee={type:"literal",value:"</",description:'"</"'},Pe=function(t){return{name:t}},Ae=function(t,e,n){return t.name!=n.name&&r("</"+t.name+">"),["element",t.name,t.attributes,e]},Se=function(t){return["text",vt(pt(t.join("")))]},Re="{{",Te={type:"literal",value:"{{",description:'"{{"'},Me=function(t){return t},De=function(t){return["element",t.name,t.attributes,[]]},Ne=function(t,e){return{name:t,attributes:e}},Le=function(t){return t},Ie=/^[a-zA-Z0-9:_.\-]/,Fe={type:"class",value:"[a-zA-Z0-9:_\\.\\-]",description:"[a-zA-Z0-9:_\\.\\-]"},He=function(t){return t.join("")},Be="=",qe={type:"literal",value:"=",description:'"="'},$e=function(t,e){return["attribute",t,e]},Ue=function(t,e){return["property",t,e]},ze=function(t){return["attribute",t,[]]},Ve='"',Je={type:"literal",value:'"',description:'"\\""'},Ge=/^[^"]/,Ke={type:"class",value:'[^"]',description:'[^"]'},Xe=function(){return["string",n()]},Ze=function(t){return dt(t)},Ye="'",Qe={type:"literal",value:"'",description:'"\'"'},We=/^[^']/,tn={type:"class",value:"[^']",description:"[^']"},en="}}",nn={type:"literal",value:"}}",description:'"}}"'},rn=function(t){return["script",t]},on=function(t){return["block",t[1]]},sn="?",an={type:"literal",value:"?",description:'"?"'},un=":",cn={type:"literal",value:":",description:'":"'},ln=function(t,e,n){return["condition",t,e,n]},fn="(",hn={type:"literal",value:"(",description:'"("'},pn=")",dn={type:"literal",value:")",description:'")"'},yn=function(t){return t},vn="()",gn={type:"literal",value:"()",description:'"()"'},mn=function(){return[]},bn=",",wn={type:"literal",value:",",description:'","'},_n=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},On=function(t,e){return["assign",t,e]},xn="&&",kn={type:"literal",value:"&&",description:'"&&"'},jn="||",Cn={type:"literal",value:"||",description:'"||"'},En="===",Pn={type:"literal",value:"===",description:'"==="'},An="==",Sn={type:"literal",value:"==",description:'"=="'},Rn="!==",Tn={type:"literal",value:"!==",description:'"!=="'},Mn="!=",Dn={type:"literal",value:"!=",description:'"!="'},Nn=">==",Ln={type:"literal",value:">==",description:'">=="'},In=">=",Fn={type:"literal",value:">=",description:'">="'},Hn="<==",Bn={type:"literal",value:"<==",description:'"<=="'},qn="<=",$n={type:"literal",value:"<=",description:'"<="'},Un="+",zn={type:"literal",value:"+",description:'"+"'},Vn="-",Jn={type:"literal",value:"-",description:'"-"'},Gn="%",Kn={type:"literal",value:"%",description:'"%"'},Xn="*",Zn={type:"literal",value:"*",description:'"*"'},Yn="/",Qn={type:"literal",value:"/",description:'"/"'},Wn=function(t,e,n){return["operator",e,t,n]},tr=function(t){return t},er=function(t,e){for(var n=0,r=e.length;n<r;n++)t=["modifier",e[n].name,[t].concat(e[n].parameters)];return t},nr="|",rr={type:"literal",value:"|",description:'"|"'},ir=function(t,e){return{name:t,parameters:e||[]}},or=function(t){return t},sr="!",ar={type:"literal",value:"!",description:'"!"'},ur=function(t,e){return["not",e]},cr=function(t,e){return["negative",e]},lr=/^[0-9]/,fr={type:"class",value:"[0-9]",description:"[0-9]"},hr=function(t){return["literal",parseFloat(n())]},pr=".",dr={type:"literal",value:".",description:'"."'},yr=function(t){return["group",t]},vr=function(t){return t},gr="true",mr={type:"literal",value:"true",description:'"true"'},br="false",wr={type:"literal",value:"false",description:'"false"'},_r=function(t){return["literal","true"===t]},Or="undefined",xr={type:"literal",value:"undefined",description:'"undefined"'},kr=function(){return["literal",void 0]},jr="NaN",Cr={type:"literal",value:"NaN",description:'"NaN"'},Er=function(){return["literal",NaN]},Pr="Infinity",Ar={type:"literal",value:"Infinity",description:'"Infinity"'},Sr=function(){return["literal",1/0]},Rr="null",Tr={type:"literal",value:"null",description:'"null"'},Mr="NULL",Dr={type:"literal",value:"NULL",description:'"NULL"'},Nr=function(){return["literal",null]},Lr=function(t,e){return["call",t,e]},Ir="^",Fr={type:"literal",value:"^",description:'"^"'},Hr="~>",Br={type:"literal",value:"~>",description:'"~>"'},qr="<~>",$r={type:"literal",value:"<~>",description:'"<~>"'},Ur="~",zr={type:"literal",value:"~",description:'"~"'},Vr="<~",Jr={type:"literal",value:"<~",description:'"<~"'},Gr=function(t,e,n){return["reference",[e].concat(n),t]},Kr=function(t){return t},Xr="[",Zr={type:"literal",value:"[",description:'"["'},Yr="]",Qr={type:"literal",value:"]",description:'"]"'},Wr=function(t){return t},ti=/^[a-zA-Z_$0-9]/,ei={type:"class",value:"[a-zA-Z_$0-9]",description:"[a-zA-Z_$0-9]"},ni=function(t){return n()},ri="{",ii={type:"literal",value:"{",description:'"{"'},oi="}",si={type:"literal",value:"}",description:'"}"'},ai=function(t){return["hash",t]},ui=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].key]=t[n].value;return e},ci=function(t,e){return[t].concat(e.length?e[0][1]:[])},li=function(t,e){return{key:t,value:e}},fi=function(t){return t[1]},hi=function(t){return t},pi={type:"other",description:"string"},di=function(t){return["string",t.join("")]},yi="\\",vi={type:"literal",value:"\\",description:'"\\\\"'},gi=function(){return n()},mi='\\"',bi={type:"literal",value:'\\"',description:'"\\\\\\""'},wi="\\'",_i={type:"literal",value:"\\'",description:'"\\\\\'"'},Oi={type:"any",description:"any character"},xi=/^[ \n\r\t]/,ki={type:"class",value:"[ \\n\\r\\t]",description:"[ \\n\\r\\t]"},ji=0,Ci=0,Ei=[{line:1,column:1,seenCR:!1}],Pi=0,Ai=[],Si=0;if("startRule"in mt){if(!(mt.startRule in wt))throw new Error("Can't start parsing from rule \""+mt.startRule+'".');_t=wt[mt.startRule]}if(gt=_t(),gt!==bt&&ji===t.length)return gt;throw gt!==bt&&ji<t.length&&s({type:"end",description:"end of input"}),a(null,Ai,Pi<t.length?t.charAt(Pi):null,Pi<t.length?o(Pi,Pi+1):o(Pi,Pi))}return t(e,Error),{SyntaxError:e,parse:n}}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return s.extendClass(a,{initialize:t||function(){},_update:e||function(){return Promise.resolve()}})}var o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},s=n(40),a=function(){function t(e,n){r(this,t),this._attrBindings={},this.ref=e,this.view=n,this.options=n.template.options,this._attributeClasses=this.options.attributes}return t.prototype.setAttribute=function(t,e){this.setAsRegisteredAttribute(t,e)||void 0!=e&&this.ref.setAttribute(t,e)},t.prototype.setProperty=function(t,e){this.setAsRegisteredAttribute(t,e)||(this.ref.nodeType?this.ref[t]=e:this.ref.setAttribute(t,e))},t.prototype.setAsRegisteredAttribute=function(t,e){if(this._attrBindings[t])this._attrBindings[t].value=e;else{var n=this._attributeClasses.get(t);if(!n)return!1;this._attrBindings[t]=new n(this.ref,t,e,this.view)}return!0},t.prototype.update=function(t){return o(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._update();case 2:e.t0=regeneratorRuntime.keys(this._attrBindings);case 3:if((e.t1=e.t0()).done){e.next=9;break}return t=e.t1.value,e.next=7,this._attrBindings[t].update();case 7:e.next=3;break;case 9:case"end":return e.stop()}},e,this)}))},t.prototype.destroy=function(){for(var t in this._attrBindings)this._attrBindings[t].destroy()},t}();e.Binding=a,e.binding=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,i=function(t){r?setTimeout(t):r(t)},o=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,t),e||(e={}),this._animationQueue=[],this.tick=e.tick||i,this._id=e._id||2}return t.prototype.child=function(){return this.__child||(this.__child=new t({tick:this.tick,_id:this._id<<2}))},t.prototype.deferOnce=function(t){var e=this;return t.__running||(t.__running=1),t.__running&this._id?void(this._running&&this.child().deferOnce(t)):(t.__running|=this._id,this._animationQueue.push(t),void(this._requestingFrame||(this._requestingFrame=!0,this.tick(function(){e.runNow(),e._requestingFrame=!1}))))},t.prototype.runNow=function(){var t=this._animationQueue;this._animationQueue=[],this._running=!0;for(var e=0;e<t.length;e++){var n=t[e];n.update(),n.__running&=~this._id,this._animationQueue.length&&this.runNow();
}this._running=!1},t}();e.RunLoop=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},u=n(6),c=n(5),l=n(64),f=n(35),h=n(25)("stick:factory:controller"),p=function(t,e,n){var r=document.createElement("controller");return r.setAttribute("name",e),n!=e&&r.setAttribute("as",n),r.appendChild(t),r},d=function(t){function e(t,n,o){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(s.container=o,s.controller=n,s.name=t,s._id=u.uniqueId("ctrl"),"function"==typeof n&&""==n.name)try{Object.defineProperty(n,"name",{value:t})}catch(a){}return h("%s: Controller factory created: '%s', container %s",s.id,t,s.container.id),s}return o(e,t),s(e,[{key:"create",value:function(t){return a(this,void 0,Promise,regeneratorRuntime.mark(function e(){var n,r,i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.container.hasInstance(this.name)){e.next=2;break}return e.abrupt("return",u.Promise.resolve(this.container.get(this.name)));case 2:return this.container.registerSingleton(this.name,this.controller),n=t.contextName||this.name,e.next=6,this.container.get("$state");case 6:return r=e.sent,r=r.createChild(this.container,t.state),this.container.registerInstance("$state",r,!0),e.next=11,this.resolveTemplate(r,t);case 11:return i=e.sent,h("%s: Created template: %s",this.id,i.id),this.container.registerInstance("template",i,!0),h("%s: Instantiating controller '%s' as '%s'",this.id,this.name,n),e.next=17,this.container.get(this.name);case 17:return o=e.sent,r.set(n,o),i.setTarget(o),this.trigger("before:template:render"),e.next=23,i.render();case 23:return s=e.sent,11!==s.nodeType&&3!==s.nodeType||(s=1===s.children.length?3===s.firstChild.nodeType?p(s,this.name,n):s.firstChild:p(s,this.name,n)),this.container.registerInstance("$el",s,!0),"function"==typeof o.onTemplateRender&&o.onTemplateRender.call(o,s,i),this.trigger("template:render"),t.el&&(this.trigger("before:element:attached",t.el),t.el.innerHTML="",t.el.appendChild(s),"function"==typeof o.onElementAttached&&o.onElementAttached.call(o,s,t.el),this.trigger("element:attached",s,t.el)),e.abrupt("return",o);case 30:case"end":return e.stop()}},e,this)}))}},{key:"resolveTemplate",value:function(t,e){return a(this,void 0,Promise,regeneratorRuntime.mark(function n(){var r,i,o,s,a,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.container.get("$templateCreator");case 2:return r=n.sent,n.next=5,this.container.get("$templateResolver");case 5:if(i=n.sent,o=void 0,!e.el||e.template){n.next=12;break}s=e.el.innerHTML,o=u.Promise.resolve(s),n.next=22;break;case 12:if(!e.template){n.next=21;break}if(!(e.template instanceof f.Template)){n.next=18;break}return n.next=16,e.template.render(t,{container:this.container,parentView:e.parentView});case 16:return a=n.sent,n.abrupt("return",a);case 18:o=i(e.template),n.next=22;break;case 21:return n.abrupt("return",u.Promise.reject(new l.StickError("no element or template")));case 22:return n.next=24,o;case 24:return c=n.sent,n.abrupt("return",r(c,t));case 26:case"end":return n.stop()}},n,this)}))}},{key:"destroy",value:function(){return a(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h("%s: Destroying controller '%s'",this.id,this.name),t.next=3,this.container.get(this.name);case 3:e=t.sent,"function"==typeof e.onDestroy&&e.onDestroy.call(e),this.container.clear(),this.container.entries.clear();case 7:case"end":return t.stop()}},t,this)}))}},{key:"id",get:function(){return this._id}}]),e}(c.EventEmitter);e.ControllerFactory=d},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.message=t,i}return i(e,t),e}(Error);e.StickError=o;var s=function(t){function e(t,i){n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.errors=i,o}return i(e,t),e}(o);e.StickDependencyError=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},c=n(18),l=n(5),f=n(32),h=n(64),p=n(19),d=n(6),y=n(35),v=n(66),g=n(63),m=n(25)("stick:factory:module"),b=function(t,e){var n=document.createElement("module");return n.setAttribute("name",e),n.appendChild(t),n},w=function(t){function e(t,n,o){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(3!=arguments.length)throw new Error;if(s.name=t,s.module=n,s.container=o,"function"==typeof n&&""==n.name)try{Object.defineProperty(n,"name",{value:t})}catch(a){}return s._id=d.uniqueId("mod"),m("%s: Module factory created: '%s', container: %s",s.id,t,s.container.id),s.container.registerSingleton(t,n),s.container.registerInstance("$container",s.container),s}return o(e,t),a(e,[{key:"controller",value:function(t,e){var n=c.getDependencies(e),r=s(n,2),i=r[0],o=r[1];if(!i)throw new h.StickError("controller definition should be a function, function constructor or a object literal");var a=void 0;if("function"!=typeof i&&d.isObject(i)){var u=d.extend({},i);"function"==typeof i.initialize?(a=i.initialize,delete u.initialize):"function"==typeof i.constructor&&(a=i.constructor,delete u.constructor),o&&0!=o.length||c.getDependencies(a),d.assign(a.prototype,u)}else"function"==typeof i&&(a=i);if("function"!=typeof a)throw new h.StickError("controller defition should be a function or an object literal");c.setDependencyType(c.DependencyType.Controller)(a);var l=new g.ControllerFactory(t,a,this.container.createChild());return this.container.registerInstance(t,l,!0),m("%s: Register controller: '%s', %s",this.id,t,l.id),this}},{key:"service",value:function(t,e){var n=c.getDependencies(e),r=s(n,1),i=r[0];if(!i||"function"!=typeof i)throw new h.StickError("service should be a function");return c.setDependencyType(c.DependencyType.Service)(i),this.container.registerService(t,i),m("%s Register service %s",this.id,t),this}},{key:"factory",value:function(t,e){var n=c.getDependencies(e),r=s(n,1),i=r[0];if(!i)throw new h.StickError("factory");return m("%s Register factory %s",this.id,t),"function"==typeof i?(c.setDependencyType(c.DependencyType.Factory)(i),c.setActivator(i,p.FactoryActivator.instance),this.container.registerSingleton(t,i)):this.container.registerInstance(t,i),this}},{key:"create",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return u(this,void 0,Promise,regeneratorRuntime.mark(function e(){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.container.hasInstance(this.name)){e.next=3;break}return m("%s: Resolving module %s",this.id,this.name),e.abrupt("return",this.container.get(this.name));case 3:return this.container.registerSingleton("$state",v.State),e.next=6,this.container.get("$state");case 6:if(n=e.sent,t.state&&n.set(t.state),m("%s: Creating module %s",this.id,this.name),!t.template&&!t.el){e.next=30;break}return e.next=12,this.resolveTemplate(n,t);case 12:return r=e.sent,m("%s: Created template: %s",this.id,r.id),this.container.registerInstance("template",r,!0),m("%s: Instantiating module '%s'",this.id,this.name),e.next=18,this.container.get(this.name);case 18:return i=e.sent,r.setTarget(i),this.trigger("before:template:render"),e.next=23,r.render();case 23:return o=e.sent,11!==o.nodeType&&3!==o.nodeType||(o=1===o.children.length?3===o.firstChild.nodeType?b(o,this.name):o.firstChild:b(o,this.name)),this.container.registerInstance("$el",o,!0),"function"==typeof i.onTemplateRender&&i.onTemplateRender.call(i,o,r),this.trigger("template:render"),t.el&&(this.trigger("before:element:attached",t.el),t.el.innerHTML="",t.el.appendChild(o),"function"==typeof i.onElementAttached&&i.onElementAttached.call(i,o,t.el),this.trigger("element:attached",o,t.el)),e.abrupt("return",i);case 30:return e.abrupt("return",this.container.get(this.name));case 31:case"end":return e.stop()}},e,this)}))}},{key:"configure",value:function(t){return u(this,void 0,Promise,regeneratorRuntime.mark(function e(){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,/Provider$/.test(t)?t=t.replace("Provider",""):n=t+"Provider",r=void 0,!this.container.hasHandler(n,!1,!1)){e.next=7;break}return e.abrupt("return",this.container.get(t));case 7:if(!f.Repository.has(c.DependencyType.Service,t)){e.next=12;break}if(i=f.Repository.get(c.DependencyType.Service,t),this.container.register(i),!this.container.hasHandler(n,!1,!1)){e.next=12;break}return e.abrupt("return",this.container.get(n));case 12:throw new Error("No provider for "+t.replace("Provider",""));case 13:case"end":return e.stop()}},e,this)}))}},{key:"resolveTemplate",value:function(t,e){return u(this,void 0,Promise,regeneratorRuntime.mark(function n(){var r,i,o,s,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.container.get("$templateCreator");case 2:return r=n.sent,n.next=5,this.container.get("$templateResolver");case 5:if(i=n.sent,o=void 0,!e.el||e.template){n.next=12;break}s=e.el.innerHTML,o=d.Promise.resolve(s),n.next=22;break;case 12:if(!e.template){n.next=21;break}if(!(e.template instanceof y.Template)){n.next=18;break}return n.next=16,e.template.render(t,{container:this.container});case 16:return a=n.sent,n.abrupt("return",a);case 18:o=i(e.template),n.next=22;break;case 21:return n.abrupt("return",d.Promise.reject(new h.StickError("no element or template")));case 22:return n.next=24,o;case 24:return u=n.sent,n.abrupt("return",r(u,t));case 26:case"end":return n.stop()}},n,this)}))}},{key:"destroy",value:function(){}},{key:"id",get:function(){return this._id}}]),e}(l.EventEmitter);e.ModuleFactory=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return t===Object(t)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function g(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:g(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},l=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},f=n(67),h=n(6),p=n(17),d=n(25)("stick:state");e.get_atributes=function(t){var e=Object.keys(t),n={},r={};return e.map(function(e){return{key:e,value:t[e]}}).filter(function(e){return!!h.has(t,e.key)&&(!e.value||!h.isPromise(e.value)||(n[e.key]=e.value,delete t[e.key],!1))}).forEach(function(t){r[t.key]=t.value}),{attr:r,deferred:n}};var y=void 0,v=y=function(t){function n(t,e){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return o._container=t,d("%s: State created",o.uid),o}return o(n,t),a(n,[{key:"get",value:function(t){var e=u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"get",this).call(this,t);return d("%s: Get attribute: %s",this.uid,t,e),e}},{key:"set",value:function(t,r){var i=this,o={array:!1},a={},c={};"string"==typeof t?null==r?c[t]=r:a[t]=r:s(t)&&(a=t);var l=e.get_atributes(a),f=l.attr,p=l.deferred;return h.isEmpty(p)||(d("%s: Resolve deferred values: %j",this.uid,Object.keys(p)),h.objectToPromise(p).then(function(t){i.set(t)})),h.isEmpty(f)||(d("%s: Set attributes: ",this.uid,f),u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"set",this).call(this,f,o)),h.isEmpty(c)||(d("%s: Unset attributes: %j",this.uid,Object.keys(c)),u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"set",this).call(this,c)),this}},{key:"createChild",value:function(t,e){t||(t=this.container.createChild());var n=new y(t,e);return n._parent=n,d("%s: Create child %s",this.uid,n.uid),n}},{key:"$destroy",value:function(){u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),d("%s: State destroyed",this.uid)}},{key:"parent",get:function(){return this._parent}},{key:"container",get:function(){return this._container}}]),n}(f.NestedModel);v=y=l([p.inject("$container")],v),e.State=v},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(68)),r(n(70)),r(n(71)),r(n(72)),r(n(73)),r(n(75))},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(69),o=n(70),s=n(9),a=n(7),u=n(8),c={add:!0,remove:!0,merge:!0},l={add:!0,remove:!1},f=function(t){function e(e,n){void 0===n&&(n={}),t.call(this),this.options=n,this.options.model&&(this.Model=this.options.model),e&&this.add(e)}return r(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.models.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Model",{get:function(){return this._model||(this._model=o.Model),this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"models",{get:function(){return this._models||(this._models=[])},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){var n=this;void 0===e&&(e={}),Array.isArray(t)?t=t.map(function(t){return t instanceof n.Model?t:n._prepareModel(t)}):t instanceof this.Model||(t=this._prepareModel(t)),this.set(t,s.extend({merge:!1},e,l))},e.prototype.set=function(t,e){void 0===e&&(e={}),e=s.extend({},c,e),e.parse&&(t=this.parse(t,e));var n,r,i,o,a,u,l,f=!Array.isArray(t),h=f?t?[t]:[]:t.slice(),p=e.at,d=this.comparator&&null==p&&e.sort!==!1,y="string"==typeof this.comparator?this.comparator:null,v=[],g=[],m={},b=e.add,w=e.merge,_=e.remove,O=!d&&b&&_?[]:null;for(n=0,r=h.length;n<r;n++){if(o=h[n],o=this._prepareModel(o),i=o.get(o.idAttribute)||o.uid,u=this.get(i))_&&(m[u.uid]=!0),w&&(a=o.toJSON(),u.set(a,e),d&&!l&&u.hasChanged(y)&&(l=!0)),h[n]=u;else if(b){if(h[n]=o,!o)continue;v.push(o),this._addReference(o,e)}o=u||o,O&&!m[o.id]&&O.push(o),m[o.uid]=!0}if(_){for(n=0,r=this.length;n<r;++n)m[(o=this.models[n]).uid]||g.push(o);g.length&&this.remove(g,e)}if(v.length||O&&O.length)if(d&&(l=!0),null!=p)for(n=0,r=v.length;n<r;n++)this.models.splice(p+n,0,v[n]);else{O&&(this.models.length=0);var x=O||v;for(n=0,r=x.length;n<r;n++)this.models.push(x[n])}if(l&&this.sort({silent:!0}),!e.silent){for(n=0,r=v.length;n<r;n++)(o=v[n]).trigger("add",o,this,e);(l||O&&O.length)&&this.trigger("sort",this,e),(v.length||g.length)&&this.trigger("update",this,e)}return f?h[0]:h},e.prototype.remove=function(t,e){void 0===e&&(e={});var n=!Array.isArray(t);t=n?[t]:t.slice();var r,i,o,s;for(r=0,i=t.length;r<i;r++)s=t[r]=this.get(t[r]),s&&(o=this.indexOf(s),this.models.splice(o,1),e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s,e));return n?t[0]:t},e.prototype.get=function(t){return this.find(t)},e.prototype.at=function(t){return this.models[t]},e.prototype.clone=function(t){return t=t||this.options,new this.constructor(this.models,t)},e.prototype.sort=function(t){if(void 0===t&&(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return"string"==typeof this.comparator||1===this.comparator.length?this._models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},e.prototype.sortBy=function(t,e){return a.sortBy(this._models,t,e)},e.prototype.push=function(t,e){return void 0===e&&(e={}),this.add(t,s.extend({at:this.length},e))},e.prototype.reset=function(t,e){var n=this;return void 0===e&&(e={}),this.forEach(function(t){n._removeReference(t,e)}),e.previousModels=this.models,this._reset(),t=this.add(t,e),e.silent||this.trigger("reset",this,e),t},e.prototype.create=function(t,e){void 0===e&&(e={add:!0});var n=new this.Model(t,e);return e.add&&this.add(n),n},e.prototype.parse=function(t,e){return void 0===e&&(e={}),t},e.prototype.find=function(t){var e;return e="function"==typeof t?a.find(this.models,t):a.find(this.models,function(e){return e.id==t||e.uid==t||t===e})},e.prototype.forEach=function(t,e){for(var n=0,r=this.models.length;n<r;n++)t.call(e||this,this.models[n],n);return this},e.prototype.filter=function(t){var e=[];return this.forEach(function(n,r){t(n,r)&&e.push(n)}),e},e.prototype.indexOf=function(t){return this.models.indexOf(t)},e.prototype.toJSON=function(){return this.models.map(function(t){return t.toJSON()})},e.prototype._prepareModel=function(t){if(t instanceof o.Model)return t;if(s.isObject(t))return new this.Model(t,{parse:!0});throw new Error("Value not an Object or an instance of a model, but was: "+typeof t)},e.prototype._removeReference=function(t,e){this===t.collection&&delete t.collection,this.stopListening(t)},e.prototype._addReference=function(t,e){t.collection||(t.collection=this),this.listenTo(t,"all",this._onModelEvent)},e.prototype._reset=function(){this._models=[]},e.prototype._onModelEvent=function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),u.callFunc(this.trigger,this,a.slice(arguments)))},e.prototype.destroy=function(){var e=this;this.models.forEach(function(t){"function"==typeof t.destroy&&t.collection==e&&t.destroy()}),t.prototype.destroy.call(this)},e}(i.BaseObject);e.Collection=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(8),s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.extend=function(t,e){return o.inherits(this,t,e)},e}(i.EventEmitter);e.BaseObject=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(69),o=n(8),s=n(9),a=function(t){function e(e,n){void 0===e&&(e={}),void 0===n&&(n={}),t.call(this),n=n||{},this._attributes={},this.options=n,n.parse&&(e=this.parse(e)),this.set(e,{silent:!0,array:!1}),this.uid=o.uniqueId("uid"),this._changed={},this.collection=n.collection,this.idAttribute=n.idAttribute||this.idAttribute||"id"}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){if(this.idAttribute in this._attributes)return this._attributes[this.idAttribute]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNew",{get:function(){return null==this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDirty",{get:function(){return this.hasChanged()},enumerable:!0,configurable:!0}),e.prototype.set=function(t,e,n){void 0===n&&(n={});var r,i,a,u,c,l,f,h={};if(null==t)return this;"object"==typeof t?(h=t,n=e):h[t]=e,n||(n={}),i=n.unset,u=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.extend(Object.create(null),this._attributes),this._changed={}),f=this._attributes,l=this._previousAttributes;for(r in h)e=h[r],o.equal(f[r],e)||a.push(r),o.equal(l[r],e)?delete this._changed[r]:this._changed[r]=e,i?delete f[r]:f[r]=e;if(!u){a.length&&(this._pending=!!n);for(var p=0,d=a.length;p<d;p++)this.trigger("change:"+a[p],this,f[a[p]],n)}if(c)return this;if(!u)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},e.prototype.get=function(t){return this._attributes[t]},e.prototype.unset=function(t,e){this.set(t,void 0,s.extend({},e,{unset:!0}))},e.prototype.has=function(t){return null!=this.get(t)},e.prototype.hasChanged=function(t){return null==t?!!Object.keys(this.changed).length:s.has(this.changed,t)},e.prototype.clear=function(t){var e={};for(var n in this._attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},Object.defineProperty(e.prototype,"changed",{get:function(){return s.extend({},this._changed)},enumerable:!0,configurable:!0}),e.prototype.changedAttributes=function(t){if(!t)return!!this.hasChanged()&&s.extend(Object.create(null),this.changed);var e,n={},r=this._changing?this._previousAttributes:this._attributes;for(var i in t)o.equal(r[i],e=t[i])||((n||(n={}))[i]=e);return n},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},e.prototype.previousAttributes=function(){return s.extend(Object.create(null),this._previousAttributes)},e.prototype.toJSON=function(){return JSON.parse(JSON.stringify(this._attributes))},e.prototype.clone=function(){return new this.constructor(this._attributes,this.options)},e.prototype.parse=function(t,e){return t},e.prototype.remove=function(t){this.trigger("remove",this,this.collection,t)},e.prototype.pick=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e=1===arguments.length?Array.isArray(t)?t:[t]:[t].concat(e);for(var r={},i=0,o=e.length;i<o;i++)this.has(e[i])&&(r[e[i]]=this.get(e[i]));return r},e}(i.BaseObject);e.Model=a},function(t,e,n){"use strict";function r(t,e,n){void 0===e&&(e="."),void 0===n&&(n=!0);var i={};if(!t)return t;for(var o in t){var s=t[o];if(s&&(s.constructor===Object||n&&s.constructor===Array)&&!l.isEmpty(s)){var a=r(s);for(var u in a){var c=a[u];i[o+e+u]=c}}else i[o]=s}return i}function i(t,e,n){void 0===n&&(n=".");var r=e?e.split(n):[];if(!t)return!1;for(var i=t,o=0,s=r.length;o<s;o++){if(i instanceof f.Model)return!0;if(!i)return!1;i=i[r[o]]}return!1}function o(t,e,n,r){if(void 0===r&&(r="."),!t)return null;for(var i=e?e.split(r):[],o=t,s=0,a=i.length;s<a;s++){if(n&&!l.has(o,i[s]))return!1;if(o=o instanceof f.Model?o.get(i[s]):o[i[s]],null==o&&s<a-1&&(o={}),"undefined"==typeof o)return!!n||o}return!!n||o}function s(t,e,n,r){if(r=r||{},!t)return null;for(var i=r.separator||".",o=e?e.split(i):[],s=t,a=0,u=o.length;a<u&&void 0!==s;a++){var c=o[a];if(a===u-1)r.unset?delete s[c]:s[c]=n;else{if("undefined"==typeof s[c]||!l.isObject(s[c])){if(r.unset)return void delete s[c];var h=o[a+1];s[c]=/^\d+$/.test(h)?[]:{}}if(s=s[c],s instanceof f.Model){var p=o.slice(a+1);return s.set(p.join("."),n,r)}}}}function a(t,e){s(t,e,null,{unset:!0})}var u=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=n(8),l=n(9),f=n(70);e.objToPaths=r,e.getNested=o;var h=function(t){function e(){t.apply(this,arguments)}return u(e,t),e.prototype.get=function(t){return o(this._attributes,t)},e.prototype.set=function(t,n,u){var h,p,d,y,v,g,m,b,w=this;if(null==t)return this;"object"==typeof t?(p=t,u=n||{}):(p={})[t]=n,u||(u={}),d=u.unset,v=u.silent,y=[],g=this._changing,this._changing=!0,g||(this._previousAttributes=l.extend({},this._attributes),this._changed={}),b=this._attributes,m=this._previousAttributes;var _=e.keyPathSeparator;p=r(p,_,u.array);var O={};this._nestedListener||(this._nestedListener={});for(h in p){n=p[h];var x=o(b,h);if(c.equal(x,n)||(y.push(h),this._changed[h]=n),c.equal(o(m,h),n)?a(this.changed,h):s(this.changed,h,n,u),x instanceof f.Model){var k=this._nestedListener[h];k&&(x.off("change",k),delete this._nestedListener[h])}if(d)a(b,h);else{if(i(b,h,_))O[h]=!0;else if(n instanceof f.Model){var k=function(t){if(void 0!=t.changed&&!l.isEmpty(t.changed)){for(var e in t.changed)w._changed[h+_+e]=t.changed[e],w.trigger("change:"+h+_+e,t.changed[e]);w.trigger("change",w,u)}};this._nestedListener[h]=k,n.on("change",k)}s(b,h,n,u)}}if(!v){y.length&&(this._pending=!0);for(var j=0,C=y.length;j<C;j++){var E=y[j];O.hasOwnProperty(E)&&O[E]||(O[E]=!0,this.trigger("change:"+E,this,o(b,E),u));for(var P=E.split(_),A=P.length-1;A>0;A--){var S=P.slice(0,A).join(_),R=S+_+"*";O.hasOwnProperty(R)&&O[R]||(O[R]=!0,this.trigger("change:"+R,this,o(b,S),u)),O.hasOwnProperty(S)&&O[S]||(O[S]=!0,this.trigger("change:"+S,this,o(b,S),u))}}}if(g)return this;if(!v)for(;this._pending;)this._pending=!1,this.trigger("change",this,u);return this._pending=!1,this._changing=!1,this},e.prototype.clear=function(t){var e={},n=r(this._attributes);for(var i in n)e[i]=void 0;return this.set(e,l.extend({},t,{unset:!0}))},e.prototype.hasChanged=function(t){return null==t?!Object.keys(this.changed).length:void 0!==o(this.changed,t)},e.prototype.changedAttributes=function(t){if(!t)return!!this.hasChanged()&&r(this.changed);var e=this._changing?this._previousAttributes:this._attributes;t=r(t),e=r(e);var n,i=!1;for(var o in t)c.equal(e[o],n=t[o])||((i||(i={}))[o]=n);return i},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?o(this._previousAttributes,t):null},e.prototype.previousAttributes=function(){return l.extend({},this._previousAttributes)},e.prototype.pick=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];1===arguments.length?t=Array.isArray(t)?t:[t]:e=[t].concat(e);for(var r={},i=0,o=e.length;i<o;i++)this.has(e[i])&&s(r,e[i],this.get(e[i]));return r},e.prototype.destroy=function(){for(var e in this._nestedListener){var n=this._nestedListener[e];if(n){var r=this.get(e);r&&r.off(e,n)}}t.prototype.destroy.call(this)},e.keyPathSeparator=".",e}(f.Model);e.NestedModel=h},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),o=n(68),s=n(73),a=n(11),u=n(74),c=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,e,n),n.url&&(this.url=n.url),this.options.queryParameter=this.options.queryParameter||"q"}return r(e,t),e.prototype.getURL=function(){return"function"==typeof this.url?this.url():this.url},e.prototype.fetch=function(t){var e=this;t=t?i.extend({},t):{};var n=this.getURL();return null==n?a.Promise.reject(new Error("Url or rootURL no specified")):(t.url=n,this.trigger("before:fetch"),this.sync(u.RestMethod.Read,this,t).then(function(n){return e[t.reset?"reset":"set"](n.content,t),e.trigger("fetch"),e})["catch"](function(t){throw e.trigger("error",t),t}))},e.prototype.create=function(t,e){var n=this;e=e?i.extend({},e):{};var r,o=this.getURL();if(null==o)throw new Error("Url or rootURL no specified");return e.url=o,r=t instanceof s.RestModel?t:new this.Model(t,{parse:!0,url:this.getURL()}),void 0===e.wait&&(e.wait=!0),e.wait||this.add(r,e),this.trigger("before:create",this,r,t,e),r.save().then(function(){e.wait||n.add(r,e),n.trigger("create",n,r,t,e),e.complete&&e.complete(null,r)})["catch"](function(t){n.trigger("error",t),e.complete&&e.complete(t,null)}),r},e.prototype.query=function(t,e){var n=this;void 0===e&&(e={});var r=(s={},s[this.options.queryParameter]=t,s),o=this.getURL();return null==o?a.Promise.reject(new Error("Url or rootURL no specified")):(e.url=o,e.params||(e.params={}),i.extend(e.params,r),this.trigger("before:query"),this.sync(u.RestMethod.Read,this,e).then(function(t){return n.reset(t.content,e),n.trigger("query"),n.models})["catch"](function(t){throw n.trigger("error",t),t}));var s},e.prototype.sync=function(t,e,n){return u.sync(t,e,n)},e}(o.Collection);e.RestCollection=c},function(t,e,n){"use strict";function r(t,e){var n,r="";return(n=t.indexOf("?"))>=0&&(r=t.substr(n),t=t.substr(0,n)),"/"!==t[t.length-1]&&(t+="/"),t+e+r}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(11),a=n(71),u=n(74);e.normalize_path=r;var c=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,e,n),this.idAttribute="id",n.url&&(this.rootURL=n.url)}return i(e,t),e.prototype.getURL=function(t){var e=this.rootURL;return this.collection&&this.collection.getURL()&&(e=this.collection.getURL()),t=t||this.id,t&&e&&(e=r(e,this.id)),e},e.prototype.fetch=function(t){var e=this;t=t?o.extend({},t):{};var n=this.getURL();return null==n?s.Promise.reject(new Error("Url or rootURL no specified")):(t.url=n,
this.trigger("before:fetch",this,t),this.sync(u.RestMethod.Read,this,t).then(function(n){return n&&e.set(e.parse(n.content,t),t),e.trigger("fetch",e,n,t),e})["catch"](function(t){if(e.trigger("error",e,t),t)throw t;return e}))},e.prototype.save=function(t){var e=this;t=t?o.extend({},t):{},this.trigger("before:save",this,t);var n=u.RestMethod[this.isNew?"Create":t.changed?"Patch":"Update"],r=this.getURL(this.id);return null==r?s.Promise.reject(new Error("Url or rootURL no specified")):(t.url=r,this.sync(n,this,t).then(function(n){return e.set(n.content,t),e.trigger("save",e,n,t),e})["catch"](function(t){throw e.trigger("error",e,t),t}))},e.prototype.remove=function(e){var n=this;if(e=e?o.extend({},e):{},this.isNew)return t.prototype.remove.call(this,e),s.Promise.resolve(this);var r=this.getURL(this.id);return null==r?s.Promise.reject(new Error("Url or rootURL no specified")):(this.trigger("before:remove",this,e),e.wait||t.prototype.remove.call(this,e),e.url=r,this.sync(u.RestMethod.Delete,this,e).then(function(r){return e.wait||t.prototype.remove.call(n,e),n})["catch"](function(t){throw n.trigger("error",n,t),t}))},e.prototype.sync=function(t,e,n){return u.sync(t,e,n)},e}(a.NestedModel);e.RestModel=c},function(t,e,n){"use strict";function r(t,e,n){var r;switch(t){case c.Create:r="POST";break;case c.Update:r="PUT";break;case c.Patch:r="PATCH";break;case c.Delete:r="DELETE";break;case c.Read:r="GET";break;default:return o.Promise.reject(new Error("Sync: does not recognise method: "+t))}var i,l=s.ajax(),f=n.url;if(n.params&&(i=a.queryParam(n.params)),i){var d=n.url.indexOf("?")===-1?"?":"&";f+=d+i}return new o.Promise(function(i,o){if(l.onreadystatechange=function(){if(4===l.readyState){var e;try{e=h(n.headers.Accept,l)}catch(r){return o(new Error("Could not serialize response"))}var a={method:t,status:l.status,content:e};if(s.proxy(a,l,["getAllResponseHeaders","getResponseHeader"]),p(l))return i(a);var c=new u(l.status,l.statusText,e);return o(c)}},l.open(r,f,!0),n.headers&&n.headers.Accept||(n.headers={Accept:"application/json"}),l.setRequestHeader("Content-Type","application/json"),n.headers)for(var a in n.headers)l.setRequestHeader(a,n.headers[a]);n.beforeSend&&n.beforeSend(l),l.send(JSON.stringify(e.toJSON()))})}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(11),s=n(8),a=n(16),u=function(t){function e(e,n,r){t.call(this,n),this.message=n,this.status=e,this.body=r}return i(e,t),e}(Error);e.HttpError=u,function(t){t[t.Create=0]="Create",t[t.Update=1]="Update",t[t.Read=2]="Read",t[t.Patch=3]="Patch",t[t.Delete=4]="Delete"}(e.RestMethod||(e.RestMethod={}));var c=e.RestMethod,l=/^(?:application|text)\/xml/,f=/^application\/json/,h=function(t,e){return null==t&&(t=e.getResponseHeader("content-type")),l.test(t)?e.responseXML:f.test(t)&&""!==e.responseText?JSON.parse(e.responseText):e.responseText},p=function(t){return t.status>=200&&t.status<300||304===t.status||0===t.status&&"file:"===window.location.protocol};e.sync=r},function(t,e,n){"use strict";function r(t){for(var e,n,r,i,o={},s=decodeURIComponent,a=t.split("&"),u=0,c=a.length;u<c;u++){var l=a[u];e=l.split("="),n=e[0],r=e[1],null==r&&(r=!0),n=s(n),r=s(r),i=o[n],Array.isArray(i)?i.push(r):i?o[n]=[i,r]:o[n]=r}return o}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(68),s=n(72),a=n(11),u=n(74),c=n(9),l=n(16),f=/[\s'"]/g,h=/[<>\s'"]/g,p=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,e,n),this._state={first:1,last:-1,current:1,size:10},this._link={},this.queryParams={page:"page",size:"pageSize"},n.queryParams&&c.extend(this.queryParams,n.queryParams),n.firstPage&&(this._state.first=n.firstPage),n.pageSize&&(this._state.size=n.pageSize),this._state.current=this._state.first,this._page=new o.Collection,this._page.Model=this.Model}return i(e,t),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},enumerable:!0,configurable:!0}),e.prototype.hasNext=function(){return this.hasPage(this._state.current+1)},e.prototype.hasPrevious=function(){return this.hasPage(this._state.current-1)},e.prototype.hasPage=function(t){return this._state.last>-1&&t<=this._state.last},e.prototype.getPreviousPage=function(t){return t=t?c.extend({},t):{},t.page=this._state.current-1,this.getPage(t)},e.prototype.getNextPage=function(t){return t=t?c.extend({},t):{},t.page=this._state.current+1,this.getPage(t)},e.prototype.getPage=function(t){return t=t?c.extend({},t):{},void 0===t.page?a.Promise.reject(new Error("No page")):(this._state.last<t.page&&this._state.last!=-1?t.page=this._state.last:t.page<this._state.first&&(t.page=this._state.first),this.fetch(t))},e.prototype.fetch=function(t){var e=this;void 0===t&&(t={}),t=t?c.extend({},t):{};var n;c.has(t,"page")||(t.page=this._state.current);var i=t.params?c.extend({},t.params):{};if(c.has(i,this.queryParams.page)&&delete i[this.queryParams.page],n=this._link[t.page],n||(n=this.getURL()),!n)return a.Promise.reject(new Error("no url specified"));var o=n.indexOf("?");return o>-1&&(i=c.extend(i,r(n.substr(o+1))),n=n.substr(0,o)),c.has(i,this.queryParams.page)||(i[this.queryParams.page]=t.page),t.params=i,t.url=n,this.trigger("before:fetch",this,t),i[this.queryParams.size]=this._state.size,this._link[t.page+""]||(this._link[t.page]=n+"?"+l.queryParam({page:t.page})),this.sync(u.RestMethod.Read,this,t).then(function(n){return e._processResponse(n,t),e.trigger("fetch",e,n,t),e})["catch"](function(t){throw e.trigger("error",t),t})},e.prototype._processResponse=function(t,e){var n=e.page,i=this._parseLinkHeaders(t);if(i.first&&(this._link[this._state.first]=i.first),i.prev&&(this._link[n-1]=i.prev),i.next&&(this._link[n+1]=i.next),i.last){var o=i.last,s=o.indexOf("?");if(s>-1){var a=r(o.substr(s+1));c.has(a,this.queryParams.page)&&(this._link[a[this.queryParams.page]]=o,this._state.last=parseInt(a[this.queryParams.page]))}}this._state.current=n;var u=t.content;if(u&&!Array.isArray(u)&&(u=[u]),!u)return this;u=this.parse(u);for(var l=0,f=u.length;l<f;l++)u[l]=this._prepareModel(u[l]);return this.add(u),this},e.prototype._parseLinkHeaders=function(t){var e={};if("function"!=typeof t.getResponseHeader)return e;var n=t.getResponseHeader("Link");if(!n)return e;n=n.split(",");for(var r=["first","prev","next","last"],i=0,o=n.length;i<o;i++)for(var s=n[i].split(";"),a=s[0].replace(h,""),u=s.slice(1),c=0,l=u.length;c<l;c++){var p=u[c].split("="),d=p[0].replace(f,""),y=p[1].replace(f,"");"rel"==d&&~r.indexOf(y)&&(e[y]=a)}return e},e}(s.RestCollection);e.PaginatedCollection=p},function(t,e,n){"use strict";function r(t,e){var n=f.getDependencies(e),r=l(n,1),i=r[0];if(!i||"function"!=typeof i)throw new h.StickError("service should be a function");p.Repository.add(f.DependencyType.Service,t,i)}function i(t,e){var n=f.getDependencies(e),r=l(n,1),i=r[0];if(!i)throw new h.StickError("factory");p.Repository.add(f.DependencyType.Factory,t,i)}function o(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null==e){var n=void 0;if(O.hasHandler(t))n=O.get(t);else{if(!p.Repository.has(f.DependencyType.Module,t))throw new h.StickError("no module named "+t);var r=p.Repository.get(f.DependencyType.Module,t);n=new y.ModuleFactory(t,r.handler,O.createChild()),O.registerInstance(t,n)}return n}var i=f.getDependencies(e),o=l(i,2),s=o[0],a=o[1];if(s){var u=void 0;if("function"!=typeof s&&d.isObject(s)){var c=d.extend({},s);"function"==typeof s.initialize?(u=s.initialize,delete c.initialize):"function"==typeof s.constructor&&(u=s.constructor,delete c.constructor),a&&0!=a.length?u.inject=a:f.getDependencies(u),d.assign(u.prototype,c)}else"function"==typeof s&&(u=s);if("function"!=typeof u)throw new h.StickError("controller defition should be a function or an object literal");var v=new y.ModuleFactory(t,u,O.createChild());return O.registerInstance(t,v,!0),v}throw new h.StickError("controller defition should be a function or an object literal")}function s(t,e){var n=void 0;if("function"==typeof e)n=e;else{if(!d.isObject(e)||"function"!=typeof e.initialize)throw new h.StickError("component should be a function or an object");n=d.inherits(g.BaseComponent,e)}w("defining component: %s",t),m.component(t,n)}function a(t,e){w("defining attribute: %s",t),m.attribute(t,e)}function u(t,e){if(d.has(b,t))throw new Error("decorator called "+t+" already defined!");b[t]=e}function c(t,e){w("defining modifier: %s",t),m.modifier(t,e)}var l=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=n(18),h=n(64),p=n(32),d=n(6),y=n(65),v=n(77),g=n(78),m=n(33),b=n(17),w=n(25)("stick"),_=n(32);e.Repository=_.Repository,e.service=r,e.factory=i;var O=new v.Container;e.module=o,e.component=s,e.attribute=a,e.decorator=u,e.modifier=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function a(t,e,n){var r=void 0,i=void 0;try{r=y.callFunc(t,e,n)}catch(o){i=o}return[r,i]}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function m(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:m(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},f=n(19),h=n(64),p=n(32),d=n(18),y=n(6),v=n(63);s(n(19)),e.tryCatch=a;var g=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.__instances=new Map,n}return o(e,t),u(e,[{key:"hasInstance",value:function(t){return this.__instances.has(t)}},{key:"hasHandler",value:function(t,n,r){var i=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"hasHandler",this).call(this,t,n);return!i&&r?p.Repository.hasAny(t):i}},{key:"get",value:function(t,e){return l(this,void 0,Promise,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t&&void 0!==t){n.next=2;break}throw new f.DIBadKeyError;case 2:if(t!==f.DIContainer){n.next=4;break}return n.abrupt("return",this);case 4:if(!(t instanceof f.Resolver)){n.next=6;break}return n.abrupt("return",t.get(this));case 6:if(r=this.entries.get(t),void 0===r){n.next=9;break}return n.abrupt("return",r[0](this));case 9:if(!this.parent||!this.parent.hasHandler(t)){n.next=11;break}return n.abrupt("return",this.parent.get(t,e));case 11:if(r=p.Repository.any(t),null==r){n.next=15;break}return this.register(r),n.abrupt("return",this.entries.get(t)[0](this));case 15:if("string"!=typeof t){n.next=17;break}throw new h.StickDependencyError("no component registered for key: "+t);case 17:return this.autoRegister(t,e),r=this.entries.get(t),n.abrupt("return",r[0](this));case 20:case"end":return n.stop()}},n,this)}))}},{key:"registerSingleton",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];return this.registerHandler(t,function(i){if(n.__instances.has(t))return n.__instances.get(t);var o=n.invoke(e,null,r);return y.isPromise(o)?o.then(function(e){return n.__instances.set(t,e),e}):(n.__instances.set(t,o),o)})}},{key:"registerService",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],i=void 0;i="string"==typeof t?t:t.name;var o=i+"Provider",s=f.Metadata.getOwn(d.DIServiceConfig,e,r);if(null!=s){if(this.hasHandler(o,!1,!1))throw new Error("Provider for '"+i+"' already defined");var a=new s;this.registerInstance(o,a)}return this.registerHandler(t,function(i){if(n.__instances.has(t))return n.__instances.get(t);var s=n.invoke(e,null,r);return n.__instances.set(t,s),n.unregister(o),s})}},{key:"registerInstance",value:function(t,n){var r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerInstance",this).call(this,t,n),r&&this.__instances.set(t,n)}},{key:"invoke",value:function(t,e,n){var r=this._getOrCreateConstructionSet(t,n);try{var i,o;return o=r.dependencyResolver?r.dependencyResolver.resolveDependencies(t):this.resolveDependencies(t,n),void 0!==e&&Array.isArray(e)&&(o=o.concat(e)),y.arrayToPromise(o).then(function(e){return r.activator.invoke(t,e,n,i)})}catch(s){var a=r.activator instanceof f.ClassActivator?"instantiating":"invoking",u="Error "+a+" "+t.name+".";throw u+=" Check the inner error for details.",new h.StickDependencyError(u,[s])}}},{key:"clear",value:function(){var t=this.__instances.keys(),e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.destroy(s)}}catch(a){n=!0,r=a}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},{key:"destroy",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null==t){var n=!0,r=!1,i=void 0;try{for(var o,s=this.__instances.keys()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;this.destroy(a,e)}}catch(u){r=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw i}}return delete this.constructionInfo,void(this.constructionInfo=new Map)}var c=this.__instances.get(t);c?(e?e(c):"function"==typeof c.$destroy&&c.$destroy(),this.__instances["delete"](t),c=void 0):console.log("could not find key ",t)}},{key:"register",value:function(t){switch(t.type){case d.DependencyType.Controller:var e=new v.ControllerFactory(t.name,t.handler,this.createChild());this.registerInstance(t.name,e,!0);break;case d.DependencyType.Service:this.registerService(t.name,t.handler);break;case d.DependencyType.Factory:"function"==typeof t.handler?(d.setActivator(t.handler,f.FactoryActivator.instance),this.registerSingleton(t.name,t.handler)):this.registerInstance(t.name,t.handler)}}},{key:"createChild",value:function(){var t=new e;return t.parent=this,t}}]),e}(f.DIContainer);e.Container=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(6),u=n(35),c=n(5),l=function(t){function e(t,n,o,s){r(this,e);var c=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));c.update&&(c.update=a.bind(c.update,c)),c.section=t,c.vnode=n,c.attributes=o,c.view=s,c.document=s.template.options.document,n.childNodes&&(c.childTemplate=u.template(u.fragment(n.childNodes),s.template.options));for(var l in o)c.setAttribute(l,o[l]);c.view.container;return c}return o(e,t),s(e,[{key:"initialize",value:function(){return Promise.resolve()}},{key:"setAttribute",value:function(t,e){this.attributes[t]=e}},{key:"removeAttribute",value:function(t){this.attributes[t]=void 0}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"destroy",value:function(){var t=this;"function"==typeof t.onDestroy?t.onDestroy():"function"==typeof t.ondestroy&&t.ondestroy()}}]),e}(c.EventEmitter);e.BaseComponent=l},function(t,e,n){"use strict";function r(t){var e=document.getElementById(t);return null==e?a.Promise.reject(new Error("template with id: '"+t+"' not found")):a.Promise.resolve(e.innerHTML)}var i=n(76),o=n(80),s=n(33),a=n(6);e.templateResolver=r,i.factory("$templateResolver",function(){return r}),i.factory("$templateCreator",["$templateResolver","$container",function(t,e){return function(t,n){var r=s.compile(t,{viewClass:o.TemplateView});return r.render(n,{container:e})}}])},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function p(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:p(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u=n(51),c=n(67),l=n(6),f=n(25)("stick:template:view"),h=function(t){function e(t,n,o,s){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,null,s));if(a._onModelChange=l.bind(a._onModelChange,a),a.context=o,s.delegator&&(a._delegator=s.delegator),s.container&&(a._container=s.container),a._target=s.target,a._id=l.uniqueId("templ"),!a.container)throw new Error("template view: no container set");return f("%s: Template view created with state %s",a.id,a.context.uid),a}return o(e,t),s(e,[{key:"setTarget",value:function(t){this._target=t}},{key:"_onModelChange",value:function(t){if(void 0==this.context)return void console.log("context is undefined",t,this);this.context.changed;this.updateLater()}},{key:"set",value:function(t,n){var r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(!r){if(!(this.context instanceof c.Model))return f("set value for %s on object",t),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n),this.updateLater();if(Array.isArray(t)||(t=t.split(/[,.]/)),"this"===t[0])return t.shift(),void(0===t.length?(this.root.context=n,this.root.update()):(this.root.set(t,n),this.root.update()));"root"===t[0]?(t.shift(),this.root.set(t,n)):(f("set value for %s on model",t),this.context.set(t.join("."),n))}this.updateLater()}},{key:"render",value:function(){return f("%s: Render",this.id),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this)}},{key:"update",value:function(){return f("%s: Update",this.id),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"get",value:function(t){f("%s: Get value for key: %j",this.id,t,this.context),Array.isArray(t)||(t=t.split(/[,.]/));var n=void 0,r=this.context;return"$root"===t[0]&&(t.shift(),r=this.root.context),t=t.join("."),n||(n=this.context instanceof c.Model?r.get(t):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"get",this).call(this,t),null==n&&null!=this.target&&(n=this.target[t],"function"==typeof n&&(n=l.bind(n,this.target)))),f("%s: Got value for key '%s': ",this.id,t,n),n}},{key:"remove",value:function(){this._context&&this._context instanceof c.Model&&this._context.off("change",this._onModelChange,this),f("%s: Remove",this.id),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"$destroy",value:function(){f("%s: Destroy",this.id),this.remove(),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"id",get:function(){return this._id}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}},{key:"container",get:function(){return this._container?this._container:this.parent?this.parent.container:void 0}},{key:"context",set:function(t){this._context&&this._context instanceof c.Model&&this._context.off("change",this._onModelChange,this),this._context=t,null!=t&&t instanceof c.Model&&t.on("change",this._onModelChange,this),this.updateLater()},get:function(){return this._context}},{key:"target",get:function(){return this._target?this._target:this.parent?this.parent.target:void 0}}]),e}(u.View);e.TemplateView=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(t,e,n,r){var i,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},a=n(17),u=n(6),c=function(){function t(){r(this,t)}return i(t,[{key:"get",value:function(t){return u.request.get(t)}},{key:"post",value:function(t){return u.request.post(t)}},{key:"put",value:function(t){return u.request.put(t)}},{key:"del",value:function(t){return u.request.del(t)}}]),t}();c=s([a.service("$http")],c),e.HttpService=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(t,e,n,r){var i,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(s<3?i(a):s>3?i(e,n,a):i(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},a=n(17),u=n(5),c=function(){function t(){r(this,t),this.emitter=new u.EventEmitter}return i(t,[{key:"publish",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.emitter).trigger.apply(e,[t].concat(r))}},{key:"subscribe",value:function(t,e,n){this.emitter.on(t,e,n)}},{key:"unsubscribe",value:function(t,e){this.emitter.off(t,e)}}]),t}();c=s([a.service("$mediator")],c),e.Mediator=c},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),a=n(76),u=function(){function t(e){i(this,t),this._elements=e||[]}return o(t,[{key:"get",value:function(t){return t=void 0===t?0:t,t>=this.length?void 0:this._elements[t]}},{key:"addClass",value:function(t){return this.forEach(function(e){s.addClass(e,t)})}},{key:"removeClass",value:function(t){return this.forEach(function(e){s.removeClass(e,t)})}},{key:"hasClass",value:function(t){return this._elements.reduce(function(e,n){return s.hasClass(n,t)},!1)}},{key:"attr",value:function e(t,n){var e=void 0;if("string"==typeof t&&n)e=r({},t,n);else if("string"==typeof t){if(this.length)return this.get(0).getAttribute(t)}else s.isObject(t)&&(e=t);return this.forEach(function(t){for(var n in e)t.setAttribute(n,e[n])})}},{key:"parent",value:function(){var e=[];return this.forEach(function(t){t.parentElement&&e.push(t.parentElement)}),new t(e)}},{key:"find",value:function(e){var n=[];return this.forEach(function(t){n=n.concat(s.slice(t.querySelectorAll(e)))}),new t(n)}},{key:"forEach",value:function(t){return this._elements.forEach(t),this}},{key:"length",get:function(){return this._elements.length}}]),t}();e.Html=u,a.factory("$html",function(){return function(t,e){"string"==typeof e&&(e=document.querySelectorAll(e));var n=void 0,r=void 0;if("string"==typeof t)if(e){if(!(e instanceof HTMLElement))return n=new u(s.slice(e)),n.find(t);r=s.slice(e.querySelectorAll(t))}else r=s.slice(document.querySelectorAll(t));else t&&t instanceof Element?r=[t]:t&&t instanceof NodeList&&(r=s.slice(t));return new u(r)}})},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(76);r(n(80)),n(85);var o=n(88);i.component("hide",o.Hide),i.component("show",o.Show),i.component("unsafe",o.Unsafe),i.component("delegate",o.Delegate),r(n(78)),r(n(87));var s=n(51);e.Reference=s.Reference,e.Assignment=s.Assignment,e.Call=s.Call},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(86))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},u=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},c=n(87),l=n(17),f=n(84),h=n(6),p=["change","keyup","input"],d=n(25)("stick:template:attribute:value"),y=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"initialize",value:function(){this._onInput=h.bind(this._onInput,this,null);var t=!0,e=!1,n=void 0;try{for(var r,i=p[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.ref.addEventListener(o,this._onInput)}}catch(s){e=!0,n=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},{key:"update",value:function(){var t=this.model=this.value;if(!t)return Promise.resolve();if(!(t&&t instanceof f.Reference))throw Promise.reject(new Error("input value must be a reference. Make sure you have <~> defined"));return t.gettable&&this._elementValue(this._parseValue(t.value())),Promise.resolve()}},{key:"_parseValue",value:function(t){if(null!=t&&""!==t)return t}},{key:"_onInput",value:function(t){clearInterval(this._autocompleteCheckInterval),!t||t.keyCode&&~[27].indexOf(t.keyCode)||t.stopPropagation();var e=this._parseValue(this._elementValue());if(this.model){if(h.equal(this.model.value(),e))return void d("input: no change");d("input changed %s",this.model.value(),e),this.model.value(e)}}},{key:"_elementValue",value:function(t){var e=this.ref,n=/checkbox/.test(e.type),r=/radio/.test(e.type),i=n||r,o=Object.prototype.hasOwnProperty.call(e,"value"),s=o||/input|textarea|checkbox/.test(e.nodeName.toLowerCase()),a=/select/i.test(e.nodeName);return arguments.length?(null==t?t="":clearInterval(this._autocompleteCheckInterval),void(i?r?String(t)===String(e.value)&&(e.checked=!0):e.checked=t:h.equal(this._elementValue(),t)||(s||a?e.value=t:e.innerHTML=t))):n?Boolean(e.checked):s||a?e.value||"":e.innerHTML||""}}]),e}(c.BaseAttribute);y=u([l.attribute("value")],y),e.ValueAttribute=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(54),a=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(s.BaseAttribute);e.BaseAttribute=a},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(89)),r(n(90)),r(n(91)),r(n(92)),r(n(93)),r(n(94))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function v(t,e,n){null===t&&(t=Function.prototype);
var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:v(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},c=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},l=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},f=n(6),h=n(78),p=n(63),d=n(17),y=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"initialize",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.attributes.name&&(this.name=this.attributes.name,this.as=this.attributes.as||this.name);case 1:case"end":return t.stop()}},t,this)}))}},{key:"update",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,r,i,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.factory){t.next=7;break}if(!this.factory.container.hasHandler("template")){t.next=6;break}return t.next=4,this.factory.container.get("template");case 4:e=t.sent,e.update();case 6:return t.abrupt("return");case 7:if(!this.resolving){t.next=9;break}return t.abrupt("return");case 9:return this.resolving=!0,t.next=12,this.view.container.get(this.name);case 12:if(this.factory=t.sent,this.factory instanceof p.ControllerFactory){t.next=15;break}throw new Error(this.name+" is not a controller");case 15:if(n=this.childTemplate,this.attributes.template&&(n=this.attributes.template),r={},this.attributes.state){i=this.attributes.state;try{r=f.isString(i)?JSON.parse(i):Object(i)}catch(a){console.warn("Could not parse model tag")}}return t.next=21,this.factory.create({template:n,contextName:this.as,parentView:this.view,state:r});case 21:return o=t.sent,t.next=24,this.factory.container.get("$el");case 24:s=t.sent,this.section.appendChild(s),this.resolving=!1;case 27:case"end":return t.stop()}},t,this)}))}},{key:"destroy",value:function(){this.factory&&(this.factory.destroy(),this.factory=void 0),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(h.BaseComponent);y=c([d.component("controller")],y),e.Controller=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(51),u=n(6),c=n(78),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"initialize",value:function(){var t=this;return this._onEvent=u.bind(this._onEvent,this),this.childTemplate.render(this.view.context,{parent:this.view}).then(function(e){return t.subview=e,t.subview.render()}).then(function(e){t.el=t.document.createElement("div"),t.el.appendChild(e),t.section.appendChild(t.el);t.attributes.event||"click";u.delegate(t.el,t.attributes.selector,"click",t._onEvent)})}},{key:"update",value:function(){return Promise.resolve()}},{key:"_onEvent",value:function(t){var e=this.attributes.click;if(e instanceof a.Assignment&&(e=e.assign),"function"!=typeof e)throw new Error("[event] value is not a function");e(t)}},{key:"onDestroy",value:function(){u.undelegate(this.el,this.attributes.selector,"click",this._onEvent),this.subview&&this.subview.$destroy()}}]),e}(c.BaseComponent);e.Delegate=l},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(t instanceof p.Collection)t=t.models;else if(t instanceof y.TemplateView)return Promise.resolve();return new Promise(function(n,r){for(var i=[],o=0,s=t.length;o<s;o++)i.push(e(t[o],o));Promise.all(i).then(n)["catch"](r)})}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},l=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},f=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},h=n(17),p=n(67),d=n(78),y=n(80),v=n(51),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),u(e,[{key:"initialize",value:function(){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._children=[],this._collection=[],t.next=4,this.childTemplate.render(this.view.context,{parent:this.view});case 4:case"end":return t.stop()}},t,this)}))}},{key:"update",value:function(){var t=this,e=(this.as,this.each);this.key||"key",this.view;return e===this._collection||null==e?Promise.resolve():(e instanceof v.Call&&(e=e.call()),this._collection&&this._collection instanceof p.Collection&&this.__removeEventListeners(this._collection),this._collection=e,this._update().then(function(){e instanceof p.Collection&&t.__addEventListeners(e)}))}},{key:"_update",value:function(){var t,e=this,n=this.as,i=this.view,o=0,s=this.filter||function(t){return!0};return a(this._collection,function(a,u){return f(e,void 0,void 0,regeneratorRuntime.mark(function c(){var e,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s(a)){c.next=2;break}return c.abrupt("return");case 2:if(t=n?new p.NestedModel((l={},r(l,n,a),r(l,"self",this.view.context),l)):a,!(u>=this._children.length)){c.next=13;break}return c.next=6,this.childTemplate.view(t,{parent:i});case 6:return e=c.sent,this._children.push(e),this.section.appendChild(e.section.render()),o++,c.abrupt("return",e.render(t));case 13:e=this._children[u],e.context=t,e.update();case 16:o++;case 17:case"end":return c.stop()}},c,this)}))}).then(function(){e._children.splice(o).forEach(function(t){t.$destroy()})})}},{key:"_update2",value:function(){var t,e=this.as,n=this.view,i=0,o=this.filter||function(t){return!0};this._collection.forEach(function(s){if(o(s)){var a;if(e){var u;t=new p.NestedModel((u={},r(u,e,s),r(u,"self",this.view.context),u))}else t=s;i>=this._children.length?(a=this.childTemplate.view(t,{parent:n}),this._children.push(a),this.section.appendChild(a.render(t))):(a=this._children[i],a.context=t,a.update()),i++}},this),this._children.splice(i).forEach(function(t){t.$destroy()})}},{key:"__addEventListeners",value:function(t){t.on("add",this._update,this),t.on("remove",this._update,this),t.on("reset",this._update,this),t.on("filter",this._update,this)}},{key:"__removeEventListeners",value:function(t){t.off("remove",this._update),t.off("add",this._update),t.off("reset",this._update),t.off("filter",this._update)}},{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"onDestroy",value:function(){this._collection&&"function"==typeof this._collection.destroy&&this._collection.destroy();var t=!0,e=!1,n=void 0;try{for(var r,i=this._children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.$destroy()}}catch(s){e=!0,n=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}}]),e}(d.BaseComponent);g=l([h.component("repeat")],g),e.Repeat=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(78),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"update",value:function(){var t=this,e=this.attributes.when;if(this._shown===e)return this.subview&&this.subview.update(),Promise.resolve();if(this._shown=e,e){if(!this.subview)return this.childTemplate.render(this.view.context,{parent:this.view}).then(function(e){return t.subview=e,t.subview.render()}).then(function(e){t.section.appendChild(e)})}else this.subview&&this.subview.$destroy(),this.subview=void 0}},{key:"onDestroy",value:function(){this.subview&&this.subview.$destroy()}}]),e}(a.BaseComponent);e.Show=u;var c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"update",value:function(){var t=this,e=this.attributes.when;if(this._hide===e)return this.subview&&this.subview.update(),Promise.resolve();if(this._hide=e,e)this.subview&&this.subview.$destroy(),this.subview=void 0;else if(!this.subview)return this.childTemplate.render(this.view.context,{parent:this.view}).then(function(e){return t.subview=e,t.subview.render()}).then(function(e){t.section.appendChild(e)})}},{key:"onDestroy",value:function(){this.subview&&this.subview.$destroy()}}]),e}(a.BaseComponent);e.Hide=c},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.Unsafe={initialize:function(){},update:function(){var t=this.attributes.html;if("object"===("undefined"==typeof t?"undefined":n(t))&&t.evaluate&&(t=void 0),this.currentValue&&this.currentValue===t)return void(this.currentValue.__isView&&this.currentValue.update(this.currentValue.context));if(this.currentValue&&this.currentValue.remove&&this.currentValue.remove(),this.currentValue=t,!t)return this.section.removeChildNodes();var e;if(t.render)t.remove(),e=t.render();else if(null!=t.nodeType)e=t;else{var r=this.document.createElement("div");r.innerHTML=String(t),e=this.document.createDocumentFragment();for(var i=Array.prototype.slice.call(r.childNodes),o=0,s=i.length;o<s;o++)e.appendChild(i[o])}this.section.removeChildNodes(),this.section.appendChild(e)},onDestroy:function(){this._subview&&this._subview.remove()}}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},c=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},l=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e)).next())})},f=n(78),h=n(17),p=n(67),d=n(84),y=function(t){function e(){var t;i(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return a.resolving=!1,a}return s(e,t),a(e,[{key:"getContext",value:function(){var t=this.attributes.context;if(t){if(t instanceof d.Call&&(t=t.call()),this.attributes.as){var e=this.attributes.as;t=new p.NestedModel(r({},e,t))}}else t=this.view.context;return t}},{key:"update",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,r,i,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.subview){t.next=3;break}return this.subview.context!==this.view.context&&(this.subview.context=this.getContext()),t.abrupt("return",this.subview.update());case 3:if(!this.resolving){t.next=5;break}return t.abrupt("return");case 5:if(this.resolving=!0,e=this.attributes.template,n=this.getContext(),e&&""!=e){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,this.view.container.get("$templateCreator");case 12:return r=t.sent,t.next=15,this.view.container.get("$templateResolver");case 15:return i=t.sent,t.next=18,i(e);case 18:return o=t.sent,t.next=21,r(o,n);case 21:s=t.sent,s.parent=this.view,this.subview=s,this.section.appendChild(s.render()),this.resolving=!1;case 26:case"end":return t.stop()}},t,this)}))}},{key:"onDestroy",value:function(){this.subview&&this.subview.$destroy()}}]),e}(f.BaseComponent);y=c([h.component("view")],y),e.View=y}])});