!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.stick=e():t.stick=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}n(1),n(77);var i=n(6);e.utils=i,r(n(54));var o=n(47);e.Collection=o.Collection,e.NestedModel=o.NestedModel,e.ready=i.domReady()},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(2)),r(n(73)),r(n(74)),r(n(76))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n,r){var i,o=arguments.length,s=3>o?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(3>o?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},s=n(3),a=n(6),u=n(15),c=n(28),l=n(43),f=n(54),h=n(16);f.decorator("route",function(){return function(t){if(!h.isDependencyType(t,h.DependencyType.Controller))throw new Error("[route] target not a controller")}});var p=function v(){r(this,v),this.execute=null,this.pushState=!1};e.RouterOptions=p;var d=function(){function t(e,n){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];r(this,t),console.log(i),i.execute=i.execute||a.bind(this.__execute,this),this.router=new s.Router(i),this.context=e,this.container=n,this.router.history.start()}return i(t,[{key:"setTarget",value:function(t){"string"==typeof t&&(t=document.querySelector(t)),this.target=t}},{key:"swapElements",value:function(t,e){return this.swap?void this.swap(t,e):(t.innerHTML="",void t.appendChild(e))}},{key:"else",value:function(t){"function"!=typeof t&&(t=this.__handleController(t)),this.router.history.on("route:unmatched",t)}},{key:"route",value:function(t,e){return"function"==typeof e?this.router.route(t,e):a.isObject(e)&&this.router.route(t,this.__handleController(e)),this}},{key:"reload",value:function(){this.router.history.loadUrl()}},{key:"navigate",value:function(t,e){this.router.navigate(t,e)}},{key:"__execute",value:function(t,e,n){this.container.hasHandler("$route")&&this.container.unregister("$route"),this.container.registerInstance("$route",{fragment:e,parameters:n}),this.context.$call(t,this.context,n)}},{key:"__handleController",value:function(t){var e=this;if(!this.container.hasHandler(t.controller,!0,!0))throw new Error("[router] controller");return function(){var n=void 0;if(n="string"==typeof t.target?document.querySelector(t.target):t.target&&t.target instanceof Element?t.target:e.target,null==n)throw new Error("[router] target not defined");var r=e.container.get(t.controller);if(!(null!=r&&(r instanceof c.ControllerFactory||r instanceof l.ModuleFactory)))throw new Error(t.controller+" not a controller");r.create({template:t.template,parent:e.container}).then(function(t){null!=e._currentController&&e._currentController.destroy(),e._currentController=r;var i=r.container.get("template");e.swapElements(n,i.render())})}}},{key:"$destroy",value:function(){this.container.hasHandler("$route")&&this.container.unregister("$route"),this._currentController&&(this._currentController.destroy(),delete this._currentController)}},{key:"target",get:function(){return this._target},set:function(t){this._target=t}}]),t}();d=o([u.config(p),u.inject("$context","$container","$routerProvider"),u.service("$router")],d),e.RouterService=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},a=n(4),u=n(5),c=n(6),l=/\((.*?)\)/g,f=/(\(\?)?:\w+/g,h=/\*\w+/g,p=/[\-{}\[\]+?.,\\\^$|#\s]/g,d=function(t){return t?"object"==typeof t&&"[object RegExp]"===toString.call(t):!1},v=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.history=new a.HistoryApi(t),this.options=t}return i(e,t),o(e,[{key:"route",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(d(t)||(t=this._routeToRegExp(t)),"function"==typeof e&&(r=e,e=""),!r)throw new Error("router: no handler");return this.history.route(t,function(i){var o=n._extractParameters(t,i);n.execute(r,i,o),n.trigger.apply(n,["route:"+e].concat(o)),n.trigger("route",e,o)}),this}},{key:"execute",value:function(t,e,n){t&&(this.options.execute?this.options.execute(t,e,n):c.callFunc(t,this,n))}},{key:"navigate",value:function(t,e){return this.history.navigate(t,e),this}},{key:"_routeToRegExp",value:function(t){return t=t.replace(p,"\\$&").replace(l,"(?:$1)?").replace(f,function(t,e){return e?t:"([^/?]+)"}).replace(h,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")}},{key:"_extractParameters",value:function(t,e){var n=t.exec(e).slice(1);return n.map(function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}},{key:"$destroy",value:function(){s(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.history.off()}}]),e}(u.EventEmitter);e.Router=v},function(t,e,n){"use strict";function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},a=n(5),u=n(6),c=/^[#\/]|\s+$/g,l=/^\/+|\/+$/g,f=/\/$/,h=/[#].*$/,p=function v(){i(this,v)};e.Handler=p;var d=function(t){function e(t){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.handlers=[],this._started=!1,"undefined"!=typeof window&&(this.location=window.location,this.history=window.history),this.checkUrl=u.bind(this.checkUrl,this),this.options=t||{}}return r(e,t),o(e,[{key:"atRoot",value:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root}},{key:"getHash",value:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""}},{key:"getFragment",value:function(t){arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(null==t)if(this._wantsPushState||!this._wantsHashChange){t=decodeURI(this.location.pathname+this.location.search);var e=this.root.replace(f,"");t.indexOf(e)||(t=t.slice(e.length))}else t=this.getHash();return t.replace(c,"")}},{key:"start",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this.started)throw new Error("Router.history has already been started");this._started=!0,this.options=u.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState;var e=this.getFragment();this.root=("/"+this.root+"/").replace(l,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=e;var n=this.location;return this._wantsHashChange&&this._wantsPushState&&this.atRoot()&&n.hash&&(this.fragment=this.getHash().replace(c,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl()}},{key:"stop",value:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),this._started=!1}},{key:"route",value:function(t,e){this.handlers.unshift({route:t,callback:e})}},{key:"checkUrl",value:function(){var t=this.getFragment();return t===this.fragment?!1:void(this.loadUrl()||this.trigger("route:unmatched"))}},{key:"loadUrl",value:function(t){return t=this.fragment=this.getFragment(t),this.handlers.some(function(e){return e.route.test(t)?(e.callback(t),!0):void 0})}},{key:"navigate",value:function(t,e){if(!this.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(h,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._wantsPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace)}return e.trigger?this.loadUrl(t):void 0}}},{key:"_updateHash",value:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}},{key:"started",get:function(){return this._started}}]),e}(a.EventEmitter);e.HistoryApi=d},function(t,e){function n(){return""+ ++i}function r(t,e){void 0===e&&(e=[]);var n=t.length,r=-1,i=e[0],o=e[1],s=e[2],a=e[3];switch(e.length){case 0:for(;++r<n;)t[r].handler.call(t[r].ctx);return;case 1:for(;++r<n;)t[r].handler.call(t[r].ctx,i);return;case 2:for(;++r<n;)t[r].handler.call(t[r].ctx,i,o);return;case 3:for(;++r<n;)t[r].handler.call(t[r].ctx,i,o,s);return;case 4:for(;++r<n;)t[r].handler.call(t[r].ctx,i,o,s,a);return;default:for(;++r<n;)t[r].handler.apply(t[r].ctx,e);return}}var i=0;e.callFunc=r;var o=function(){function t(){}return Object.defineProperty(t.prototype,"listeners",{get:function(){return this._listeners},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===r&&(r=!1);var i=(this._listeners||(this._listeners={}))[t]||(this._listeners[t]=[]);return i.push({name:t,once:r,handler:e,ctx:n||this}),this},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){if(this._listeners=this._listeners||{},null==t)this._listeners={};else if(this._listeners[t]){var n=this._listeners[t];if(null==e)this._listeners[t]=[];else for(var r=0;r<n.length;r++){n[r];n[r].handler==e&&this._listeners[t].splice(r,1)}}},t.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(this._listeners||(this._listeners={}))[e]||(this._listeners[e]=[]).concat(this._listeners.all||[]);t.debugCallback&&t.debugCallback(this.constructor.name,this.name,e,n);var s,a,u,c,l=(o.length,[]);for(c=0;c<o.length;c++)s=o[c],a=n,"all"==s.name?(a=[e].concat(n),r([s],a)):l.push(s),s.once===!0&&(u=this._listeners[s.name].indexOf(s),this._listeners[s.name].splice(u,1));return l.length&&this._executeListener(l,n),this},t.prototype._executeListener=function(t,e){var n=r;this.constructor.executeListenerFunction&&(n=this.constructor.executeListenerFunction),n(t,e)},t.prototype.listenTo=function(t,e,r,i,o){void 0===o&&(o=!1);var s,a,u;return s=this._listeningTo||(this._listeningTo={}),a=t.listenId||(t.listenId=n()),s[a]=t,u=o?"once":"on",t[u](e,r,this),this},t.prototype.listenToOnce=function(t,e,n,r){return this.listenTo(t,e,n,r,!0)},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t.listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(i||!Object.keys(t.listeners).length)&&delete this._listeningTo[o];return this},t.prototype.destroy=function(){this.stopListening(),this.off()},t}();e.EventEmitter=o},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(7)),r(n(9)),r(n(11)),r(n(8)),r(n(10)),r(n(12)),r(n(13)),r(n(14))},function(t,e,n){function r(t){return t.filter(function(e,n){for(n+=1;n<t.length;n+=1)if(l.equal(e,t[n]))return!1;return!0})}function i(t,e){for(var n=0,r=t.length;r>n;n++)if(e(t[n]))return!0;return!1}function o(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function s(t,e,n){var r,i;for(r=0;r<t.length;r++)if(i=t[r],e.call(n,i))return i;return null}function a(t,e,n){return Array.prototype.slice.call(t,e,n)}function u(t){return t.reduce(function(t,e){return t.concat(Array.isArray(e)?u(e):e)},[])}function c(t,e,n){var r="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}).map(function(t){return t.value})}var l=n(8);e.unique=r,e.any=i,e.indexOf=o,e.find=s,e.slice=a,e.flatten=u,e.sortBy=c},function(t,e,n){function r(){var t;if(window.hasOwnProperty("XMLHttpRequest"))return new XMLHttpRequest;try{return new ActiveXObject("msxml2.xmlhttp.6.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp.3.0")}catch(e){t=e}try{return new ActiveXObject("msxml2.xmlhttp")}catch(e){t=e}return t}function i(t){return void 0===t&&(t=""),t+ ++y}function o(t,e,n){Array.isArray(n)||(n=[n]),n.forEach(function(n){"function"==typeof e[n]&&(t[n]=s(e[n],e))})}function s(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("function"!=typeof t)throw new Error("method not at function");if(null!=g)return g.call.apply(g,[t,e].concat(n));n=n||[];var i=function(){},o=function(){var r=this instanceof i?this:e;return a(t,r,n.concat(d.slice(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}function a(t,e,n){switch(void 0===n&&(n=[]),n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}}function u(t,e){return h(t,e,[],[])}function c(t,e,n){var r=v.camelcase("on-"+e.replace(":","-"));t[r]&&"function"==typeof t[r]&&a(t[r],t,n),"function"==typeof t.trigger&&(n=[e].concat(n),a(t.trigger,t,n))}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(p.isObject(r)&&r[t])return r[t]}return null}function f(t,e,n){var r;r=e&&p.has(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},p.extend(r,t,n);var i=function(){this.constructor=r};return i.prototype=t.prototype,r.prototype=new i,e&&p.extend(r.prototype,e),r.__super__=t.prototype,r}function h(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var i=toString.call(t);if(i!=toString.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!("function"==typeof s&&s instanceof s&&"function"==typeof a&&a instanceof a))return!1;n.push(t),r.push(e);var u=0,c=!0;if("[object Array]"===i){if(u=t.length,c=u===e.length)for(;u--&&(c=h(t[u],e[u],n,r)););}else{for(var l in t)if(p.has(t,l)&&(u++,!(c=p.has(e,l)&&h(t[l],e[l],n,r))))break;if(c){for(l in e)if(p.has(e,l)&&!u--)break;c=!u}}return n.pop(),r.pop(),c}var p=n(9),d=n(7),v=n(10),y=0,g=Function.prototype.bind;e.ajax=r,e.uniqueId=i,e.proxy=o,e.bind=s,e.callFunc=a,e.equal=u,e.triggerMethodOn=c,e.getOption=l,e.inherits=f,e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}()},function(t,e,n){function r(t){return t===Object(t)}function i(t){return 0===Object.keys(t).length}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!r(t))return t;for(var i,o,s=0;s<e.length;s++)if(i=e[s],r(i))for(o in i)a(i,o)&&(t[o]=i[o]);return t}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),i=0,o=e.length;o>i;i++){var s=e[i];if(void 0!==s&&null!==s){s=Object(s);for(var a=Object.keys(Object(s)),u=0,c=a.length;c>u;u++){var l=a[u],f=Object.getOwnPropertyDescriptor(s,l);void 0!==f&&f.enumerable&&(r[l]=s[l])}}}return r}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var n,r={},i=0;i<e.length;i++)n=e[i],a(t,n)&&(r[n]=t[n]);return r}function c(t,e,n,r){var i=t[e];return"function"==typeof i?p.callFunc(i,n,r||[]):i}function l(t){var e=[];for(var n in t)a(t,n)&&e.push(t[n]);return e}function f(t,e,n){for(var r,i,o=[],s=0,a=t.length;a>s;s++)r=t[s],i=d.any(e,function(t){return n(t,r)}),i&&o.push(r);return o}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[e.length-1],i=e.length,o=p.equal;"function"==typeof r&&(o=r,i--);for(var s=0;i>s;s++){var a=e[s];if(t=f(t,a,o),0===t.length)break}return t}var p=n(8),d=n(7);e.isObject=r,e.isEmpty=i,e.extend=o,e.assign=s,e.has=a,e.pick=u,e.result=c,e.values=l,e.intersection=h},function(t,e){function n(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function r(t,e){var n=t.substring(0,Math.min(e,t.length));return n+(n.length==t.length?"":"...")}function i(t,e){void 0===e&&(e=!1);var n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";var r=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do t/=n,++i;while(Math.abs(t)>=n&&i<r.length-1);return t.toFixed(1)+" "+r[i]}e.camelcase=n,e.truncate=r,e.humanFileSize=i},function(t,e,n){(function(t){function r(t){return t&&"function"==typeof t.then}function i(t){return t?r(t)?t:"function"==typeof t?o.call(this,t):Array.isArray(t)?s.call(this,t):p.isObject(t)?a.call(this,t):e.Promise.resolve(t):t}function o(t){var n=this;return new e.Promise(function(e,r){t.call(n,function(t,n){return t?r(t):(arguments.length>2&&(n=d.slice(arguments,1)),void e(n))})})}function s(t){return e.Promise.all(t.map(i,this))}function a(t){function n(t,e){o[e]=void 0,a.push(t.then(function(t){o[e]=t}))}for(var o=new t.constructor,s=Object.keys(t),a=[],u=0;u<s.length;u++){var c=s[u],l=i.call(this,t[c]);l&&r(l)?n(l,c):o[c]=t[c]}return e.Promise.all(a).then(function(){return o})}function u(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o={};return o.promise=new e.Promise(function(t,e){o.resolve=t,o.reject=e,o.done=function(n,r){return n?e(n):void t(r)}}),"function"==typeof t?(v.callFunc(t,n,r.concat([o.done])),o.promise):o}function c(t,e,n){t.then(function(t){e.call(n,null,t)})["catch"](function(t){e.call(n,t)})}function l(t){var e=u();return null==t?v.nextTick(e.resolve):setTimeout(e.resolve,t),e.promise}function f(t,e,n,r){return void 0===r&&(r=!1),h(t,e,n,r).then(function(){})}function h(t,n,i,o){return void 0===o&&(o=!1),new e.Promise(function(e,s){function a(h,p){if(h&&!o)return s(h);if(h&&l.push(h),u===c)return l.length?s(d.flatten(l)):e(f);var v=n.call(i,t[u++]);r(v)?v.then(function(t){f.push(t),a(null,t)},a):a(v instanceof Error?v:null)}var u=0,c=t.length,l=[],f=[];a(null)})}var p=n(9),d=n(7),v=n(8);e.Promise="undefined"==typeof window?t.Promise:window.Promise,e.isPromise=r,e.toPromise=i,e.thunkToPromise=o,e.arrayToPromise=s,e.objectToPromise=a,e.deferred=u,e.callback=c,e.delay=l,e.eachAsync=f,e.mapAsync=h}).call(e,function(){return this}())},function(t,e,n){function r(t,e){return y.call(t,e)}function i(t,e,n,r){void 0===r&&(r=!1),g.call(t,e,n,r)}function o(t,e,n){m.call(t,e,n)}function s(t,e,n,o,s){var a=t,u=function(t){var n=t.target||t.srcElement;if(!t.delegateTarget)for(;n&&n!=a;n=n.parentNode)r(n,e)&&(t.delegateTarget=n,o(t))},c=!!~w.indexOf(n);return i(t,n,u,c),O.push({eventName:n,handler:u,listener:o,selector:e}),u}function a(t,e,n,r){for(var i=O.slice(),s=0,a=i.length;a>s;s++){var u=i[s],c=u.eventName===n&&(r?u.listener===r:!0)&&(e?u.selector===e:!0);c&&(o(t,u.eventName,u.handler),O.splice(d.indexOf(i,u),1))}}function u(t,e){if(t.classList)for(var n=e.split(" "),r=0,i=n.length;i>r;r++)t.classList.contains(n[r].trim())||t.classList.add(n[r].trim());else t.className=d.unique(t.className.split(" ").concat(e.split(" "))).join(" ")}function c(t,e){if(t.classList)for(var n=e.split(" "),r=0,i=n.length;i>r;r++)t.classList.remove(n[r].trim());else for(var o,n=t.className.split(" "),s=e.split(" "),r=0,i=s.length;i>r;r++)o=n.indexOf(s[r]),~o&&(n=n.splice(o,1))}function l(t,e){if(t.classList)return t.classList.contains(e);var n=new RegExp("\b"+e);return n.test(t.className)}function f(t){if("selectionStart"in t)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange(),n=document.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-n}}function h(t,e,n,r){var s=A.transitionEnd||(A.transitionEnd=b()),a=function(r){o(t,s,a),e.call(n,r)};i(t,s,a)}function p(t,e,n,r){var s=A.animationEnd||(A.animationEnd=_()),a=function(r){o(t,s,a),e.call(n,r)};i(t,s,a)}var d=n(7),v="undefined"!=typeof Element&&Element.prototype||{},y=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||function(t){var e=(this.parentNode||document).querySelectorAll(t)||[];return!!~d.indexOf(e,this)},g=v.addEventListener||function(t,e){return this.attachEvent("on"+t,e)},m=v.removeEventListener||function(t,e){return this.detachEvent("on"+t,e)},b=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null},_=function(){var t=document.createElement("bootstrap"),e={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in e)if(void 0!==t.style[n])return e[n];return null};e.matches=r,e.addEventListener=i,e.removeEventListener=o;var w="focus blur change".split(" "),O=[];e.delegate=s,e.undelegate=a,e.addClass=u,e.removeClass=c,e.hasClass=l,e.selectionStart=f;var A={animationEnd:null,transitionEnd:null};e.transitionEnd=h,e.animationEnd=p,e.domReady=function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),o=!0;t=e.shift();)t()}),function(t){o?setTimeout(t,0):e.push(t)}}},function(t,e,n){function r(t){return"?"+Object.keys(t).reduce(function(e,n){return e.push(n+"="+encodeURIComponent(t[n])),e},[]).join("&")}var i=n(8),o=n(11),s=/^application\/json/,a=/^file:/;e.queryParam=r;var u=function(t,e){return t.status>=200&&t.status<300||304===t.status||0===t.status&&a.test(e)||0===t.status&&"file:"===window.location.protocol},c=function(){function t(t,e){this._method=t,this._url=e,this._xhr=i.ajax()}return t.prototype.send=function(t){return this._data=t,this},t.prototype.withCredentials=function(t){return this._xhr.withCredentials=t,this},t.prototype.end=function(t){var e=this;this._data=t||this._data;var n=o.deferred();this._xhr.addEventListener("readystatechange",function(){return e._xhr.readyState===XMLHttpRequest.DONE?u(e._xhr,e._url)?void n.resolve(e._xhr.responseText):n.reject(new Error("server responded with: "+e._xhr.status)):void 0}),t=this._data;var i=this._url;if(t&&t===Object(t)){var s=r(t);i+=s}return this._xhr.open(this._method,i,!0),this._xhr.send(t),n.promise},t.prototype.json=function(t){var e=this;return this.end(t).then(function(t){var n=e._xhr.getResponseHeader("content-type");if(s.test(n)&&""!==t){var r=JSON.parse(t);return r}throw new Error("json")})},t.prototype.progress=function(t){return this._xhr.addEventListener("progress",t),this},t.prototype.header=function(t,e){return this._xhr.setRequestHeader(t,e),this},t}();e.Request=c;var l;!function(t){function e(t){return new c("GET",t)}function n(t){return new c("POST",t)}function r(t){return new c("PUT",t)}function i(t){return new c("DELETE",t)}t.get=e,t.post=n,t.put=r,t.del=i}(l=e.request||(e.request={}))},function(t,e,n){function r(t){return o.create(t)}var i=n(8),o=function(){function t(t){this.enabled=!1,this.namespace=t}return t.enable=function(t,e){for(var n in this.loggers)e&&n===e?this.loggers[n].enabled=t:e||(this.loggers[n].enabled=t)},t.create=function(e){var n;return this.loggers[e]?n=this.loggers[e].debug:(n=new t(e),this.loggers[e]=n),i.bind(n.debug,n)},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(this.enabled){e[0]=this._coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var r=0;e[0]=e[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;r++;var o=t.formatters[i];if("function"==typeof o){var s=e[r];n=o.call(self,s),e.splice(r,1),r--}return n}),e=this._formatArgs(e),this._log.apply(this,e)}},t.prototype._log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.prototype._coerce=function(t){return t instanceof Error?t.stack||t.message:t},t.prototype._formatArgs=function(t){var e=this.prefix?this.prefix+":":"";return t[0]="["+e+":"+this.namespace+"] "+t[0],t},t.loggers={},t.formatters={j:function(t){return JSON.stringify(t)}},t}();e.Debug=o,e.debug=r},function(t,e,n){"use strict";function r(t){return function(e){var n=t||l.camelcase(e.name);h.Repository.add(c.DependencyType.Controller,n,e)}}function i(t){return function(e){var n=t||l.camelcase(e.name);h.Repository.add(c.DependencyType.Module,n,e)}}function o(t,e){return function(e){var n=t||l.camelcase(e.name);h.Repository.add(c.DependencyType.Service,n,e)}}function s(t){return function(e){h.Repository.add(c.DependencyType.Factory,t,e)}}function a(t){return function(e){f.Metadata.define(c.DIServiceConfig,t,e,void 0)}}function u(t){return function(e){f.Metadata.define(c.Metakey[c.Metakey.Template],t,e,void 0)}}var c=n(16),l=n(6),f=n(17),h=n(27),p=n(17);e.inject=p.inject,e.controller=r,e.module=i,e.service=o,e.factory=s,e.config=a,e.template=u},function(t,e,n){"use strict";function r(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=p.Metadata.getOwn(p.Metadata.paramTypes,t);if(!n){var r=t.toString().match(d);r&&(n=r[1].replace(/,/," ").split(" ").map(function(t){return t.replace(",","").trim()}).filter(function(t){return""!==t}),e&&p.Metadata.define(p.Metadata.paramTypes,n,t,void 0))}return n||[]}function i(t){var e=void 0;if(t.constructor===Array){var n=t.pop();e=t,t=n,t.inject=e}else{if("function"!=typeof t)return[t,null];if(e=h.result(t,"inject"),!e||0==e.length){var i=t;i.__metadata__&&i.__metadata__.undefined["design:paramtypes"]&&delete i.__metadata__.undefined["design:paramtypes"],e=r(t),i.inject=e}}return[t,e]}function o(t){var e=void 0,n=void 0;try{e=t()}catch(r){n=r}return[e,n]}function s(t,e){var n=void 0,r=void 0,i=void 0,s=t.inject;if(!s)return h.Promise.resolve([]);for(n=0,r=s.length;r>n;n++){if(i=o(function(){return e.get(s[n])}),null!=i[1])return h.Promise.reject(i[1]);s[n]=i[0]}return h.Promise.all(s)}function a(t){return function(e){var n=v[v.DependencyType];p.Metadata.define(n,t,e,void 0)}}function u(t){var e=v[v.DependencyType],n=p.Metadata.getOwn(e,t,void 0);return n}function c(t,e){return u(t)===e}function l(t,e){var n=p.Metadata.instanceActivator;p.Metadata.define(n,e,t,void 0)}function f(t,e){var n=p.Metadata.dependencyResolver;p.Metadata.define(n,e,t,void 0)}var h=n(6),p=n(17),d=/function[^(]*\(([^)]*)\)/i;e.getFunctionParameters=r,function(t){t[t.Service=0]="Service",t[t.Module=1]="Module",t[t.Controller=2]="Controller",t[t.Factory=3]="Factory"}(e.DependencyType||(e.DependencyType={}));e.DependencyType;!function(t){t[t.DependencyType=0]="DependencyType",t[t.Template=1]="Template"}(e.Metakey||(e.Metakey={}));var v=e.Metakey;e.DIServiceConfig="mobyjs:service:config",e.getDependencies=i,e.resolveDependencies=s,e.setDependencyType=a,e.getDependencyType=u,e.isDependencyType=c,e.setActivator=l,e.setDependencyResolver=f},function(t,e,n){t.exports=n(18)},function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}function o(){}Object.defineProperty(e,"__esModule",{value:!0}),o.name||Object.defineProperty(Function.prototype,"name",{get:function(){var t=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:t}),t}});var s="0.0.6";e.Version=s;var a=n(19);i(e,r(a,i));var u=n(23);i(e,r(u,i));var c=n(26);i(e,r(c,i));var l=n(20);i(e,r(l,i))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=u.Metadata.getOwn(u.Metadata.paramTypes,t);if(!n){var r=t.toString().match(l);r&&(n=r[1].replace(/\W+/," ").split(" ").map(function(t){return t.replace(",","").trim()}).filter(function(t){return""!==t}),e&&u.Metadata.define(u.Metadata.paramTypes,n,t,void 0))}return n||[]}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.getFunctionParameters=o;var a=n(20),u=n(21),c=n(22),l=/function[^(]*\(([^)]*)\)/i,f=function(t){function e(n){r(this,e),t.call(this,n),this.name="BadKeyError",this.message="key not registered with container"}return i(e,t),e}(c.DIError);e.DIBadKeyError=f;var h=Object.freeze([]);e.emptyParameters=h;var p="moby:instance-activator",d="moby:registration",v="moby:dependency-resolver";
u.Metadata.instanceActivator=p,u.Metadata.registration=d,u.Metadata.dependencyResolver=v;var y=function(){function t(e){r(this,t),this.entries=new Map,this.constructionInfo=e||new Map}return t.prototype.makeGlobal=function(){return t.instance=this,this},t.prototype.autoRegister=function(t,e,n){var r;if(null===t||void 0===t)throw new f("no key");"function"==typeof t?(r=u.Metadata.get(d,t,n),void 0!==r?r.register(this,e||t,t):this.registerSingleton(e||t,t,n)):this.registerInstance(t,t)},t.prototype.unregister=function(t){this.entries["delete"](t)},t.prototype.hasHandler=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(null===t||void 0===t)throw new f;return this.entries.has(t)||e&&this.parent&&this.parent.hasHandler(t,e)},t.prototype.get=function(e,n){var r;if(null===e||void 0===e)throw new f;if(e===t)return this;if(e instanceof a.Resolver)return e.get(this);if(r=this.entries.get(e),void 0!==r)return r[0](this);if(this.parent&&this.parent.hasHandler(e))return this.parent.get(e,n);if("string"==typeof e)throw(0,c.createError)("DIResolveError","no component registered for key: "+e);return this.autoRegister(e,n),r=this.entries.get(e),r[0](this)},t.prototype.getAll=function(t){var e,n=this;if(null===t||void 0===t)throw new f;return e=this.entries.get(t),void 0!==e?e.map(function(t){return t(n)}):this.parent?this.parent.getAll(t):[]},t.prototype.createChild=function(){var e=new t(this.constructionInfo);return e.parent=this,e},t.prototype.resolveDependencies=function(t,e){var n,r,i=this._getOrCreateConstructionSet(t,e),o=i.keys,s=new Array(o.length);try{for(n=0,r=o.length;r>n;++n)s[n]=this.get(o[n])}catch(a){var u="Error";throw r>n&&(u+=" The argument at index "+n+" (key:"+o[n]+") could not be satisfied."),(0,c.createError)("DependencyError",u,[a])}return s},t.prototype.invoke=function(t,e,n){var r=this._getOrCreateConstructionSet(t,n);try{var i,o;return o=r.dependencyResolver?r.dependencyResolver.resolveDependencies(t):this.resolveDependencies(t,n),void 0!==e&&Array.isArray(e)&&(o=o.concat(e)),r.activator.invoke(t,o,n,i)}catch(s){var u=r.activator instanceof a.ClassActivator?"instantiating":"invoking",l="Error "+u+" "+t.name+".";throw l+=" Check the inner error for details.",(0,c.createError)("DIInvokeError",l,[s])}},t.prototype.registerInstance=function(t,e){this.registerHandler(t,function(t){return e})},t.prototype.registerTransient=function(t,e,n){this.registerHandler(t,function(t){return t.invoke(e,null,n)})},t.prototype.registerSingleton=function(t,e,n){var r;this.registerHandler(t,function(t){return r||(r=t.invoke(e,null,n))})},t.prototype.registerHandler=function(t,e){this._getOrCreateEntry(t).push(e)},t.prototype._getOrCreateEntry=function(t){var e;if(null===t||void 0===t)throw new c.DIError("key cannot be null or undefined.  (Are you trying to inject something that doesn't exist with DI?)");return e=this.entries.get(t),void 0===e&&(e=[],this.entries.set(t,e)),e},t.prototype._getOrCreateConstructionSet=function(t,e){var n=this.constructionInfo.get(t);return void 0===n&&(n=this._createConstructionSet(t,e),this.constructionInfo.set(t,n)),n},t.prototype._createConstructionSet=function(t,e){var n={activator:u.Metadata.getOwn(u.Metadata.instanceActivator,t,e)||a.ClassActivator.instance,dependencyResolver:u.Metadata.getOwn(v,t,e)||this};return void 0!==t.inject?("function"==typeof t.inject?n.keys=t.inject():n.keys=t.inject,n):(n.keys=u.Metadata.getOwn(u.Metadata.paramTypes,t,e)||o(t)||h,n)},s(t,[{key:"root",get:function(){for(var t=this,e=t;e;)e=t.parent,e&&(t=e);return t}}]),t}();e.DIContainer=y},function(t,e){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e){r(this,t),this.key=e}return t.prototype.register=function(t,e,n){t.registerTransient(this.key||e,n)},t}();e.TransientRegistration=i;var o=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,t),"boolean"==typeof e?this.registerInChild=e:(this.key=e,this.registerInChild=n)}return t.prototype.register=function(t,e,n){var r=this.registerInChild?t:t.root;r.registerSingleton(this.key||e,n)},t}();e.SingletonRegistration=o;var s=function(){function t(){r(this,t)}return t.prototype.get=function(t){throw new Error("A custom Resolver must implement get(container) and return the resolved instance(s).")},t}();e.Resolver=s;var a=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){var e=this;return function(){return t.get(e.key)}},e.of=function(t){return new e(t)},e}(s);e.Lazy=a;var u=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){return t.getAll(this.key)},e.of=function(t){return new e(t)},e}(s);e.All=u;var c=function(t){function e(n){var i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,e),t.call(this),this.key=n,this.checkParent=i}return n(e,t),e.prototype.get=function(t){return t.hasHandler(this.key,this.checkParent)?t.get(this.key):null},e.of=function(t){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return new e(t,n)},e}(s);e.Optional=c;var l=function(t){function e(n){r(this,e),t.call(this),this.key=n}return n(e,t),e.prototype.get=function(t){return t.parent?t.parent.get(this.key):null},e.of=function(t){return new e(t)},e}(s);e.Parent=l;var f=function(){function t(){r(this,t)}return t.prototype.invoke=function(t,e){return Reflect.construct(t,e)},t}();e.ClassActivator=f,f.instance=new f;var h=function(){function t(){r(this,t)}return t.prototype.invoke=function(t,e){return t.apply(void 0,e)},t}();e.FactoryActivator=h,h.instance=new h},function(t,e){(function(t){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){var e;if(e="function"==typeof t.decorators?t.decorators():t.decorators,"function"!=typeof e._decorate)throw new Error("The return value of your decorator's method was not valid.");delete t.decorators,e._decorate(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=Function.prototype.bind,o=function(){return"undefined"!=typeof self?self:"undefined"!=typeof t?t:new Function("return this")()}(),s=Object.freeze({}),a="__metadata__";"undefined"==typeof o.System&&(o.System={isFake:!0}),"undefined"==typeof o.System.forEachModule&&(o.System.forEachModule=function(){}),"undefined"==typeof o.Reflect&&(o.Reflect={}),"undefined"==typeof o.Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(t,e,n){return((e[a]||s)[n]||s)[t]}),"undefined"==typeof o.Reflect.defineMetadata&&(Reflect.defineMetadata=function(t,e,n,r){var i=n.hasOwnProperty(a)?n[a]:n[a]={},o=i[r]||(i[r]={});o[t]=e}),"undefined"==typeof o.Reflect.metadata&&(Reflect.metadata=function(t,e){return function(n,r){Reflect.defineMetadata(t,e,n,r)}}),Reflect.construct=function(t,e){return new(i.apply(t,[null].concat(n(e))))};var u={global:o,noop:function(){},paramTypes:"design:paramtypes",properties:"design:properties",get:function(t,e,n){if(e){var r=u.getOwn(t,e,n);return void 0===r?u.get(t,Object.getPrototypeOf(e),n):r}},getOwn:function(t,e,n){return e?(e.hasOwnProperty("decorators")&&r(e),Reflect.getOwnMetadata(t,e,n)):void 0},define:function(t,e,n,r){Reflect.defineMetadata(t,e,n,r)},getOrCreateOwn:function(t,e,n,r){var i=u.getOwn(t,n,r);return void 0===i&&(i=new e,Reflect.defineMetadata(t,i,n,r)),i}};e.Metadata=u}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e,n){var r=void 0;return r=n?new s(e,n):new o(e),r.name=t,r}Object.defineProperty(e,"__esModule",{value:!0}),e.createError=i;var o=function(t){function e(r){n(this,e),t.call(this,r),this.message=r}return r(e,t),e.prototype.toString=function(){return"["+this.name+": "+this.message+"]"},e}(Error);e.DIError=o;var s=function(t){function e(r,i){n(this,e),t.call(this,r),this.errors=i}return r(e,t),e.prototype.toString=function(){return"["+this.name+": "+this.message+"], errors:"+this.errors},e}(o);e.DIAggregateError=s},function(t,e,n){"use strict";function r(t,e){var n=e({},t);return delete n["default"],n}function i(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21);i(e,r(o,i));var s=n(24);i(e,r(s,i))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),i={configure:{parameterizedDecorator:function(t,e){i[t]=function(){var e=new r.DecoratorApplicator;return e[t].apply(e,arguments)},r.DecoratorApplicator.prototype[t]=function(){var t=e.apply(null,arguments);return this.decorator(t)}},simpleDecorator:function(t,e){i[t]=function(){return(new r.DecoratorApplicator).decorator(e)},r.DecoratorApplicator.prototype[t]=function(){return this.decorator(e)}}}};e.Decorators=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){n(this,t),this._first=null,this._second=null,this._third=null,this._rest=null}return t.prototype.decorator=function(t){return null===this._first?(this._first=t,this):null===this._second?(this._second=t,this):null===this._third?(this._third=t,this):(null===this._rest&&(this._rest=[]),this._rest.push(t),this)},t.prototype._decorate=function(t){var e,n,r;if(null!==this._first&&this._first(t),null!==this._second&&this._second(t),null!==this._third&&this._third(t),r=this._rest,null!==r)for(e=0,n=r.length;n>e;++e)r[e](t)},t}();e.DecoratorApplicator=r},function(t,e,n){"use strict";function r(t){var e=function(t){t.inject=l.Metadata.getOwn(l.Metadata.paramTypes,t)||h.emptyParameters};return t?e(t):e}function i(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return function(t){t.inject=e}}function o(t,e){return function(n){l.Metadata.define(l.Metadata.registration,t,n,e)}}function s(t,e){return o(new f.TransientRegistration(t),e)}function a(t,e,n){return void 0===e&&(e=!1),o(new f.SingletonRegistration(t,e),n)}function u(t,e){return function(n){l.Metadata.define(l.Metadata.instanceActivator,t,n,e)}}function c(){return u(f.FactoryActivator.instance)}Object.defineProperty(e,"__esModule",{value:!0}),e.autoinject=r,e.inject=i,e.registration=o,e["transient"]=s,e.singleton=a,e.instanceActivator=u,e.factory=c;var l=n(23),f=n(20),h=n(19);l.Decorators.configure.simpleDecorator("autoinject",r),l.Decorators.configure.parameterizedDecorator("inject",i),l.Decorators.configure.parameterizedDecorator("registration",o),l.Decorators.configure.parameterizedDecorator("transient",s),l.Decorators.configure.parameterizedDecorator("singleton",a),l.Decorators.configure.parameterizedDecorator("instanceActivator",u),l.Decorators.configure.parameterizedDecorator("factory",c)},function(t,e,n){"use strict";var r,i=n(16),o=n(6),s=n(17);!function(t){function e(e,n,r){var a=void 0;(a=o.find(t.items,function(t){return t.name==n}))&&t.items.splice(t.items.indexOf(a),1);var u=s.Metadata.get(i.DIServiceConfig,r);t.items.push({name:n,handler:r,type:e,config:u})}function n(t){return!!u(t)}function r(t,e){return!!a(t,e)}function a(e,n){return o.find(t.items,function(t){return t.name==n&&t.type==e})}function u(e){return o.find(t.items,function(t){return t.name==e})}t.items=[],t.add=e,t.hasAny=n,t.has=r,t.get=a,t.any=u}(r=e.Repository||(e.Repository={}))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(6),s=n(29),a=n(30),u=function(){function t(e,n,i){r(this,t),this.container=i,this.controller=n,this.name=e}return i(t,[{key:"create",value:function(t){var e=this;if(this.container.hasInstance(this.name))return o.Promise.resolve(this.container.get(this.name));this.container.registerSingleton(this.name,this.controller);var n=this.container.get("$context");this.container.registerInstance("$context",n.$createChild(),!0),n=this.container.get("$context");var r=t.contextName||this.name;return this.resolveTemplate(n,t).then(function(i){e.container.registerInstance("template",i,!0);var o=i.render();n.$observe();var s=e.container.get(e.name);return n[r]=s,n.$unobserve(),t.el&&(t.el.innerHTML="",t.el.appendChild(o)),s})}},{key:"resolveTemplate",value:function(t,e){var n=this.container.get("$templateCreator"),r=void 0;if(e.el){var i=e.el.innerHTML;r=o.Promise.resolve(i)}else{if(!e.template)return o.Promise.reject(new s.StickError("no element or template"));if(e.template instanceof a.Template){var u=e.template.view(t.__model,{container:this.container});return o.Promise.resolve(u)}r=this.container.get("$templateResolver")(e.template)}return r.then(function(e){return n(e,t.__model)})}},{key:"destroy",value:function(){this.container.clear(),this.container.entries.clear()}}]),t}();e.ControllerFactory=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},o=function(t){function e(t){n(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.message=t}return r(e,t),e}(Error);e.StickError=o;var s=function(t){function e(){n(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),e}(o);e.StickDependencyError=s},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(31)),r(n(32)),r(n(34)),r(n(38)),r(n(39)),r(n(40)),r(n(42)),r(n(41)),r(n(33))},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=8,this.nodeValue=e}return t.prototype.render=function(t){return t.document.createComment(this.nodeValue)},t}();e.Comment=r,e.comment=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(33),o=function(){function t(e,n){r(this,t),this.nodeType=-200,this.vnode=e,this.bindingClass=n,this.vnode.parentNode=this}return t.prototype.render=function(t,e){return t.components.has(this.vnode.tagName)?this._renderComponent(t,e):this._renderElement(t,e)},t.prototype._renderElement=function(t,e){var n=this.vnode.render(t,e);return e.push(new a(n,this.bindingClass,t)),n},t.prototype._renderComponent=function(t,e){var n=[],r=this.vnode.render(t,n);return e.push(new s(n[0],this.bindingClass,t)),r},t}();e.Dynamic=o,e.dynamic=function(t,e){return new o(t,e)};var s=function(){function t(e,n,i){r(this,t),this.renderer=e,this.bindingClass=n,this.options=i}return t.prototype.generate=function(t,e){this.renderer.generate(t,e);var n=e.bindings[e.bindings.length-1];e.bindings.splice(e.bindings.indexOf(n),0,new this.bindingClass(n,e))},t}(),a=function(){function t(e,n,i){r(this,t),this.ref=e,this.bindingClass=n,this.options=i}return t.prototype.generate=function(t,e){this._refPath||(this._refPath=i.getNodePath(this.ref)),e.bindings.push(new this.bindingClass(i.getNodeByPath(t,this._refPath),e))},t}()},function(t,e){"use strict";function n(t,e){for(var n=t,r=0,i=e.length;i>r;r++)n=n.childNodes[e[r]];return n}function r(t){for(var e=[],n=t.parentNode,r=t;n;)for(e.unshift(Array.prototype.indexOf.call(n.childNodes,r)),r=n,n=n.parentNode;n&&n.nodeType>12;)n=n.parentNode;return e}e.getNodeByPath=n,e.getNodePath=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n,r){for(var i in n){var o=e.attributes.get(i),s=new o(t,i,n[i],r);s.update&&r.bindings.push(s)}}var o=n(35),s=n(36),a=n(37),u=function(){function t(e,n,i){r(this,t),this.nodeType=1,this.tagName=String(e).toLocaleLowerCase(),this.childNodes=i,this.attributes=n||{};for(var o=0;o<i.length;o++)i[o].parentNode=this}return t.prototype.render=function(t,e){var n=t.components;return n.has(this.tagName)?this._renderComponent(n.get(this.tagName),t,e):this._renderElement(t,e)},t.prototype.setAttributes=function(t,e){"string"==typeof t?this.attributes[t]=e:o.extend(this.attributes,t)},t.prototype._renderComponent=function(t,e,n){var r=new s.FragmentSection(e.document);return n.push(new c(t,r,this,this._splitAttributes(e),e)),r.render()},t.prototype._renderElement=function(t,e){var n=t.document.createElement(this.tagName),r=this._splitAttributes(t);for(var i in r.staticAttributes)n.setAttribute(i,r.staticAttributes[i]);for(var o=this.childNodes,s=Array.isArray(o),u=0,o=s?o:o[Symbol.iterator]();;){var c;if(s){if(u>=o.length)break;c=o[u++]}else{if(u=o.next(),u.done)break;c=u.value}var f=c;n.appendChild(f.render(t,e))}return Object.keys(r.dynamicAttributes).length&&e.push(new l(new a.NodeSection(t.document,n),t,r.dynamicAttributes)),n},t.prototype._splitAttributes=function(t){var e={},n={};if(t.attributes)for(var r in this.attributes){var i=t.attributes.get(r);!i||i.test&&!i.test(this,r,this.attributes[r])?n[r]=this.attributes[r]:e[r]=this.attributes[r]}else n=this.attributes;return{dynamicAttributes:e,staticAttributes:n}},t}();e.Element=u,e.element=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return new u(t,e,r)};var c=function(){function t(e,n,i,o,s){r(this,t),this.section=n,this.componentClass=e,this.element=i,this.options=s,this.attributes=o.staticAttributes,this.dynamicAttributes=o.dynamicAttributes}return t.prototype.generate=function(t,e){this._marker||(this._marker=this.section.createMarker());var n=new this.componentClass(this._marker.createSection(t),this.element,this.attributes,e);Object.keys(this.dynamicAttributes).length&&i(n,this.options,this.dynamicAttributes,e),n.update&&e.bindings.push(n)},t}(),l=function(){function t(e,n,i){r(this,t),this.section=e,this.options=n,this.attributes=i}return t.prototype.generate=function(t,e){this._marker||(this._marker=this.section.createMarker()),i(this._marker.findNode(t),this.options,this.attributes,e)},t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){for(var e=void 0,n=void 0,r=arguments.length,i=Array(r>1?r-1:0),o=1;r>o;o++)i[o-1]=arguments[o];for(var s=i,a=Array.isArray(s),u=0,s=a?s:s[Symbol.iterator]();;){if(a){if(u>=s.length)break;e=s[u++]}else{if(u=s.next(),u.done)break;e=u.value}if(e===Object(e))for(n in e)t[n]=e[n]}return t}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return Array.prototype.slice.apply(t,n)}function o(t,e,n){var i;i=e&&Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},r(i,t,n);var o=function(){this.constructor=i};return o.prototype=t.prototype,i.prototype=new o,e&&r(i.prototype,e),i.__super__=t.prototype,i}function s(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;n>o;o++)r[o-2]=arguments[o];if("function"!=typeof t)throw new Error("method not at function");if(null!=c)return c.call.apply(c,[t,e].concat(r));r=r||[];var s=function(){},a=function(){var n=this instanceof s?this:e;return t.apply(n,r.concat(i(arguments)))};return s.prototype=this.prototype,a.prototype=new s,a}function a(t){return l.create(t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.extend=r,e.slice=i,e.extendClass=o;var c=Function.prototype.bind;e.bind=s;var l=function(){function t(e){n(this,t),this.enabled=!1,this.namespace=e}return t.enable=function(t,e){for(var n in this.loggers)e&&n===e?this.loggers[n].enabled=t:e||(this.loggers[n].enabled=t)},t.create=function(e){var n=void 0;return this.loggers[e]?n=this.loggers[e].debug:(n=new t(e),this.loggers[e]=n),s(n.debug,n)},t.prototype.debug=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(this.enabled){n[0]=this._coerce(n[0]),"string"!=typeof n[0]&&(n=["%o"].concat(n));var i=0;n[0]=n[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;i++;var o=t.formatters[r];if("function"==typeof o){var s=n[i];e=o.call(self,s),n.splice(i,1),i--}return e}),n=this._formatArgs(n),this._log.apply(this,n)}},t.prototype._log=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return"object"===("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.prototype._coerce=function(t){return t instanceof Error?t.stack||t.message:t},t.prototype._formatArgs=function(t){return t[0]="[templ:"+this.namespace+"] "+t[0],t},t}();l.loggers={},l.formatters={j:function(t){return JSON.stringify(t)}},e.Debug=l,e.debug=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(33),o=function(){function t(e,n,i){if(r(this,t),this.document=e,this.start=n||e.createTextNode(""),this.end=i||e.createTextNode(""),!this.start.parentNode){var o=e.createDocumentFragment();o.appendChild(this.start),o.appendChild(this.end)}}return t.prototype.appendChild=function(t){this.end.parentNode.insertBefore(t,this.end)},t.prototype.render=function(){return this.start.parentNode},t.prototype.remove=function(){var t=this.removeChildNodes();return t.insertBefore(this.start,t.childNodes[0]),t.appendChild(this.end),this},t.prototype.removeChildNodes=function(){for(var t=this.document.createDocumentFragment(),e=this.start,n=e.nextSibling,r=this.end;n!==r;)t.appendChild(n),n=e.nextSibling;return t},t.prototype.createMarker=function(){return new s(this.document,i.getNodePath(this.start),i.getNodePath(this.end))},t.prototype.clone=function(){var e;if(11===this.start.parentNode.nodeType)e=this.start.parentNode.cloneNode(!0);else{e=this.document.createDocumentFragment();for(var n=this._getChildNodes(),r=n.length,i=0;r>i;i++)e.appendChild(n[i].cloneNode(!0))}var o=e.childNodes[0],s=e.childNodes[e.childNodes.length-1];return new t(this.document,o,s)},t.prototype._getChildNodes=function(){for(var t=this.start,e=this.end.nextSibling,n=[];t!==e;)n.push(t),t=t.nextSibling;return n},t}();e.FragmentSection=o;var s=function(){function t(e,n,i){r(this,t),this.document=e,this.startPath=n,this.endPath=i}return t.prototype.createSection=function(t){return new o(this.document,i.getNodeByPath(t,this.startPath),i.getNodeByPath(t,this.endPath))},t}();e.FragmentSectionMarker=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(33),o=function(){function t(e,n){r(this,t),this.document=e,this.node=n}return t.prototype.createMarker=function(){return new s(this.document,i.getNodePath(this.node))},t.prototype.appendChild=function(t){this.node.appendChild(t)},t.prototype.render=function(){return this.node},t.prototype.remove=function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},t.prototype.removeChildren=function(){for(;this.node.childNodes.length;)this.node.removeChild(this.node.childNodes[0])},t.prototype.clone=function(){return new t(this.document,this.node.cloneNode(!0))},t}();e.NodeSection=o;var s=function(){function t(e,n){r(this,t),this.document=e,this.path=n}return t.prototype.createSection=function(t){return new o(this.document,this.findNode(t))},t.prototype.findNode=function(t){return i.getNodeByPath(t,this.path)},t}();e.NodeSectionMarker=s},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=11,this.childNodes=e;for(var r=0;r<e.length;r++)e[r].parentNode=this}return t.prototype.render=function(t,e){for(var n=t.document.createDocumentFragment(),r=0,i=this.childNodes.length;i>r;r++)n.appendChild(this.childNodes[r].render(t,e));return n},t}();e.Fragment=r,e.fragment=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e){var n=void 0;if(11==e.nodeType){var r=new i.FragmentSection(t);r.appendChild(e),n=r}else n=new o.NodeSection(t,e);return n}var i=n(36),o=n(37);e.section=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return new a(t,e)}var o=n(39),s=n(41),a=function(){function t(e,n){r(this,t),this._renderers=[],this.vnode=e;var i=e.render(n,this._renderers);this.section=o.section(n.document,i),this.options=n}return t.prototype.view=function e(t,n){for(var r=this.section.clone(),i=this.options.viewClass||s.View,e=new i(r,this,t,n),o=this._renderers,a=Array.isArray(o),u=0,o=a?o:o[Symbol.iterator]();;){var c;if(a){if(u>=o.length)break;c=o[u++]}else{if(u=o.next(),u.done)break;c=u.value}var l=c;l.generate(r.node||r.start.parentNode,e)}return e},t}();e.Template=a,e.template=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,r,i,o){n(this,t),this.section=e,this.template=r,this.context=i,this.bindings=[]}return t.prototype.update=function(){for(var t=this.bindings,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;i.update()}},t.prototype.addListener=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return t.addEventListener(e,n,r),n},t.prototype.removeListener=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];t.removeEventListener(e,n,r)},t.prototype.render=function(){return this.section.render()},t.prototype.remove=function(){for(var t=this.bindings,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;i.destroy()}return this.section.remove()},t}();e.View=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=-201,this.nodeValue=e}return t.prototype.render=function(t){return t.document.createTextNode(this.nodeValue)},t}();e.Text=r,e.text=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(16),a=n(27),u=n(29),c=n(17),l=n(6),f=n(30),h=n(44),p=n(28),d=function(){function t(e,n,i){if(r(this,t),3!=arguments.length)throw new Error;this.name=e,this.module=n,this.container=i,this.container.registerSingleton(e,n),this.container.registerInstance("$container",this.container)}return o(t,[{key:"controller",value:function(t,e){var n=s.getDependencies(e),r=i(n,2),o=r[0],a=r[1];if(!o)throw new u.StickError("controller definition should be a function, function constructor or a object literal");var c=void 0;if("function"!=typeof o&&l.isObject(o)){var f=l.extend({},o);"function"==typeof o.initialize?(c=o.initialize,delete f.initialize):"function"==typeof o.constructor&&(c=o.constructor,delete f.constructor),a&&0!=a.length||s.getDependencies(c),l.assign(c.prototype,f)}else"function"==typeof o&&(c=o);if("function"!=typeof c)throw new u.StickError("controller defition should be a function or an object literal");s.setDependencyType(s.DependencyType.Controller)(c);var h=new p.ControllerFactory(t,c,this.container.createChild());return this.container.registerInstance(t,h,!0),this}},{key:"service",value:function(t,e){var n=s.getDependencies(e),r=i(n,1),o=r[0];if(!o||"function"!=typeof o)throw new u.StickError("service should be a function");return s.setDependencyType(s.DependencyType.Service)(o),this.container.registerService(t,o),this}},{key:"factory",value:function(t,e){var n=s.getDependencies(e),r=i(n,1),o=r[0];if(!o)throw new u.StickError("factory");return"function"==typeof o?(s.setDependencyType(s.DependencyType.Factory)(o),s.setActivator(o,c.FactoryActivator.instance),this.container.registerSingleton(t,o)):this.container.registerInstance(t,o),this}},{key:"create",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this.container.hasInstance(this.name))return l.Promise.resolve(this.container.get(this.name));this.container.registerSingleton("$context",h.getContext());var n=this.container.get("$context");if(e.parent&&(this.container.parent=e.parent,e.parent.hasHandler("$context")&&(n.__parent=e.parent.get("$context"))),e.template||e.el)return this.resolveTemplate(n,e).then(function(r){if(t.container.registerInstance("template",r,!0),e.el){var i=t.container.get("template").render();e.el.innerHTML="",e.el.appendChild(i),t.container.registerInstance("$elm",e.el,!0)}n.$observe();var o=t.container.get(t.name);return n.$unobserve(),o});n.$observe();var r=this.container.get(this.name);return n.$unobserve(),l.Promise.resolve(r)}},{key:"configure",value:function(t){var e=t;/Provider$/.test(t)?t=t.replace("Provider",""):e=t+"Provider";if(this.container.hasHandler(e,!1,!1))return Promise.resolve(this.container.get(t));if(a.Repository.has(s.DependencyType.Service,t)){var n=a.Repository.get(s.DependencyType.Service,t);if(this.container.register(n),this.container.hasHandler(e,!1,!1))return Promise.resolve(this.container.get(e))}return l.Promise.reject(new Error("No provider for "+t.replace("Provider","")))}},{key:"resolveTemplate",value:function(t,e){var n=this.container.get("$templateCreator"),r=void 0;if(e.el&&null==e.template&&(r=l.Promise.resolve(e.el.innerHTML)),!r&&e.template){if(e.template instanceof f.Template){var i=e.template.view(t.__model,{container:this.container});return l.Promise.resolve(i)}r=this.container.get("$templateResolver")(e.template);
}else if(!e.el)return l.Promise.reject(new u.StickError("no element or template"));return r.then(function(e){return n(e,t.__model)})}},{key:"destroy",value:function(){}}]),t}();e.ModuleFactory=d},function(t,e,n){"use strict";function r(t,e){return"function"==typeof Object.observe?new o.ObjectObserveProxy(e):new s.DirtyObjectObserver(e)}function i(){return"function"==typeof Object.observe?o.ObjectObserveProxy:s.DirtyObjectObserver}var o=n(45),s=n(53);e.createContext=r,e.getContext=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},a=n(46),u=function(t){function e(){r(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),o(e,[{key:"$observe",value:function(){Object.observe(this,this.__onchange)}},{key:"$unobserve",value:function(){Object.unobserve(this,this.__onchange)}},{key:"$createChild",value:function(){var t=new e(this.__mediator);return t.__parent=this,t}}]),e}(a.Context);e.ObjectObserveProxy=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n,r){var i,o=arguments.length,s=3>o?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(3>o?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},a=n(47),u=n(6),c=n(15);e.get_atributes=function(t){var e=Object.keys(t),n={},r={};return e.map(function(e){return{key:e,value:t[e]}}).filter(function(e){return u.has(t,e.key)?e.value&&u.isPromise(e.value)?(n[e.key]=e.value,delete t[e.key],!1):!0:!1}).forEach(function(t){r[t.key]=t.value}),{attr:r,deferred:n}};var l=["__queue","__parent","__model","__subscriber","__mediator"],f=function(){function t(e){r(this,t),this.__queue=0,this.__mediator=e,this.__model=new a.NestedModel,this.__onchange=u.bind(this.__onchange,this),this.__model.on("change",u.bind(this.__onModelChange,this)),this.__subscribers=new Map}return o(t,[{key:"$call",value:function(t,e,n){var r=this;this.$observe();var i=u.callFunc(t,e,n);if(i)return this.__queue++,u.toPromise(i).then(function(){return 0===--r.__queue&&r.$unobserve(),i});var o=function(){var t=u.deferred();return u.nextTick(function(){0==r.__queue&&r.$unobserve(),t.resolve(null)}),{v:t.promise}}();return"object"==typeof o?o.v:void 0}},{key:"$subscribe",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],i={event:t,handler:function(){for(var t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];n.$call(e,r,i)},id:u.uniqueId("ctx")};return this.__subscribers.set(e,i),this.__mediator.subscribe(t,i.handler,this),i.id}},{key:"__onModelChange",value:function(){var t=this.__model.changed;for(var e in t)this[e]!=t[e]&&(this[e]=t[e])}},{key:"$unsubscribe",value:function(t,e){var n=null,r=null;if("string"==typeof e){var o=!0,s=!1,a=void 0;try{for(var u,c=this.__subscribers[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=i(u.value,2),f=l[0],h=l[1];h.id===e&&(n=this.__subscribers.get(f),r=f)}}catch(p){s=!0,a=p}finally{try{!o&&c["return"]&&c["return"]()}finally{if(s)throw a}}}else this.__subscribers.has(e)&&(n=this.__subscribers.get(e),r=e);return null!==n&&(this.__mediator.unsubscribe(t,n.handler),this.__subscribers["delete"](r)),this}},{key:"$publish",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];(e=this.__mediator).publish.apply(e,[t].concat(r))}},{key:"__onchange",value:function(t){for(var n=this,r={},i=0,o=t.length;o>i;i++){var s=t[i],a=s.name.split(".");~l.indexOf(a[0])||("delete"===s.type?this.__model.set(s.name,{unset:!0}):r[s.name]=this[s.name])}var c=e.get_atributes(r),f=c.attr,h=c.deferred;if(Object.keys(f).length){var p=this.__normalizeAttr(f);this.$unobserve(),this.__model.set(p),u.extend(this,p),this.$observe()}Object.keys(h).length&&(this.__queue++,u.toPromise(h).then(function(t){0===--n.__queue&&n.$unobserve(),t=n.__normalizeAttr(t),u.extend(n,t),n.__model.set(t)})["catch"](function(t){n.__model.trigger("error",t),n.$unobserve()}))}},{key:"__normalizeAttr",value:function(t){for(var e in t){var n=t[e];Array.isArray(n)&&n.length>0&&u.isObject(n[0])&&(n=new a.Collection(n),t[e]=n)}return t}},{key:"$destroy",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this.__subscribers[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=i(r.value,2),a=s[0],u=s[1];this.__mediator.unsubscribe(u.event,a)}}catch(c){e=!0,n=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw n}}this.__subscribers.clear()}},{key:"$root",get:function(){for(var t=this.__parent;null!=t;){if(!t.__parent)return t;t=t.__parent}return this}},{key:"$parent",get:function(){return this.__parent}}]),t}();f=s([c.inject("$mediator")],f),e.Context=f},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(48)),r(n(50)),r(n(51)),r(n(52))},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(49),o=n(50),s=n(9),a=n(7),u=n(8),c={add:!0,remove:!0,merge:!0},l={add:!0,remove:!1},f=function(t){function e(e,n){void 0===n&&(n={}),this.options=n,this.options.model&&(this.Model=this.options.model),e&&this.add(e),t.call(this)}return r(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.models.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Model",{get:function(){return this._model||(this._model=o.Model),this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"models",{get:function(){return this._models||(this._models=[])},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){var n=this;void 0===e&&(e={}),Array.isArray(t)?t=t.map(function(t){return t instanceof n.Model?t:n.create(t,{add:!1})}):t instanceof this.Model||(t=this.create(t,{add:!1})),this.set(t,s.extend({merge:!1},e,l))},e.prototype.set=function(t,e){void 0===e&&(e={}),e=s.extend({},c,e),e.parse&&(t=this.parse(t,e));var n,r,i,o,a,u,l,f=!Array.isArray(t),h=f?t?[t]:[]:t.slice(),p=e.at,d=this.comparator&&null==p&&e.sort!==!1,v="string"==typeof this.comparator?this.comparator:null,y=[],g=[],m={},b=e.add,_=e.merge,w=e.remove,O=!d&&b&&w?[]:null;for(n=0,r=h.length;r>n;n++){if(o=h[n],i=o.get(o.idAttribute)||o.uid,u=this.get(i))w&&(m[u.uid]=!0),_&&(a=o.toJSON(),u.set(a,e),d&&!l&&u.hasChanged(v)&&(l=!0)),h[n]=u;else if(b){if(h[n]=o,!o)continue;y.push(o),this._addReference(o,e)}o=u||o,O&&!m[o.id]&&O.push(o),m[o.uid]=!0}if(w){for(n=0,r=this.length;r>n;++n)m[(o=this.models[n]).uid]||g.push(o);g.length&&this.remove(g,e)}if(y.length||O&&O.length)if(d&&(l=!0),null!=p)for(n=0,r=y.length;r>n;n++)this.models.splice(p+n,0,y[n]);else{O&&(this.models.length=0);var A=O||y;for(n=0,r=A.length;r>n;n++)this.models.push(A[n])}if(l&&this.sort({silent:!0}),!e.silent){for(n=0,r=y.length;r>n;n++)(o=y[n]).trigger("add",o,this,e);(l||O&&O.length)&&this.trigger("sort",this,e),(y.length||g.length)&&this.trigger("update",this,e)}return f?h[0]:h},e.prototype.remove=function(t,e){void 0===e&&(e={});var n=!Array.isArray(t);t=n?[t]:t.slice();var r,i,o,s;for(r=0,i=t.length;i>r;r++)s=t[r]=this.get(t[r]),s&&(o=this.indexOf(s),this.models.splice(o,1),e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s,e));return n?t[0]:t},e.prototype.get=function(t){return this.find(t)},e.prototype.at=function(t){return this.models[t]},e.prototype.clone=function(t){return t=t||this.options,new this.constructor(this.models,t)},e.prototype.sort=function(t){if(void 0===t&&(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return"string"==typeof this.comparator||1===this.comparator.length?this._models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},e.prototype.sortBy=function(t,e){return a.sortBy(this._models,t,e)},e.prototype.push=function(t,e){return void 0===e&&(e={}),this.add(t,s.extend({at:this.length},e))},e.prototype.reset=function(t,e){var n=this;return void 0===e&&(e={}),this.forEach(function(t){n._removeReference(t,e)}),e.previousModels=this.models,this._reset(),t=this.add(t,e),e.silent||this.trigger("reset",this,e),t},e.prototype.create=function(t,e){void 0===e&&(e={add:!0});var n=new this.Model(t,e);return e.add&&this.add(n),n},e.prototype.parse=function(t,e){return void 0===e&&(e={}),t},e.prototype.find=function(t){var e;return e="function"==typeof t?a.find(this.models,t):a.find(this.models,function(e){return e.id==t||e.uid==t||t===e})},e.prototype.forEach=function(t,e){for(var n=0,r=this.models.length;r>n;n++)t.call(e||this,this.models[n],n);return this},e.prototype.indexOf=function(t){return this.models.indexOf(t)},e.prototype.toJSON=function(){return this.models.map(function(t){return t.toJSON()})},e.prototype._removeReference=function(t,e){this===t.collection&&delete t.collection,this.stopListening(t)},e.prototype._addReference=function(t,e){t.collection||(t.collection=this),this.listenTo(t,"all",this._onModelEvent)},e.prototype._reset=function(){this._models=[]},e.prototype._onModelEvent=function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),u.callFunc(this.trigger,this,a.slice(arguments)))},e.prototype.destroy=function(){var e=this;this.models.forEach(function(t){"function"==typeof t.destroy&&t.collection==e&&t.destroy()}),t.prototype.destroy.call(this)},e}(i.BaseObject);e.Collection=f},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(8),s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.extend=function(t,e){return o.inherits(this,t,e)},e}(i.EventEmitter);e.BaseObject=s},function(t,e,n){var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(49),o=n(8),s=n(9),a=function(t){function e(e,n){void 0===e&&(e={}),n=n||{},this._attributes={},this.set(e,null,{silent:!0}),this.uid=o.uniqueId("uid"),this._changed={},this.collection=n.collection,t.call(this)}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.idAttribute in this._attributes?this._attributes[this.idAttribute]:void 0},enumerable:!0,configurable:!0}),e.prototype.set=function(t,e,n){void 0===n&&(n={});var r,i,a,u,c,l,f,h={};if(null==t)return this;"object"==typeof t?(h=t,n=e):h[t]=e,n||(n={}),i=n.unset,u=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.extend(Object.create(null),this._attributes),this._changed={}),f=this._attributes,l=this._previousAttributes;for(r in h)e=h[r],o.equal(f[r],e)||a.push(r),o.equal(l[r],e)?delete this._changed[r]:this._changed[r]=e,i?delete f[r]:f[r]=e;if(!u){a.length&&(this._pending=!!n);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,f[a[p]],n)}if(c)return this;if(!u)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},e.prototype.get=function(t){return this._attributes[t]},e.prototype.unset=function(t,e){this.set(t,void 0,s.extend({},e,{unset:!0}))},e.prototype.has=function(t){return null!=this.get(t)},e.prototype.hasChanged=function(t){return null==t?!!Object.keys(this.changed).length:s.has(this.changed,t)},e.prototype.clear=function(t){var e={};for(var n in this._attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},Object.defineProperty(e.prototype,"changed",{get:function(){return s.extend({},this._changed)},enumerable:!0,configurable:!0}),e.prototype.changedAttributes=function(t){if(!t)return this.hasChanged()?s.extend(Object.create(null),this.changed):!1;var e,n={},r=this._changing?this._previousAttributes:this._attributes;for(var i in t)o.equal(r[i],e=t[i])||((n||(n={}))[i]=e);return n},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},e.prototype.previousAttributes=function(){return s.extend(Object.create(null),this._previousAttributes)},e.prototype.toJSON=function(){return JSON.parse(JSON.stringify(this._attributes))},e.prototype.clone=function(){return new this.constructor(this._attributes)},e}(i.BaseObject);e.Model=a},function(t,e,n){function r(t,e){void 0===e&&(e=".");var n={};for(var i in t){var o=t[i];if(!o||o.constructor!==Object&&o.constructor!==Array||l.isEmpty(o))n[i]=o;else{var s=r(o);for(var a in s){var u=s[a];n[i+e+a]=u}}}return n}function i(t,e,n){void 0===n&&(n=".");for(var r=e?e.split(n):[],i=t,o=0,s=r.length;s>o;o++){if(i instanceof f.Model)return!0;if(!i)return!1;i=i[r[o]]}return!1}function o(t,e,n,r){void 0===r&&(r=".");for(var i=e?e.split(r):[],o=t,s=0,a=i.length;a>s;s++){if(n&&!l.has(o,i[s]))return!1;if(o=o instanceof f.Model?o.get(i[s]):o[i[s]],null==o&&a-1>s&&(o={}),"undefined"==typeof o)return n?!0:o}return n?!0:o}function s(t,e,n,r){r=r||{};for(var i=r.separator||".",o=e?e.split(i):[],s=t,a=0,u=o.length;u>a&&void 0!==s;a++){var c=o[a];if(a===u-1)r.unset?delete s[c]:s[c]=n;else{if("undefined"==typeof s[c]||!l.isObject(s[c])){if(r.unset)return void delete s[c];var h=o[a+1];s[c]=/^\d+$/.test(h)?[]:{}}if(s=s[c],s instanceof f.Model){var p=o.slice(a+1);return s.set(p.join("."),n,r)}}}}function a(t,e){s(t,e,null,{unset:!0})}var u=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=n(8),l=n(9),f=n(50),h=function(t){function e(){t.apply(this,arguments)}return u(e,t),e.prototype.get=function(t){return o(this._attributes,t)},e.prototype.set=function(t,n,u){var h,p,d,v,y,g,m,b,_=this;if(null==t)return this;"object"==typeof t?(p=t,u=n||{}):(p={})[t]=n,u||(u={}),d=u.unset,y=u.silent,v=[],g=this._changing,this._changing=!0,g||(this._previousAttributes=l.extend({},this._attributes),this._changed={}),b=this._attributes,m=this._previousAttributes,this.idAttribute in p&&(this.id=p[this.idAttribute]),p=r(p);var w={},O=e.keyPathSeparator;this._nestedListener||(this._nestedListener={});for(h in p)if(n=p[h],c.equal(o(b,h),n)||(v.push(h),this._changed[h]=n),c.equal(o(m,h),n)?a(this.changed,h):s(this.changed,h,n),d){var A=o(b,h);if(A instanceof f.Model){var C=this._nestedListener[h];C&&(A.off("change",C),delete this._nestedListener[h])}a(b,h)}else{if(i(b,h,O))w[h]=!0;else if(n instanceof f.Model){var C=function(t){for(var e in t.changed)_._changed[h+O+e]=t.changed[e],_.trigger("change:"+h+O+e,t.changed[e]);_.trigger("change",_,u)};this._nestedListener[h]=C,n.on("change",C)}s(b,h,n)}if(!y){v.length&&(this._pending=!0);for(var k=0,j=v.length;j>k;k++){var x=v[k];w.hasOwnProperty(x)&&w[x]||(w[x]=!0,this.trigger("change:"+x,this,o(b,x),u));for(var E=x.split(O),P=E.length-1;P>0;P--){var S=E.slice(0,P).join(O),T=S+O+"*";w.hasOwnProperty(T)&&w[T]||(w[T]=!0,this.trigger("change:"+T,this,o(b,S),u)),w.hasOwnProperty(S)&&w[S]||(w[S]=!0,this.trigger("change:"+S,this,o(b,S),u))}}}if(g)return this;if(!y)for(;this._pending;)this._pending=!1,this.trigger("change",this,u);return this._pending=!1,this._changing=!1,this},e.prototype.clear=function(t){var e={},n=r(this._attributes);for(var i in n)e[i]=void 0;return this.set(e,l.extend({},t,{unset:!0}))},e.prototype.hasChanged=function(t){return null==t?!Object.keys(this.changed).length:void 0!==o(this.changed,t)},e.prototype.changedAttributes=function(t){if(!t)return this.hasChanged()?r(this.changed):!1;var e=this._changing?this._previousAttributes:this._attributes;t=r(t),e=r(e);var n,i=!1;for(var o in t)c.equal(e[o],n=t[o])||((i||(i={}))[o]=n);return i},e.prototype.previous=function(t){return null!=t&&this._previousAttributes?o(this._previousAttributes,t):null},e.prototype.previousAttributes=function(){return l.extend({},this._previousAttributes)},e.prototype.destroy=function(){for(var e in this._nestedListener){var n=this._nestedListener[e];if(n){var r=this.get(e);r&&r.off(e,n)}}t.prototype.destroy.call(this)},e.keyPathSeparator=".",e}(f.Model);e.NestedModel=h},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},a=n(46),u=n(6),c=["model","parent","__queue","_onchange","__timer","_listeners","__subscribers"],l=function(t){function e(){r(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),o(e,[{key:"$observe",value:function(){var t=this;this.$unobserve(),u.nextTick(function(){t._check(t.__model)}),this.__timer=setInterval(function(){t._check(t.__model)},300)}},{key:"$unobserve",value:function(){this.__timer&&(clearTimeout(this.__timer),this.__timer=null)}},{key:"_check",value:function(t){var e=this.__model.toJSON(),n=[],r=void 0,i=void 0,o=!0,s=!1,a=void 0;try{for(var l,f=Object.keys(this)[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var h=l.value;r=this[h],~c.indexOf(h)||(i={name:h,object:this,type:null==r?"delete":""},r&&!e[h]?i.type="add":r&&!u.equal(r,e[h])&&(i.type="update"),i.oldValue=e[h],n.push(i),delete e[h])}}catch(p){s=!0,a=p}finally{try{!o&&f["return"]&&f["return"]()}finally{if(s)throw a}}for(var h in e)n.push({name:h,object:this,type:"delete",oldValue:e[h]});n.length&&this.__onchange(n)}},{key:"$createChild",value:function(){var t=new e(this.__mediator);return t.__parent=this,t}}]),e}(a.Context);e.DirtyObjectObserver=l},function(t,e,n){"use strict";function r(t,e){var n=f.getDependencies(e),r=l(n,1),i=r[0];if(!i||"function"!=typeof i)throw new h.StickError("service should be a function");p.Repository.add(f.DependencyType.Service,t,i)}function i(t,e){var n=f.getDependencies(e),r=l(n,1),i=r[0];if(!i)throw new h.StickError("factory");p.Repository.add(f.DependencyType.Factory,t,i)}function o(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null==e){var n=void 0;if(_.hasHandler(t))n=_.get(t);else{if(!p.Repository.has(f.DependencyType.Module,t))throw new h.StickError("no module named "+t);var r=p.Repository.get(f.DependencyType.Module,t);n=new v.ModuleFactory(t,r.handler,_.createChild()),_.registerInstance(t,n)}return n}var i=f.getDependencies(e),o=l(i,2),s=o[0],a=o[1];if(s){var u=void 0;if("function"!=typeof s&&d.isObject(s)){var c=d.extend({},s);"function"==typeof s.initialize?(u=s.initialize,delete c.initialize):"function"==typeof s.constructor&&(u=s.constructor,delete c.constructor),a&&0!=a.length?u.inject=a:f.getDependencies(u),d.assign(u.prototype,c)}else"function"==typeof s&&(u=s);if("function"!=typeof u)throw new h.StickError("controller defition should be a function or an object literal");var y=new v.ModuleFactory(t,u,_.createChild());return _.registerInstance(t,y,!0),y}throw new h.StickError("controller defition should be a function or an object literal")}function s(t,e){var n=void 0,r=f.getDependencies(e),i=l(r,2),o=i[0],s=i[1];if("function"==typeof o)n={initialize:o};else{if(!d.isObject(o)||"function"!=typeof o.initialize)throw new h.StickError("component should be a function or an object");s&&s.length?o.initialize.inject=s:f.getDependencies(o.initialize),n=o}var a=d.inherits(g.BaseComponent,n);m.component(t,a)}function a(t,e){m.attribute(t,e)}function u(t,n){if(d.has(e.decorators,t))throw new Error("decorator called "+t+" already defined!");e.decorators[t]=n}function c(t,e){m.modifier(t,e)}var l=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=n(16),h=n(29),p=n(27),d=n(6),v=n(43),y=n(55),g=n(56),m=n(57),b=n(15);e.decorators=b,e.service=r,e.factory=i;var _=new y.Container;e.module=o,e.component=s,e.attribute=a,e.decorator=u,e.modifier=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function s(t,e,n){var r=void 0,i=void 0;try{r=p.callFunc(t,e,n)}catch(o){i=o}return[r,i]}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},c=n(17),l=n(29),f=n(27),h=n(16),p=n(6),d=n(23),v=n(28);o(n(17)),e.tryCatch=s;var y=function(t){function e(t){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.__instances=new Map}return i(e,t),a(e,[{key:"hasInstance",value:function(t){return this.__instances.has(t)}},{key:"hasHandler",value:function(t,n,r){var i=u(Object.getPrototypeOf(e.prototype),"hasHandler",this).call(this,t,n);return!i&&r?f.Repository.hasAny(t):i}},{key:"get",value:function(t,e){var n;if(null===t||void 0===t)throw new c.DIBadKeyError;if(t===c.DIContainer)return this;if(t instanceof c.Resolver)return t.get(this);if(n=this.entries.get(t),void 0!==n)return n[0](this);if(this.parent&&this.parent.hasHandler(t))return this.parent.get(t,e);if(n=f.Repository.any(t),null!=n)return this.register(n),this.entries.get(t)[0](this);if("string"==typeof t)throw new l.StickDependencyError("no component registered for key: "+t);return this.autoRegister(t,e),n=this.entries.get(t),n[0](this)}},{key:"registerSingleton",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];return this.registerHandler(t,function(i){if(n.__instances.has(t))return n.__instances.get(t);var o=n.invoke(e,null,r);return n.__instances.set(t,o),o})}},{key:"registerService",value:function(t,e){var n=this,r=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],i=void 0;i="string"==typeof t?t:t.name;var o=i+"Provider",s=d.Metadata.getOwn(h.DIServiceConfig,e,r);if(null!=s){if(this.hasHandler(o,!1,!1))throw new Error("Provider for '"+i+"' already defined");var a=new s;this.registerInstance(o,a)}return this.registerHandler(t,function(i){if(n.__instances.has(t))return n.__instances.get(t);var s=n.invoke(e,null,r);return n.__instances.set(t,s),n.unregister(o),s})}},{key:"registerInstance",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];u(Object.getPrototypeOf(e.prototype),"registerInstance",this).call(this,t,n),r&&this.__instances.set(t,n)}},{key:"clear",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.__instances.keys()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.destroy(o)}}catch(s){e=!0,n=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},{key:"destroy",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null==t){var n=!0,r=!1,i=void 0;try{for(var o,s=this.__instances.keys()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;this.destroy(a,e)}}catch(u){r=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw i}}return delete this.constructionInfo,void(this.constructionInfo=new Map)}var c=this.__instances.get(t);c?(e?e(c):"function"==typeof c.$destroy&&c.$destroy(),this.__instances["delete"](t),c=void 0):console.log("could not find key ",t)}},{key:"register",value:function(t){switch(t.type){case h.DependencyType.Controller:var e=new v.ControllerFactory(t.name,t.handler,this.createChild());this.registerInstance(t.name,e,!0);break;case h.DependencyType.Service:this.registerService(t.name,t.handler);break;case h.DependencyType.Factory:"function"==typeof t.handler?(h.setActivator(t.handler,c.FactoryActivator.instance),this.registerSingleton(t.name,t.handler)):this.registerInstance(t.name,t.handler)}}},{key:"createChild",value:function(){var t=new e;return t.parent=this,t}}]),e}(c.DIContainer);e.Container=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(6),s=n(30),a=n(16),u=function(){function t(e,n,i,u){var c=this;r(this,t),this.update&&(this.update=o.bind(this.update,this)),this.section=e,this.vnode=n,this.attributes=i,this._attributes={},this.view=u,this.document=u.template.options.document,n.childNodes&&(this.childTemplate=s.template(s.fragment(n.childNodes),u.template.options));for(var l in i)this.setAttribute(l,i[l]);var f=this.view._container;a.resolveDependencies(this.initialize,f).then(function(t){o.callFunc(c.initialize,c,t)})["catch"](function(t){throw t})}return i(t,[{key:"initialize",value:function(){}},{key:"setAttribute",value:function(t,e){this._attributes[t]=e}},{key:"removeAttribute",value:function(t){this._attributes[t]=void 0}},{key:"destroy",value:function(){var t=this;"function"==typeof t.onDestroy&&t.onDestroy()}}]),t}();e.BaseComponent=u},function(t,e,n){"use strict";function r(t,e){"function"!=typeof e&&(e=p.extendClass(f.BaseAttribute,e)),f[t]=e}function i(t,e){"function"!=typeof e&&(e=p.extendClass(l.BaseComponent,e)),l[t]=e}function o(t,e){h[t]=e}function s(t){p.Debug.enable(t)}function a(t,e){var n=c,r=v.compile(t),i=r(n.fragment,n.element,n.text,n.comment,n.dynamic,y.binding);return n.template(i,p.extend({document:document,viewClass:d.View,attributes:new u.Repository(f),components:new u.Repository(l),modifiers:h},e||{}))}var u=n(58),c=n(30),l=n(59),f=n(63),h=n(69),p=n(35),d=n(62),v=n(70),y=n(72);e.version="$$version$$",e.attribute=r,e.component=i,e.modifier=o,e.debugging=s,e.compile=a},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.values=e||{}}return t.prototype.set=function(t,e){this.values[t]=e},t.prototype.get=function(t){return this.values[t]},t.prototype.has=function(t){return!!this.get(t)},t.prototype["delete"]=function(t){delete this.values[t]},t}();e.Repository=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(60)),r(n(61))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(40),o=n(38),s=function(){function t(e,n,s,a){r(this,t),this.section=e,this.vnode=n,this.attributes=s,this.view=a,this.document=a.template.options.document,n.childNodes&&(this.childTemplate=i.template(o.fragment(n.childNodes),a.template.options));for(var u in s)this.setAttribute(u,s[u]);this.initialize()}return t.prototype.initialize=function(){},t.prototype.setAttribute=function(t,e){this.attributes[t]=e},t.prototype.removeAttribute=function(t){this.attributes[t]=void 0},t.prototype.destroy=function(){},t}();e.BaseComponent=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(t)if(t.forEach)t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}var a=n(60),u=n(62),c=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a._children=[],a}return o(e,t),e.prototype.update=function(){var t,e=this.as,n=this.each,r=this.key||"key",i=0,o=this,a=this.view;n instanceof u.Call&&(n=n.call()),s(n,function(n,s){var u;e?(t={},t[r]=s,t[e]=n):t=n,t.parent=o.view.context,i>=o._children.length?(u=o.childTemplate.view(t,{parent:a}),o._children.push(u),o.section.appendChild(u.render(t))):(u=o._children[i],u.context=t,u.update()),i++}),this._children.splice(i).forEach(function(t){t.remove()})},e.prototype.setAttribute=function(t,e){this[t]=e},e}(a.BaseComponent);e.Repeat=c,e.repeat=c},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e;
}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){for(var r,i="string"==typeof e?e.split("."):e,o=t,s=0,a=i.length-1;a>s;s++)r=i[s],o[r]||(o[r]={}),o=o[r];return o[i[i.length-1]]=n,n}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(35),c=n(30),l=u.debug("view"),f=function(){function t(e,n,r,i){o(this,t),this.gettable=r,this.settable=i,this.view=e,this.path=n}return t.prototype.value=function(t){return 0===arguments.length?this.gettable?this.view.get(this.path):void 0:void(this.settable&&this.view.set(this.path,t))},t.prototype.toString=function(){return this.view.get(this.path)||""},t}();e.Reference=f;var h=function(){function t(e,n,r){o(this,t),this.view=e,this.path=n,this.value=r,this.assign=u.bind(this.assign,this),this.toString=u.bind(this.toString,this)}return t.prototype.assign=function(t){this.view.set(this.path,this.value.call(this))},t.prototype.toString=function(){var t=this.value.call(this);return t?String(t):""},t}();e.Assignment=h;var p=function(){function t(e,n,r){o(this,t),this.view=e,this.keypath=n,this.params=r}return t.prototype.call=function(){var t=this.view.get(this.keypath);if(null==t||"function"!=typeof t)throw new Error("not exists or not function");return t.apply(this.view,this.params)},t.prototype.toString=function(){var t=this.call();return t?String(t):""},t}();e.Call=p;var d=function(t){function e(n,i,s){var a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];o(this,e);var u=r(this,t.call(this,n,i,s,a));return u.context=s,u._callers={},u._getters={},a.parent&&(u.parent=a.parent),a.delegator&&(u._delegator=a.delegator),u}return i(e,t),e.prototype.getDelegator=function(){if(this._delegator)return this._delegator;for(var t=this.parent;void 0!=t;){if(t._delegator)return t._delegator;t=t.parent}return null},e.prototype.addListener=function(e,n,r){var i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=this.getDelegator();return o?o.addListener(e,n,r,i):"function"==typeof r?t.prototype.addListener.call(this,e,n,r,i):void 0},e.prototype.removeListener=function(e,n,r){var i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=this.getDelegator();o?o.removeListener(e,n,r,i):"function"==typeof r&&t.prototype.removeListener.call(this,e,n,r,i)},e.prototype.get=function(t){if(this.context){var e,n="string"!=typeof t?t.join("."):t;try{var r;(r=this._getters[n])||(r=this._getters[n]=new Function("return this."+n)),e=r.call(this.context)}catch(i){e=void 0}return e=void 0!=e?e:this.parent?this.parent.get(t):void 0,l('get value "%s": %s',t,e),e}},e.prototype.set=function(t,e){if(l("set value %s on context %j",e,this.context),this.context){"string"==typeof t&&(t=t.split("."));s(this.context,t,e);this.update()}},e.prototype.render=function(){this.update();var e=t.prototype.render.call(this);return e},e.prototype.ref=function(t,e,n){return l("reference %s, gettable: %o, settabble: %o",t,e,n),new f(this,t,e,n)},e.prototype.assign=function(t,e){return l("assignment %s %s",t,e),new h(this,t,e)},e.prototype.call=function(t,e){var n;if(l('call keypath "%s", args: "%o"',t,e),"string"!=typeof t&&(t=t.join(".")),!(n=this._callers[t])){var r=["this"].concat(t.split("."));r.pop(),n=this._callers[t]=new Function("params","return this."+t+".apply("+r.join(".")+", params);")}return new p(this,t,e)},a(e,[{key:"root",get:function(){if(null==this.parent)return this;for(var t=this,e=t;e;)e=e.parent,e&&(t=e);return t}}]),e}(c.View);e.View=d},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(64),o=n(66),s=n(67),a=n(68);r(n(65)),e.value=i.ValueAttribute,e.onclick=o.ClickAttribute,e.onenter=o.OnEnterAttribute,e.onescape=o.OnEscapeAttribute,e.checked=i.ValueAttribute,e.style=s.StyleAttribute,e.focus=a.FocusAttribute},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(65),a=n(62),u=n(35),c=["change","keyup","input"],l=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._onInput=u.bind(this._onInput,this,null);for(var t=c,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;this.ref.addEventListener(i,this._onInput)}},e.prototype.update=function(){var t=this.model=this.value;if(t){if(!(t&&t instanceof a.Reference))throw new Error("input value must be a reference. Make sure you have <~> defined");t.gettable&&this._elementValue(this._parseValue(t.value()))}},e.prototype._parseValue=function(t){return null!=t&&""!==t?t:void 0},e.prototype._onInput=function(t){clearInterval(this._autocompleteCheckInterval),!t||t.keyCode&&~[27].indexOf(t.keyCode)||t.stopPropagation();var e=this._parseValue(this._elementValue());this.model&&String(this.model.value())!=String(e)&&this.model.value(e)},e.prototype._elementValue=function(t){var e=this.ref,n=/checkbox/.test(e.type),r=/radio/.test(e.type),i=n||r,o=Object.prototype.hasOwnProperty.call(e,"value"),s=o||/input|textarea|checkbox/.test(e.nodeName.toLowerCase());return arguments.length?(null==t?t="":clearInterval(this._autocompleteCheckInterval),void(i?r?String(t)===String(e.value)&&(e.checked=!0):e.checked=t:String(t)!==this._elementValue()&&(s?e.value=t:e.innerHTML=t))):n?Boolean(e.checked):s?e.value||"":e.innerHTML||""},e}(s.BaseAttribute);e.ValueAttribute=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,r,i,o){n(this,t),this.ref=e,this.key=r,this.value=i,this.view=o,this.initialize()}return t.prototype.initialize=function(){},t.prototype.update=function(){},t.prototype.destroy=function(){},t.test=function(){},t}();e.BaseAttribute=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(65),u=n(62),c=n(35),l=c.debug("attributes:event"),f=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._onEvent=c.bind(this._onEvent,this)},e.prototype._onEvent=function(t){var e=void 0;if(e=this.value instanceof u.Assignment?this.value.assign:this.value,"function"!=typeof e&&!(e instanceof u.Call))throw new Error("[event] value is not a function or a Callable");l("fired event: %s",this._event),e instanceof u.Call?e.call():e(t)},e.prototype.destroy=function(){l("removed event listener %s: %o",this._event,this.value),this.view.removeListener(this.ref,this._event,this._onEvent)},s(e,[{key:"event",set:function(t){this._event&&(l("added event listener %s: %o",this._event,this.value),this.view.removeListener(this.ref,this._event,this._onEvent)),this._event=t,l("added event listener %s: %o",this._event,this.value),this.view.addListener(this.ref,this._event,this._onEvent)},get:function(){return this._event}}]),e}(a.BaseAttribute);e.EventAttribute=f;var h=function(t){function e(n,o,s,a){r(this,e);var u=i(this,t.call(this,n,o,s,a));return u.keyCodes=[],u.event="keydown",u}return o(e,t),e.prototype._onEvent=function(e){~this.keyCodes.indexOf(e.keyCode)&&t.prototype._onEvent.call(this,e)},e}(f);e.KeyCodeAttribute=h;var p=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.event="click",a}return o(e,t),e}(f);e.ClickAttribute=p;var d=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.keyCodes=[13],a}return o(e,t),e}(h);e.OnEnterAttribute=d;var v=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var a=i(this,t.call.apply(t,[this].concat(o)));return a.KeyCodes=[27],a}return o(e,t),e}(h);e.OnEscapeAttribute=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(65),a=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._currentStyles={}},e.prototype.update=function(){var t=this.value;if("string"==typeof t)return void this.ref.setAttribute("style",t);var e={};for(var n in t){var r=t[n];r!==this._currentStyles[n]&&(e[n]=this._currentStyles[n]=r||"")}for(var i in e)this.ref.style[i]=e[i]},e}(s.BaseAttribute);e.StyleAttribute=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(65),a=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){},e.prototype.update=function(){if(this.value&&this.ref.focus){var t=this;setTimeout(function(){t.ref.focus()},1)}},e}(s.BaseAttribute);e.FocusAttribute=a},function(t,e){"use strict";function n(t){return String(t).toUpperCase()}function r(t){return String(t).toLowerCase()}function i(t){var e;return e=String(t),e.substr(0,1).toUpperCase()+e.substr(1)}function o(t,e,n){return JSON.stringify.apply(JSON,arguments)}function s(t){return s(t)}e.uppercase=n,e.lowercase=r,e.titlecase=i,e.json=o,e.isNaN=s,e.round=Math.round},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=o(t);return new Function("return "+n)()}function o(t){var e=new u;return e.transpile(t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=n(71);e.compile=i,e.transpile=o;var u=function(){function t(){r(this,t);for(var e in this)"_"===e.charAt(0)&&(this[e]=this[e].bind(this));this.transpile=this.transpile.bind(this)}return t.prototype.transpile=function(t){return this._root(a.parser.parse(t))},t.prototype._root=function(t){var e="(function(fragment, element, text, comment, dynamic, createBindingClass) {",n="fragment(["+this._children(t)+"])";return e+="'use strict';return "+n,e+="})"},t.prototype._expression=function(t){return this["_"+t[0]](t)},t.prototype._element=function(t){var e={},n=[];return t[2].forEach(function(r,i){var o=r[1],s=r[2],a=o.split(".");a.length>1?(e[a[0]]||(t=e[a[0]]=["element",a[0],[],[["element",t[1],n,t[3]]]]),e[a[0]][2].push([r[0],a[1],s])):n.push(r)}),this._element2(t)},t.prototype._doctype=function(t){return"text('<!DOCTYPE "+t[1]+">')"},t.prototype._children=function(t){for(t=t.concat();t.length;){var e=t[t.length-1];if("text"!==e[0])break;if(e[1]=e[1].replace(/[\s\r\n\t]+$/,""),!/^[\s\r\n\t]*$/.test(e[1]))break;t.pop()}return t.map(this._expression).join(", ")},t.prototype._element2=function(t){var e="element('"+t[1]+"'",n=[];e+=", {";e+=t[2].map(function(t){var e=t[1],r=t[2];return!r.length||1===r.length&&"string"===r[0][0]?"'"+e+"':"+(r.length?this._expression(r[0]):"true"):void n.push(t)}.bind(this)).filter(function(t){return!!t}).join(","),e+="}";var r=this._children(t[3]);if(r.length&&(e+=", "+r),e+=")",n.length){var i="",o="";n.forEach(function(t){var e=t[0];if(i+="this","block"===e)i+=".ref.nodeValue = "+this._expression(t[1]);else if("attribute"===e){var n=t[2].map(function(t){return"("+this._expression(t)+")"}.bind(this)).join("+");i+=".setAttribute('"+t[1]+"', "+n+");"}else"property"===e&&(i+=".setProperty('"+t[1]+"', "+this._expression(t[2])+");")}.bind(this)),i.length&&(i="function(context) {"+i+"}"),o.length&&(o="function() { var self = this; "+o+"}"),(i.length||o.length)&&(e="dynamic("+e+",",e+="createBindingClass("+(o.length?o:"void 0")+", "+(i?i:"void 0")+")",e+=")")}return e},t.prototype.__addReference=function(t){var e="_"+ ++this._refCounter;return this._refs[e]=t,e},t.prototype._block=function(t){var e="dynamic(text(), createBindingClass(void 0, function(context) {";return e+="this.ref.nodeValue = "+this._expression(t[1])+";",e+"}))"},t.prototype._text=function(t){return"text('"+t[1]+"')"},t.prototype._comment=function(t){return"comment('"+t[1]+"')"},t.prototype._hash=function(t){var e=t[1],n=[];for(var r in e)n.push("'"+r+"':"+this._expression(e[r]));return"{"+n.join(",")+"}"},t.prototype._script=function(t){return this._expression(t[1])},t.prototype._referenceKeyPath=function(t){var e=[],n=!1;return t.forEach(function(t){"string"!=typeof t?(n=!0,e.push(this._expression(t))):e.push(t)}.bind(this)),e=n?"["+e.map(function(e,n){return"string"==typeof t[n]?"'"+e+"'":e}).join(",")+"]":"'"+e.join(".")+"'"},t.prototype._reference=function(t){var e=this._referenceKeyPath(t[1]);if(t[2]){var n=!!~t[2].indexOf("<~"),r=!!~t[2].indexOf("~>");return"this.view.ref("+e+", "+n+", "+r+")"}return"this.view.get("+e+")"},t.prototype._string=function(t){return"'"+t[1]+"'"},t.prototype._operator=function(t){return this._expression(t[2])+t[1]+this._expression(t[3])},t.prototype._condition=function(t){return this._expression(t[1])+"?"+this._expression(t[2])+":"+this._expression(t[3])},t.prototype._literal=function(t){return t[1]},t.prototype._not=function(t){return"!"+this._expression(t[1])},t.prototype._negative=function(t){return"-"+this._expression(t[1])},t.prototype._call=function(t){var e="this.view.call("+this._referenceKeyPath(t[1][1])+", [";return e+=t[2].map(this._expression).join(","),e+"])"},t.prototype._modifier=function(t){return"this.options.modifiers."+t[1]+"("+t[2].map(this._expression).join(",")+")"},t.prototype._assign=function(t){return'this.view.assign("'+t[1][1]+'", function () { return '+this._expression(t[2])+";})"},t.prototype._group=function(t){return"("+this._expression(t[1])+")"},t.prototype.__findExpressions=function(t,e){var n=[];return this.__traverse(e,function(e){e[0]===t&&n.push(e)}),n},t.prototype.__traverse=function(t,e){e(t),t.forEach(function(t){t&&"object"===("undefined"==typeof t?"undefined":s(t))&&this.__traverse(t,e)}.bind(this))},t}()},function(t,e){"use strict";e.parser=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function n(t){function n(){return t.substring(ji,ki)}function r(e){throw a(null,[{type:"other",description:e}],t.substring(ji,ki),o(ji,ki))}function i(e){var n,r,i=xi[e];if(i)return i;for(n=e-1;!xi[n];)n--;for(i=xi[n],i={line:i.line,column:i.column,seenCR:i.seenCR};e>n;)r=t.charAt(n),"\n"===r?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return xi[e]=i,i}function o(t,e){var n=i(t),r=i(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function s(t){Ei>ki||(ki>Ei&&(Ei=ki,Pi=[]),Pi.push(t))}function a(t,n,r,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var r,i,o,s=new Array(t.length);for(o=0;o<t.length;o++)s[o]=t[o].description;return r=t.length>1?s.slice(0,-1).join(", ")+" or "+s[t.length-1]:s[0],i=e?'"'+n(e)+'"':"end of input","Expected "+r+" but "+i+" found."}return null!==n&&o(n),new e(null!==t?t:s(n,r),n,r,i)}function u(){var t;return t=c()}function c(){var t,e;return t=ki,e=f(),e!==bt&&(ji=t,e=Ot(e)),t=e}function l(){var e,n,r,i,o,a;if(e=ki,t.substr(ki,9)===At?(n=At,ki+=9):(n=bt,0===Si&&s(Ct)),n!==bt)if(r=ft(),r!==bt){if(i=[],kt.test(t.charAt(ki))?(o=t.charAt(ki),ki++):(o=bt,0===Si&&s(jt)),o!==bt)for(;o!==bt;)i.push(o),kt.test(t.charAt(ki))?(o=t.charAt(ki),ki++):(o=bt,0===Si&&s(jt));else i=bt;i!==bt?(o=ft(),o!==bt?(62===t.charCodeAt(ki)?(a=xt,ki++):(a=bt,0===Si&&s(Et)),a!==bt?(ji=e,n=Pt(i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;else ki=e,e=bt;return e}function f(){var t,e,n;for(t=ki,e=[],n=v(),n===bt&&(n=p(),n===bt&&(n=g(),n===bt&&(n=h(),n===bt&&(n=m(),n===bt&&(n=P())))));n!==bt;)e.push(n),n=v(),n===bt&&(n=p(),n===bt&&(n=g(),n===bt&&(n=h(),n===bt&&(n=m(),n===bt&&(n=P())))));return e!==bt&&(ji=t,e=St(e)),t=e}function h(){var e,n,r,i,o,a,u;if(e=ki,n=ft(),n!==bt)if(t.substr(ki,4)===Tt?(r=Tt,ki+=4):(r=bt,0===Si&&s(Mt)),r!==bt){if(i=[],o=ki,a=ki,Si++,t.substr(ki,3)===Dt?(u=Dt,ki+=3):(u=bt,0===Si&&s(Rt)),Si--,u===bt?a=void 0:(ki=a,a=bt),a!==bt?(u=lt(),u!==bt?(ji=o,a=Nt(u),o=a):(ki=o,o=bt)):(ki=o,o=bt),o!==bt)for(;o!==bt;)i.push(o),o=ki,a=ki,Si++,t.substr(ki,3)===Dt?(u=Dt,ki+=3):(u=bt,0===Si&&s(Rt)),Si--,u===bt?a=void 0:(ki=a,a=bt),a!==bt?(u=lt(),u!==bt?(ji=o,a=Nt(u),o=a):(ki=o,o=bt)):(ki=o,o=bt);else i=bt;i!==bt?(t.substr(ki,3)===Dt?(o=Dt,ki+=3):(o=bt,0===Si&&s(Rt)),o!==bt?(a=ft(),a!==bt?(ji=e,n=$t(i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;else ki=e,e=bt;return e===bt&&(e=l()),e}function p(){var e,n,r,i,o,a,u,c;if(e=ki,n=ft(),n!==bt)if(t.substr(ki,7)===Ft?(r=Ft,ki+=7):(r=bt,0===Si&&s(Lt)),r!==bt)if(i=A(),i!==bt)if(62===t.charCodeAt(ki)?(o=xt,ki++):(o=bt,0===Si&&s(Et)),o!==bt){if(a=[],u=d(),u!==bt)for(;u!==bt;)a.push(u),u=d();else a=bt;a!==bt?(t.substr(ki,9)===It?(u=It,ki+=9):(u=bt,0===Si&&s(Bt)),u!==bt?(c=ft(),c!==bt?(ji=e,n=zt(i,a),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;else ki=e,e=bt;else ki=e,e=bt;else ki=e,e=bt;return e}function d(){var e,n,r;return e=ki,n=ki,Si++,t.substr(ki,9)===It?(r=It,ki+=9):(r=bt,0===Si&&s(Bt)),Si--,r===bt?n=void 0:(ki=n,n=bt),n!==bt?(r=lt(),r!==bt?(ji=e,n=Ht(),e=n):(ki=e,e=bt)):(ki=e,e=bt),e}function v(){var e,n,r,i,o,a;return e=ki,60===t.charCodeAt(ki)?(n=qt,ki++):(n=bt,0===Si&&s(Vt)),n!==bt?(t.substr(ki,4)===Ut?(r=Ut,ki+=4):(r=bt,0===Si&&s(Jt)),r===bt&&(t.substr(ki,4)===Kt?(r=Kt,ki+=4):(r=bt,0===Si&&s(Zt)),r===bt&&(t.substr(ki,2)===Xt?(r=Xt,ki+=2):(r=bt,0===Si&&s(Yt)),r===bt&&(t.substr(ki,3)===Gt?(r=Gt,ki+=3):(r=bt,0===Si&&s(Wt)),r===bt&&(t.substr(ki,7)===Qt?(r=Qt,ki+=7):(r=bt,0===Si&&s(te)),r===bt&&(t.substr(ki,5)===ee?(r=ee,ki+=5):(r=bt,0===Si&&s(ne)),r===bt&&(t.substr(ki,2)===re?(r=re,ki+=2):(r=bt,0===Si&&s(ie)),r===bt&&(t.substr(ki,3)===oe?(r=oe,ki+=3):(r=bt,0===Si&&s(se)),r===bt&&(t.substr(ki,5)===ae?(r=ae,ki+=5):(r=bt,0===Si&&s(ue)),r===bt&&(t.substr(ki,6)===ce?(r=ce,ki+=6):(r=bt,0===Si&&s(le)),r===bt&&(t.substr(ki,4)===fe?(r=fe,ki+=4):(r=bt,0===Si&&s(he)),r===bt&&(t.substr(ki,4)===pe?(r=pe,ki+=4):(r=bt,0===Si&&s(de)),r===bt&&(t.substr(ki,5)===ve?(r=ve,ki+=5):(r=bt,0===Si&&s(ye)),r===bt&&(t.substr(ki,6)===ge?(r=ge,ki+=6):(r=bt,0===Si&&s(me)),r===bt&&(t.substr(ki,5)===be?(r=be,ki+=5):(r=bt,0===Si&&s(_e)),r===bt&&(t.substr(ki,3)===we?(r=we,ki+=3):(r=bt,0===Si&&s(Oe))))))))))))))))),r!==bt?(i=A(),i!==bt?(62===t.charCodeAt(ki)?(o=xt,ki++):(o=bt,0===Si&&s(Et)),o===bt&&(t.substr(ki,2)===Ae?(o=Ae,ki+=2):(o=bt,0===Si&&s(Ce))),o===bt&&(o=null),o!==bt?(a=y(),a===bt&&(a=null),a!==bt?(ji=e,n=ke(r,i,a),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function y(){var e,n,r,i,o;return e=ki,n=ft(),n!==bt?(t.substr(ki,2)===je?(r=je,ki+=2):(r=bt,0===Si&&s(xe)),r!==bt?(t.substr(ki,4)===Ut?(i=Ut,ki+=4):(i=bt,0===Si&&s(Jt)),i===bt&&(t.substr(ki,4)===Kt?(i=Kt,ki+=4):(i=bt,0===Si&&s(Zt)),i===bt&&(t.substr(ki,2)===Xt?(i=Xt,ki+=2):(i=bt,0===Si&&s(Yt)),i===bt&&(t.substr(ki,3)===Gt?(i=Gt,ki+=3):(i=bt,0===Si&&s(Wt)),i===bt&&(t.substr(ki,7)===Qt?(i=Qt,ki+=7):(i=bt,0===Si&&s(te)),i===bt&&(t.substr(ki,5)===ee?(i=ee,ki+=5):(i=bt,0===Si&&s(ne)),i===bt&&(t.substr(ki,2)===re?(i=re,ki+=2):(i=bt,0===Si&&s(ie)),i===bt&&(t.substr(ki,3)===oe?(i=oe,ki+=3):(i=bt,0===Si&&s(se)),i===bt&&(t.substr(ki,5)===ae?(i=ae,ki+=5):(i=bt,0===Si&&s(ue)),i===bt&&(t.substr(ki,6)===ce?(i=ce,ki+=6):(i=bt,0===Si&&s(le)),i===bt&&(t.substr(ki,4)===fe?(i=fe,ki+=4):(i=bt,0===Si&&s(he)),i===bt&&(t.substr(ki,4)===pe?(i=pe,ki+=4):(i=bt,0===Si&&s(de)),i===bt&&(t.substr(ki,5)===ve?(i=ve,ki+=5):(i=bt,0===Si&&s(ye)),i===bt&&(t.substr(ki,6)===ge?(i=ge,ki+=6):(i=bt,0===Si&&s(me)),i===bt&&(t.substr(ki,5)===be?(i=be,ki+=5):(i=bt,0===Si&&s(_e)),i===bt&&(t.substr(ki,3)===we?(i=we,ki+=3):(i=bt,0===Si&&s(Oe))))))))))))))))),i!==bt?(62===t.charCodeAt(ki)?(o=xt,ki++):(o=bt,0===Si&&s(Et)),o!==bt?(ji=e,n=Ee(i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function g(){var t,e,n,r;return t=ki,e=_(),e!==bt?(n=f(),n!==bt?(r=C(),r!==bt?(ji=t,e=Pe(e,n,r),t=e):(ki=t,t=bt)):(ki=t,t=bt)):(ki=t,t=bt),t===bt&&(t=w()),t}function m(){var t,e,n;if(t=ki,e=[],n=b(),n!==bt)for(;n!==bt;)e.push(n),n=b();else e=bt;return e!==bt&&(ji=t,e=Se(e)),t=e}function b(){var e,n,r;return e=ki,n=ki,Si++,60===t.charCodeAt(ki)?(r=qt,ki++):(r=bt,0===Si&&s(Vt)),r===bt&&(t.substr(ki,2)===Te?(r=Te,ki+=2):(r=bt,0===Si&&s(Me))),Si--,r===bt?n=void 0:(ki=n,n=bt),n!==bt?(r=lt(),r!==bt?(ji=e,n=Ht(),e=n):(ki=e,e=bt)):(ki=e,e=bt),e}function _(){var e,n,r,i,o,a;return e=ki,n=ft(),n!==bt?(60===t.charCodeAt(ki)?(r=qt,ki++):(r=bt,0===Si&&s(Vt)),r!==bt?(i=O(),i!==bt?(62===t.charCodeAt(ki)?(o=xt,ki++):(o=bt,0===Si&&s(Et)),o!==bt?(a=ft(),a!==bt?(ji=e,n=De(i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function w(){var e,n,r,i,o,a;return e=ki,n=ft(),n!==bt?(60===t.charCodeAt(ki)?(r=qt,ki++):(r=bt,0===Si&&s(Vt)),r!==bt?(i=O(),i!==bt?(t.substr(ki,2)===Ae?(o=Ae,ki+=2):(o=bt,0===Si&&s(Ce)),o!==bt?(a=ft(),a!==bt?(ji=e,n=Re(i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function O(){var t,e,n;return t=ki,e=k(),e!==bt?(n=A(),n!==bt?(ji=t,e=Ne(e,n),t=e):(ki=t,t=bt)):(ki=t,t=bt),t}function A(){var t,e,n,r;if(t=ki,e=ft(),e!==bt){for(n=[],r=j();r!==bt;)n.push(r),r=j();n!==bt?(r=ft(),r!==bt?(ji=t,e=$e(n),t=e):(ki=t,t=bt)):(ki=t,t=bt)}else ki=t,t=bt;return t}function C(){var e,n,r,i;return e=ki,t.substr(ki,2)===je?(n=je,ki+=2):(n=bt,0===Si&&s(xe)),n!==bt?(r=k(),r!==bt?(62===t.charCodeAt(ki)?(i=xt,ki++):(i=bt,0===Si&&s(Et)),i!==bt?(ji=e,n=Ee(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function k(){var e,n,r,i;if(e=ki,n=ft(),n!==bt){if(r=[],Fe.test(t.charAt(ki))?(i=t.charAt(ki),ki++):(i=bt,0===Si&&s(Le)),i!==bt)for(;i!==bt;)r.push(i),Fe.test(t.charAt(ki))?(i=t.charAt(ki),ki++):(i=bt,0===Si&&s(Le));else r=bt;r!==bt?(ji=e,n=Ie(r),e=n):(ki=e,e=bt)}else ki=e,e=bt;return e}function j(){var e,n,r,i,o,a;return e=ki,n=k(),n!==bt?(r=ft(),r!==bt?(61===t.charCodeAt(ki)?(i=Be,ki++):(i=bt,0===Si&&s(ze)),i!==bt?(o=ft(),o!==bt?(a=x(),a!==bt?(ji=e,n=He(n,a),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=ki,n=k(),n!==bt?(r=ft(),r!==bt?(61===t.charCodeAt(ki)?(i=Be,ki++):(i=bt,0===Si&&s(ze)),i!==bt?(o=ft(),o!==bt?(a=E(),a!==bt?(ji=e,n=qe(n,a),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=ki,n=k(),n!==bt&&(ji=e,n=Ve(n)),e=n)),e}function x(){var e,n,r,i,o,a,u,c;if(e=ki,34===t.charCodeAt(ki)?(n=Ue,ki++):(n=bt,0===Si&&s(Je)),n!==bt){if(r=[],i=E(),i===bt){if(i=ki,o=[],a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Ke.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(Ze)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Ke.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(Ze)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt);else o=bt;o!==bt&&(ji=i,o=Xe()),i=o}for(;i!==bt;)if(r.push(i),i=E(),i===bt){if(i=ki,o=[],a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Ke.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(Ze)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Ke.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(Ze)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt);else o=bt;o!==bt&&(ji=i,o=Xe()),i=o}r!==bt?(34===t.charCodeAt(ki)?(i=Ue,ki++):(i=bt,0===Si&&s(Je)),i!==bt?(ji=e,n=Ye(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;if(e===bt)if(e=ki,39===t.charCodeAt(ki)?(n=Ge,ki++):(n=bt,0===Si&&s(We)),n!==bt){if(r=[],i=E(),i===bt){if(i=ki,o=[],a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Qe.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Qe.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt);else o=bt;o!==bt&&(ji=i,o=Xe()),i=o}for(;i!==bt;)if(r.push(i),i=E(),i===bt){if(i=ki,o=[],a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Qe.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt),a!==bt)for(;a!==bt;)o.push(a),a=ki,u=ki,Si++,t.substr(ki,2)===Te?(c=Te,ki+=2):(c=bt,0===Si&&s(Me)),Si--,c===bt?u=void 0:(ki=u,u=bt),u!==bt?(Qe.test(t.charAt(ki))?(c=t.charAt(ki),ki++):(c=bt,0===Si&&s(tn)),c!==bt?(u=[u,c],a=u):(ki=a,a=bt)):(ki=a,a=bt);else o=bt;o!==bt&&(ji=i,o=Xe()),i=o}r!==bt?(39===t.charCodeAt(ki)?(i=Ge,ki++):(i=bt,0===Si&&s(We)),i!==bt?(ji=e,n=Ye(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;return e}function E(){var e,n,r,i,o,a;return e=ki,t.substr(ki,2)===Te?(n=Te,ki+=2):(n=bt,0===Si&&s(Me)),n!==bt?(r=ft(),r!==bt?(i=S(),i!==bt?(o=ft(),o!==bt?(t.substr(ki,2)===en?(a=en,ki+=2):(a=bt,0===Si&&s(nn)),a!==bt?(ji=e,n=rn(i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function P(){var t,e;return t=ki,e=E(),e!==bt&&(ji=t,e=on(e)),t=e}function S(){var e,n,r,i,o,a;return e=ki,n=D(),n!==bt?(63===t.charCodeAt(ki)?(r=sn,ki++):(r=bt,0===Si&&s(an)),r!==bt?(i=S(),i!==bt?(58===t.charCodeAt(ki)?(o=un,ki++):(o=bt,0===Si&&s(cn)),o!==bt?(a=S(),a!==bt?(ji=e,n=ln(n,i,a),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=D()),e}function T(){var e,n,r,i;return e=ki,40===t.charCodeAt(ki)?(n=fn,ki++):(n=bt,0===Si&&s(hn)),n!==bt?(r=M(),r!==bt?(41===t.charCodeAt(ki)?(i=pn,ki++):(i=bt,0===Si&&s(dn)),i!==bt?(ji=e,n=vn(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=ki,t.substr(ki,2)===yn?(n=yn,ki+=2):(n=bt,0===Si&&s(gn)),n!==bt&&(ji=e,n=mn()),e=n),e}function M(){var e,n,r,i,o,a;if(e=ki,n=S(),n!==bt){for(r=[],i=ki,44===t.charCodeAt(ki)?(o=bn,ki++):(o=bt,0===Si&&s(_n)),o!==bt?(a=S(),a!==bt?(o=[o,a],i=o):(ki=i,i=bt)):(ki=i,i=bt);i!==bt;)r.push(i),i=ki,44===t.charCodeAt(ki)?(o=bn,ki++):(o=bt,0===Si&&s(_n)),o!==bt?(a=S(),a!==bt?(o=[o,a],i=o):(ki=i,i=bt)):(ki=i,i=bt);r!==bt?(ji=e,n=wn(n,r),e=n):(ki=e,e=bt)}else ki=e,e=bt;return e}function D(){var e,n,r,i;return e=ki,n=L(),n!==bt?(61===t.charCodeAt(ki)?(r=Be,ki++):(r=bt,0===Si&&s(ze)),r!==bt?(i=D(),i!==bt?(ji=e,n=On(n,i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=R()),e}function R(){var e,n,r,i;return e=ki,n=N(),n!==bt?(t.substr(ki,2)===An?(r=An,ki+=2):(r=bt,0===Si&&s(Cn)),r===bt&&(t.substr(ki,2)===kn?(r=kn,ki+=2):(r=bt,0===Si&&s(jn)),r===bt&&(t.substr(ki,3)===xn?(r=xn,ki+=3):(r=bt,0===Si&&s(En)),r===bt&&(t.substr(ki,2)===Pn?(r=Pn,ki+=2):(r=bt,0===Si&&s(Sn)),r===bt&&(t.substr(ki,3)===Tn?(r=Tn,ki+=3):(r=bt,0===Si&&s(Mn)),r===bt&&(t.substr(ki,2)===Dn?(r=Dn,ki+=2):(r=bt,0===Si&&s(Rn)),r===bt&&(t.substr(ki,3)===Nn?(r=Nn,ki+=3):(r=bt,0===Si&&s($n)),r===bt&&(t.substr(ki,2)===Fn?(r=Fn,ki+=2):(r=bt,0===Si&&s(Ln)),r===bt&&(62===t.charCodeAt(ki)?(r=xt,ki++):(r=bt,0===Si&&s(Et)),r===bt&&(t.substr(ki,3)===In?(r=In,ki+=3):(r=bt,0===Si&&s(Bn)),r===bt&&(t.substr(ki,2)===zn?(r=zn,ki+=2):(r=bt,0===Si&&s(Hn)),r===bt&&(60===t.charCodeAt(ki)?(r=qt,ki++):(r=bt,0===Si&&s(Vt)),r===bt&&(43===t.charCodeAt(ki)?(r=qn,ki++):(r=bt,0===Si&&s(Vn)),r===bt&&(45===t.charCodeAt(ki)?(r=Un,ki++):(r=bt,0===Si&&s(Jn)),r===bt&&(37===t.charCodeAt(ki)?(r=Kn,ki++):(r=bt,0===Si&&s(Zn)),r===bt&&(42===t.charCodeAt(ki)?(r=Xn,ki++):(r=bt,0===Si&&s(Yn)),r===bt&&(47===t.charCodeAt(ki)?(r=Gn,ki++):(r=bt,0===Si&&s(Wn)))))))))))))))))),r!==bt?(i=R(),i!==bt?(ji=e,n=Qn(n,r,i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=N()),e}function N(){var t,e,n,r;return t=ki,e=ft(),e!==bt?(n=$(),n!==bt?(r=ft(),r!==bt?(ji=t,e=tr(n),t=e):(ki=t,t=bt)):(ki=t,t=bt)):(ki=t,t=bt),t}function $(){var t,e,n,r;if(t=ki,e=I(),e!==bt){for(n=[],r=F();r!==bt;)n.push(r),r=F();n!==bt?(ji=t,e=er(e,n),t=e):(ki=t,t=bt)}else ki=t,t=bt;return t===bt&&(t=Y(),t===bt&&(t=L())),t}function F(){var e,n,r,i,o,a;return e=ki,124===t.charCodeAt(ki)?(n=nr,ki++):(n=bt,0===Si&&s(rr)),n!==bt?(r=ft(),r!==bt?(i=et(),i!==bt?(o=T(),o===bt&&(o=null),o!==bt?(a=ft(),a!==bt?(ji=e,n=ir(i,o),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function L(){var t,e,n,r;return t=ki,e=ft(),e!==bt?(n=B(),
n!==bt?(r=ft(),r!==bt?(ji=t,e=or(n),t=e):(ki=t,t=bt)):(ki=t,t=bt)):(ki=t,t=bt),t}function I(){var e,n,r;return e=ki,33===t.charCodeAt(ki)?(n=sr,ki++):(n=bt,0===Si&&s(ar)),n!==bt?(r=I(),r!==bt?(ji=e,n=ur(n,r),e=n):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=ki,33===t.charCodeAt(ki)?(n=sr,ki++):(n=bt,0===Si&&s(ar)),n===bt&&(45===t.charCodeAt(ki)?(n=Un,ki++):(n=bt,0===Si&&s(Jn))),n!==bt?(r=I(),r!==bt?(ji=e,n=cr(n,r),e=n):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(e=V(),e===bt&&(e=Y(),e===bt&&(e=L())))),e}function B(){var t;return t=q(),t===bt&&(t=nt(),t===bt&&(t=z(),t===bt&&(t=at(),t===bt&&(t=G())))),t}function z(){var e,n,r,i,o,a;if(e=ki,n=ki,45===t.charCodeAt(ki)?(r=Un,ki++):(r=bt,0===Si&&s(Jn)),r===bt&&(r=null),r!==bt){if(i=ki,o=[],lr.test(t.charAt(ki))?(a=t.charAt(ki),ki++):(a=bt,0===Si&&s(fr)),a!==bt)for(;a!==bt;)o.push(a),lr.test(t.charAt(ki))?(a=t.charAt(ki),ki++):(a=bt,0===Si&&s(fr));else o=bt;o!==bt?(a=H(),a===bt&&(a=null),a!==bt?(o=[o,a],i=o):(ki=i,i=bt)):(ki=i,i=bt),i===bt&&(i=H()),i!==bt?(r=[r,i],n=r):(ki=n,n=bt)}else ki=n,n=bt;return n!==bt&&(ji=e,n=hr(n)),e=n}function H(){var e,n,r,i;if(e=ki,46===t.charCodeAt(ki)?(n=pr,ki++):(n=bt,0===Si&&s(dr)),n!==bt){if(r=[],lr.test(t.charAt(ki))?(i=t.charAt(ki),ki++):(i=bt,0===Si&&s(fr)),i!==bt)for(;i!==bt;)r.push(i),lr.test(t.charAt(ki))?(i=t.charAt(ki),ki++):(i=bt,0===Si&&s(fr));else r=bt;r!==bt?(n=[n,r],e=n):(ki=e,e=bt)}else ki=e,e=bt;return e}function q(){var e,n,r,i;return e=ki,40===t.charCodeAt(ki)?(n=fn,ki++):(n=bt,0===Si&&s(hn)),n!==bt?(r=S(),r!==bt?(41===t.charCodeAt(ki)?(i=pn,ki++):(i=bt,0===Si&&s(dn)),i!==bt?(ji=e,n=vr(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function V(){var t,e;return t=ki,e=U(),e===bt&&(e=J(),e===bt&&(e=X(),e===bt&&(e=K(),e===bt&&(e=Z())))),e!==bt&&(ji=t,e=yr(e)),t=e}function U(){var e,n;return e=ki,t.substr(ki,4)===gr?(n=gr,ki+=4):(n=bt,0===Si&&s(mr)),n===bt&&(t.substr(ki,5)===br?(n=br,ki+=5):(n=bt,0===Si&&s(_r))),n!==bt&&(ji=e,n=wr(n)),e=n}function J(){var e,n;return e=ki,t.substr(ki,9)===Or?(n=Or,ki+=9):(n=bt,0===Si&&s(Ar)),n!==bt&&(ji=e,n=Cr()),e=n}function K(){var e,n;return e=ki,t.substr(ki,3)===kr?(n=kr,ki+=3):(n=bt,0===Si&&s(jr)),n!==bt&&(ji=e,n=xr()),e=n}function Z(){var e,n;return e=ki,t.substr(ki,8)===Er?(n=Er,ki+=8):(n=bt,0===Si&&s(Pr)),n!==bt&&(ji=e,n=Sr()),e=n}function X(){var e,n;return e=ki,t.substr(ki,4)===Tr?(n=Tr,ki+=4):(n=bt,0===Si&&s(Mr)),n===bt&&(t.substr(ki,4)===Dr?(n=Dr,ki+=4):(n=bt,0===Si&&s(Rr))),n!==bt&&(ji=e,n=Nr()),e=n}function Y(){var t,e,n;return t=ki,e=L(),e!==bt?(n=T(),n!==bt?(ji=t,e=$r(e,n),t=e):(ki=t,t=bt)):(ki=t,t=bt),t}function G(){var e,n,r,i,o,a;if(e=ki,94===t.charCodeAt(ki)?(n=Fr,ki++):(n=bt,0===Si&&s(Lr)),n===bt&&(t.substr(ki,2)===Ir?(n=Ir,ki+=2):(n=bt,0===Si&&s(Br)),n===bt&&(t.substr(ki,3)===zr?(n=zr,ki+=3):(n=bt,0===Si&&s(Hr)),n===bt&&(126===t.charCodeAt(ki)?(n=qr,ki++):(n=bt,0===Si&&s(Vr)),n===bt&&(t.substr(ki,2)===Ur?(n=Ur,ki+=2):(n=bt,0===Si&&s(Jr)))))),n===bt&&(n=null),n!==bt)if(r=ft(),r!==bt)if(i=et(),i!==bt){for(o=[],a=W();a!==bt;)o.push(a),a=W();o!==bt?(a=ft(),a!==bt?(ji=e,n=Kr(n,i,o),e=n):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;else ki=e,e=bt;else ki=e,e=bt;return e}function W(){var t;return t=Q(),t===bt&&(t=tt()),t}function Q(){var e,n,r;return e=ki,46===t.charCodeAt(ki)?(n=pr,ki++):(n=bt,0===Si&&s(dr)),n!==bt?(r=et(),r!==bt?(ji=e,n=Zr(r),e=n):(ki=e,e=bt)):(ki=e,e=bt),e}function tt(){var e,n,r,i;return e=ki,91===t.charCodeAt(ki)?(n=Xr,ki++):(n=bt,0===Si&&s(Yr)),n!==bt?(r=S(),r!==bt?(93===t.charCodeAt(ki)?(i=Gr,ki++):(i=bt,0===Si&&s(Wr)),i!==bt?(ji=e,n=Qr(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function et(){var e,n,r;if(e=ki,n=[],ti.test(t.charAt(ki))?(r=t.charAt(ki),ki++):(r=bt,0===Si&&s(ei)),r!==bt)for(;r!==bt;)n.push(r),ti.test(t.charAt(ki))?(r=t.charAt(ki),ki++):(r=bt,0===Si&&s(ei));else n=bt;return n!==bt&&(ji=e,n=ni(n)),e=n}function nt(){var e,n,r,i,o,a;return e=ki,123===t.charCodeAt(ki)?(n=ri,ki++):(n=bt,0===Si&&s(ii)),n!==bt?(r=ft(),r!==bt?(i=rt(),i===bt&&(i=null),i!==bt?(o=ft(),o!==bt?(125===t.charCodeAt(ki)?(a=oi,ki++):(a=bt,0===Si&&s(si)),a!==bt?(ji=e,n=ai(i),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function rt(){var t,e;return t=ki,e=it(),e!==bt&&(ji=t,e=ui(e)),t=e}function it(){var e,n,r,i,o,a;if(e=ki,n=ot(),n!==bt){for(r=[],i=ki,44===t.charCodeAt(ki)?(o=bn,ki++):(o=bt,0===Si&&s(_n)),o!==bt?(a=it(),a!==bt?(o=[o,a],i=o):(ki=i,i=bt)):(ki=i,i=bt);i!==bt;)r.push(i),i=ki,44===t.charCodeAt(ki)?(o=bn,ki++):(o=bt,0===Si&&s(_n)),o!==bt?(a=it(),a!==bt?(o=[o,a],i=o):(ki=i,i=bt)):(ki=i,i=bt);r!==bt?(ji=e,n=ci(n,r),e=n):(ki=e,e=bt)}else ki=e,e=bt;return e}function ot(){var e,n,r,i,o,a;return e=ki,n=ft(),n!==bt?(r=st(),r!==bt?(i=ft(),i!==bt?(58===t.charCodeAt(ki)?(o=un,ki++):(o=bt,0===Si&&s(cn)),o!==bt?(a=S(),a===bt&&(a=null),a!==bt?(ji=e,n=li(r,a),e=n):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt)):(ki=e,e=bt),e}function st(){var t,e;return t=ki,e=at(),e!==bt&&(ji=t,e=fi(e)),t=e,t===bt&&(t=ki,e=et(),e!==bt&&(ji=t,e=hi(e)),t=e),t}function at(){var e,n,r,i;if(Si++,e=ki,34===t.charCodeAt(ki)?(n=Ue,ki++):(n=bt,0===Si&&s(Je)),n!==bt){for(r=[],i=ut();i!==bt;)r.push(i),i=ut();r!==bt?(34===t.charCodeAt(ki)?(i=Ue,ki++):(i=bt,0===Si&&s(Je)),i!==bt?(ji=e,n=di(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;if(e===bt)if(e=ki,39===t.charCodeAt(ki)?(n=Ge,ki++):(n=bt,0===Si&&s(We)),n!==bt){for(r=[],i=ct();i!==bt;)r.push(i),i=ct();r!==bt?(39===t.charCodeAt(ki)?(i=Ge,ki++):(i=bt,0===Si&&s(We)),i!==bt?(ji=e,n=di(r),e=n):(ki=e,e=bt)):(ki=e,e=bt)}else ki=e,e=bt;return Si--,e===bt&&(n=bt,0===Si&&s(pi)),e}function ut(){var e,n,r;return e=ki,n=ki,Si++,34===t.charCodeAt(ki)?(r=Ue,ki++):(r=bt,0===Si&&s(Je)),r===bt&&(92===t.charCodeAt(ki)?(r=vi,ki++):(r=bt,0===Si&&s(yi))),Si--,r===bt?n=void 0:(ki=n,n=bt),n!==bt?(r=lt(),r!==bt?(ji=e,n=gi(),e=n):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(t.substr(ki,2)===mi?(e=mi,ki+=2):(e=bt,0===Si&&s(bi))),e}function ct(){var e,n,r;return e=ki,n=ki,Si++,39===t.charCodeAt(ki)?(r=Ge,ki++):(r=bt,0===Si&&s(We)),r===bt&&(92===t.charCodeAt(ki)?(r=vi,ki++):(r=bt,0===Si&&s(yi))),Si--,r===bt?n=void 0:(ki=n,n=bt),n!==bt?(r=lt(),r!==bt?(ji=e,n=gi(),e=n):(ki=e,e=bt)):(ki=e,e=bt),e===bt&&(t.substr(ki,2)===_i?(e=_i,ki+=2):(e=bt,0===Si&&s(wi))),e}function lt(){var e;return t.length>ki?(e=t.charAt(ki),ki++):(e=bt,0===Si&&s(Oi)),e}function ft(){var e,n;for(e=[],Ai.test(t.charAt(ki))?(n=t.charAt(ki),ki++):(n=bt,0===Si&&s(Ci));n!==bt;)e.push(n),Ai.test(t.charAt(ki))?(n=t.charAt(ki),ki++):(n=bt,0===Si&&s(Ci));return e}function ht(t){return t.replace(/(^\s+)|(\s+$)/,"").replace(/[\r\n]/g,"\\n")}function pt(t){return t.replace(/[ \r\n\t]+/g," ")}function dt(t){return t=t.filter(function(t){return!/^[\n\t\r]+$/.test(t.value)}),1===t.length&&"string"===t[0].type?t[0]:t}function vt(t){function e(t){for(var e,n=t.length;n--&&(e=t[n],"textNode"==e.type&&!/\S/.test(e.value)&&!e.decoded);)t.splice(n,1);return t}return e(e(t.reverse()).reverse())}function yt(t){return t.replace(/[\n\r]+/g,"\\n").replace(/'/g,"\\'")}var gt,mt=arguments.length>1?arguments[1]:{},bt={},_t={Start:u},wt=u,Ot=function(t){return t},At="<!DOCTYPE",Ct={type:"literal",value:"<!DOCTYPE",description:'"<!DOCTYPE"'},kt=/^[^>]/,jt={type:"class",value:"[^>]",description:"[^>]"},xt=">",Et={type:"literal",value:">",description:'">"'},Pt=function(t){return["doctype",t.join("")]},St=function(t){return vt(t)},Tt="<!--",Mt={type:"literal",value:"<!--",description:'"<!--"'},Dt="-->",Rt={type:"literal",value:"-->",description:'"-->"'},Nt=function(t){return t},$t=function(t){return["comment",yt(ht(t.join("")))]},Ft="<script",Lt={type:"literal",value:"<script",description:'"<script"'},It="</script>",Bt={type:"literal",value:"</script>",description:'"</script>"'},zt=function(t,e){return["element","script",t,[["text",yt(e.join(""))]]]},Ht=function(){return n()},qt="<",Vt={type:"literal",value:"<",description:'"<"'},Ut="area",Jt={type:"literal",value:"area",description:'"area"'},Kt="base",Zt={type:"literal",value:"base",description:'"base"'},Xt="br",Yt={type:"literal",value:"br",description:'"br"'},Gt="col",Wt={type:"literal",value:"col",description:'"col"'},Qt="command",te={type:"literal",value:"command",description:'"command"'},ee="embed",ne={type:"literal",value:"embed",description:'"embed"'},re="hr",ie={type:"literal",value:"hr",description:'"hr"'},oe="img",se={type:"literal",value:"img",description:'"img"'},ae="input",ue={type:"literal",value:"input",description:'"input"'},ce="keygen",le={type:"literal",value:"keygen",description:'"keygen"'},fe="link",he={type:"literal",value:"link",description:'"link"'},pe="meta",de={type:"literal",value:"meta",description:'"meta"'},ve="param",ye={type:"literal",value:"param",description:'"param"'},ge="source",me={type:"literal",value:"source",description:'"source"'},be="track",_e={type:"literal",value:"track",description:'"track"'},we="wbr",Oe={type:"literal",value:"wbr",description:'"wbr"'},Ae="/>",Ce={type:"literal",value:"/>",description:'"/>"'},ke=function(t,e,n){return n&&t!=n.name&&r("</"+t+">"),["element",t,e,[]]},je="</",xe={type:"literal",value:"</",description:'"</"'},Ee=function(t){return{name:t}},Pe=function(t,e,n){return t.name!=n.name&&r("</"+t.name+">"),["element",t.name,t.attributes,e]},Se=function(t){return["text",yt(pt(t.join("")))]},Te="{{",Me={type:"literal",value:"{{",description:'"{{"'},De=function(t){return t},Re=function(t){return["element",t.name,t.attributes,[]]},Ne=function(t,e){return{name:t,attributes:e}},$e=function(t){return t},Fe=/^[a-zA-Z0-9:_.\-]/,Le={type:"class",value:"[a-zA-Z0-9:_\\.\\-]",description:"[a-zA-Z0-9:_\\.\\-]"},Ie=function(t){return t.join("")},Be="=",ze={type:"literal",value:"=",description:'"="'},He=function(t,e){return["attribute",t,e]},qe=function(t,e){return["property",t,e]},Ve=function(t){return["attribute",t,[]]},Ue='"',Je={type:"literal",value:'"',description:'"\\""'},Ke=/^[^"]/,Ze={type:"class",value:'[^"]',description:'[^"]'},Xe=function(){return["string",n()]},Ye=function(t){return dt(t)},Ge="'",We={type:"literal",value:"'",description:'"\'"'},Qe=/^[^']/,tn={type:"class",value:"[^']",description:"[^']"},en="}}",nn={type:"literal",value:"}}",description:'"}}"'},rn=function(t){return["script",t]},on=function(t){return["block",t[1]]},sn="?",an={type:"literal",value:"?",description:'"?"'},un=":",cn={type:"literal",value:":",description:'":"'},ln=function(t,e,n){return["condition",t,e,n]},fn="(",hn={type:"literal",value:"(",description:'"("'},pn=")",dn={type:"literal",value:")",description:'")"'},vn=function(t){return t},yn="()",gn={type:"literal",value:"()",description:'"()"'},mn=function(){return[]},bn=",",_n={type:"literal",value:",",description:'","'},wn=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},On=function(t,e){return["assign",t,e]},An="&&",Cn={type:"literal",value:"&&",description:'"&&"'},kn="||",jn={type:"literal",value:"||",description:'"||"'},xn="===",En={type:"literal",value:"===",description:'"==="'},Pn="==",Sn={type:"literal",value:"==",description:'"=="'},Tn="!==",Mn={type:"literal",value:"!==",description:'"!=="'},Dn="!=",Rn={type:"literal",value:"!=",description:'"!="'},Nn=">==",$n={type:"literal",value:">==",description:'">=="'},Fn=">=",Ln={type:"literal",value:">=",description:'">="'},In="<==",Bn={type:"literal",value:"<==",description:'"<=="'},zn="<=",Hn={type:"literal",value:"<=",description:'"<="'},qn="+",Vn={type:"literal",value:"+",description:'"+"'},Un="-",Jn={type:"literal",value:"-",description:'"-"'},Kn="%",Zn={type:"literal",value:"%",description:'"%"'},Xn="*",Yn={type:"literal",value:"*",description:'"*"'},Gn="/",Wn={type:"literal",value:"/",description:'"/"'},Qn=function(t,e,n){return["operator",e,t,n]},tr=function(t){return t},er=function(t,e){for(var n=0,r=e.length;r>n;n++)t=["modifier",e[n].name,[t].concat(e[n].parameters)];return t},nr="|",rr={type:"literal",value:"|",description:'"|"'},ir=function(t,e){return{name:t,parameters:e||[]}},or=function(t){return t},sr="!",ar={type:"literal",value:"!",description:'"!"'},ur=function(t,e){return["not",e]},cr=function(t,e){return["negative",e]},lr=/^[0-9]/,fr={type:"class",value:"[0-9]",description:"[0-9]"},hr=function(t){return["literal",parseFloat(n())]},pr=".",dr={type:"literal",value:".",description:'"."'},vr=function(t){return["group",t]},yr=function(t){return t},gr="true",mr={type:"literal",value:"true",description:'"true"'},br="false",_r={type:"literal",value:"false",description:'"false"'},wr=function(t){return["literal","true"===t]},Or="undefined",Ar={type:"literal",value:"undefined",description:'"undefined"'},Cr=function(){return["literal",void 0]},kr="NaN",jr={type:"literal",value:"NaN",description:'"NaN"'},xr=function(){return["literal",NaN]},Er="Infinity",Pr={type:"literal",value:"Infinity",description:'"Infinity"'},Sr=function(){return["literal",1/0]},Tr="null",Mr={type:"literal",value:"null",description:'"null"'},Dr="NULL",Rr={type:"literal",value:"NULL",description:'"NULL"'},Nr=function(){return["literal",null]},$r=function(t,e){return["call",t,e]},Fr="^",Lr={type:"literal",value:"^",description:'"^"'},Ir="~>",Br={type:"literal",value:"~>",description:'"~>"'},zr="<~>",Hr={type:"literal",value:"<~>",description:'"<~>"'},qr="~",Vr={type:"literal",value:"~",description:'"~"'},Ur="<~",Jr={type:"literal",value:"<~",description:'"<~"'},Kr=function(t,e,n){return["reference",[e].concat(n),t]},Zr=function(t){return t},Xr="[",Yr={type:"literal",value:"[",description:'"["'},Gr="]",Wr={type:"literal",value:"]",description:'"]"'},Qr=function(t){return t},ti=/^[a-zA-Z_$0-9]/,ei={type:"class",value:"[a-zA-Z_$0-9]",description:"[a-zA-Z_$0-9]"},ni=function(t){return n()},ri="{",ii={type:"literal",value:"{",description:'"{"'},oi="}",si={type:"literal",value:"}",description:'"}"'},ai=function(t){return["hash",t]},ui=function(t){for(var e={},n=0,r=t.length;r>n;n++)e[t[n].key]=t[n].value;return e},ci=function(t,e){return[t].concat(e.length?e[0][1]:[])},li=function(t,e){return{key:t,value:e}},fi=function(t){return t[1]},hi=function(t){return t},pi={type:"other",description:"string"},di=function(t){return["string",t.join("")]},vi="\\",yi={type:"literal",value:"\\",description:'"\\\\"'},gi=function(){return n()},mi='\\"',bi={type:"literal",value:'\\"',description:'"\\\\\\""'},_i="\\'",wi={type:"literal",value:"\\'",description:'"\\\\\'"'},Oi={type:"any",description:"any character"},Ai=/^[ \n\r\t]/,Ci={type:"class",value:"[ \\n\\r\\t]",description:"[ \\n\\r\\t]"},ki=0,ji=0,xi=[{line:1,column:1,seenCR:!1}],Ei=0,Pi=[],Si=0;if("startRule"in mt){if(!(mt.startRule in _t))throw new Error("Can't start parsing from rule \""+mt.startRule+'".');wt=_t[mt.startRule]}if(gt=wt(),gt!==bt&&ki===t.length)return gt;throw gt!==bt&&ki<t.length&&s({type:"end",description:"end of input"}),a(null,Pi,Ei<t.length?t.charAt(Ei):null,Ei<t.length?o(Ei,Ei+1):o(Ei,Ei))}return t(e,Error),{SyntaxError:e,parse:n}}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return o.extendClass(s,{initialize:t||function(){},_update:e||function(){}})}var o=n(35),s=function(){function t(e,n){r(this,t),this._attrBindings={},this.ref=e,this.view=n,this.options=n.template.options,this._attributeClasses=this.options.attributes}return t.prototype.setAttribute=function(t,e){this.setAsRegisteredAttribute(t,e)||void 0!=e&&this.ref.setAttribute(t,e)},t.prototype.setProperty=function(t,e){this.setAsRegisteredAttribute(t,e)||(this.ref.nodeType?this.ref[t]=e:this.ref.setAttribute(t,e))},t.prototype.setAsRegisteredAttribute=function(t,e){if(this._attrBindings[t])this._attrBindings[t].value=e;else{var n=this._attributeClasses.get(t);if(!n)return!1;this._attrBindings[t]=new n(this.ref,t,e,this.view)}return!0},t.prototype.update=function(t){this._update();for(var e in this._attrBindings)this._attrBindings[e].update()},t.prototype.destroy=function(){for(var t in this._attrBindings)this._attrBindings[t].destroy()},t}();e.Binding=s,e.binding=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n,r){var i,o=arguments.length,s=3>o?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(3>o?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},s=n(15),a=n(6),u=function(){function t(){r(this,t)}return i(t,[{key:"get",value:function(t){return a.request.get(t)}},{key:"post",value:function(t){return a.request.post(t)}},{key:"put",value:function(t){return a.request.put(t)}},{key:"del",value:function(t){return a.request.del(t)}}]),t}();u=o([s.service("$http")],u),e.HttpService=u},function(t,e,n){"use strict";var r=n(54),i=n(75),o=n(57),s=n(6);r.factory("$templateResolver",function(){return function(t){var e=document.getElementById(t);return null==e?s.Promise.reject(new Error("template with id: '"+t+"' not found")):s.Promise.resolve(e.innerHTML)}}),r.factory("$templateCreator",["$templateResolver","$container",function(t,e){return function(t,n){var r=o.compile(t,{viewClass:i.TemplateView}),s=r.view(n,{container:e});return s}}])},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},a=n(62),u=n(47),c=function(t){function e(t,n,i,o){r(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,i,o),o.delegator&&(this._delegator=o.delegator),o.container&&(this._container=o.container)}return i(e,t),o(e,[{key:"_onModelChange",value:function(){}},{key:"set",value:function(t,n){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(!r){if(!(this.context instanceof u.Model))return s(Object.getPrototypeOf(e.prototype),"set",this).call(this,t,n);if(Array.isArray(t)||(t=t.split(/[,.]/)),"this"===t[0])return t.shift(),void(0===t.length?(this.root.context=n,this.root.update()):(this.root.set(t,n),this.root.update()));"root"===t[0]?(t.shift(),this.root.set(t,n)):this.context.set(t.join("."),n)}this.update()}},{key:"get",value:function(t){Array.isArray(t)||(t=t.split(/[,.]/));var n=void 0,r=this.context;return"@"===t[0].substr(0,1)&&(t[0]=t[0].substr(1),t.unshift("this")),"this"===t[0]?(t.shift(),0===t.length&&(n=this.context)):"root"===t[0]&&(t.shift(),r=this.root.context),t=t.join("."),n||(n=this.context instanceof u.Model?r.get(t):s(Object.getPrototypeOf(e.prototype),"get",this).call(this,t)),n}},{key:"remove",value:function(){s(Object.getPrototypeOf(e.prototype),"remove",this).call(this),delete this._container,delete this._delegator,delete this._context}},{key:"$destroy",value:function(){this.remove()}},{key:"context",set:function(t){this._context&&this._context instanceof u.Model,null!=t&&t instanceof u.Model&&t.on("change",function(){var e=t.changed;for(var n in e)this.set(n,e[n])},this),this._context=t},get:function(){return this._context}}]),e}(a.View);e.TemplateView=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n,r){var i,o=arguments.length,s=3>o?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(3>o?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},s=n(15),a=n(5),u=function(){function t(){r(this,t),this.emitter=new a.EventEmitter}return i(t,[{key:"publish",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];(e=this.emitter).trigger.apply(e,[t].concat(r))}},{key:"subscribe",value:function(t,e,n){this.emitter.on(t,e,n)}},{key:"unsubscribe",value:function(t,e){this.emitter.off(t,e)}}]),t}();u=o([s.service("$mediator")],u),e.Mediator=u},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(54);r(n(75));var o=n(78),s=n(79);i.component("controller",["$container",o.Controller]),i.component("repeat",s.Repeat),r(n(56))},function(t,e,n){"use strict";var r=n(28);e.Controller={initialize:function(t){var e=this;if(this.attributes.name&&(this.name=this._attributes.name,this.as=this._attributes.as||this.name),this.factory=t.get(this.name),!(this.factory instanceof r.ControllerFactory))throw new Error(this.name+" is not a controller");var n=this.childTemplate;this.attributes.template&&(n=this.attributes.template),this.factory.create({template:n,contextName:this.as}).then(function(t){var n=e.factory.container.get("template");e.section.appendChild(n.render())})},onDestroy:function(){this.factory&&this.factory.destroy()}}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(47),o=n(6);e.Repeat={initialize:function(){this._children=[],this._collection=[],this.id=o.uniqueId()},update:function(){this._children=this._children||[],this._collection=this._collection||[];var t=(this.as,this.each);this.key||"key",this.view;t!==this._collection&&t&&(this._collection&&this._collection instanceof i.Collection&&this.__removeEventListeners(this._collection),this._collection=t,this._update(),t instanceof i.Collection&&this.__addEventListeners(t))},_update:function(){var t,e=this.as,n=this.view,o=0;this._collection.forEach(function(s){var a;t=e?new i.NestedModel(r({},e,s)):s,o>=this._children.length?(a=this.childTemplate.view(t,{parent:n}),this._children.push(a),this.section.appendChild(a.render(t))):(a=this._children[o],a.context=t,a.update()),o++},this),this._children.splice(o).forEach(function(t){t.remove()})},__addEventListeners:function(t){t.on("add",this._update,this),t.on("remove",this._update,this),t.on("reset",this._update,this)},__removeEventListeners:function(t){t.off("remove",this._update),t.off("add",this._update),t.reset("reset",this._update)},setAttribute:function(t,e){this[t]=e},setProperty:function(){console.log(arguments)},onDestroy:function(){this._collection&&"function"==typeof this._collection.destroy&&this._collection.destroy();var t=!0,e=!1,n=void 0;try{for(var r,i=this._children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.remove()}}catch(s){e=!0,n=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}}}])});